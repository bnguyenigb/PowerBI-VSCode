"use strict";var xb=Object.create;var ao=Object.defineProperty;var Ib=Object.getOwnPropertyDescriptor;var _b=Object.getOwnPropertyNames;var Sb=Object.getPrototypeOf,Ab=Object.prototype.hasOwnProperty;var g=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Pb=(r,e)=>{for(var t in e)ao(r,t,{get:e[t],enumerable:!0})},Md=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _b(e))!Ab.call(r,i)&&i!==t&&ao(r,i,{get:()=>e[i],enumerable:!(n=Ib(e,i))||n.enumerable});return r};var Q=(r,e,t)=>(t=r!=null?xb(Sb(r)):{},Md(e||!r||!r.__esModule?ao(t,"default",{value:r,enumerable:!0}):t,r)),Rb=r=>Md(ao({},"__esModule",{value:!0}),r);var Tc=g((YU,Ud)=>{"use strict";Ud.exports=function(e,t){return function(){for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];return e.apply(t,i)}}});var Le=g((WU,qd)=>{"use strict";var Ob=Tc(),Tr=Object.prototype.toString;function xc(r){return Tr.call(r)==="[object Array]"}function bc(r){return typeof r>"u"}function kb(r){return r!==null&&!bc(r)&&r.constructor!==null&&!bc(r.constructor)&&typeof r.constructor.isBuffer=="function"&&r.constructor.isBuffer(r)}function Nb(r){return Tr.call(r)==="[object ArrayBuffer]"}function Mb(r){return typeof FormData<"u"&&r instanceof FormData}function Db(r){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function Ub(r){return typeof r=="string"}function Lb(r){return typeof r=="number"}function Ld(r){return r!==null&&typeof r=="object"}function so(r){if(Tr.call(r)!=="[object Object]")return!1;var e=Object.getPrototypeOf(r);return e===null||e===Object.prototype}function Bb(r){return Tr.call(r)==="[object Date]"}function qb(r){return Tr.call(r)==="[object File]"}function jb(r){return Tr.call(r)==="[object Blob]"}function Bd(r){return Tr.call(r)==="[object Function]"}function Fb(r){return Ld(r)&&Bd(r.pipe)}function zb(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}function Hb(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function Gb(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Ic(r,e){if(!(r===null||typeof r>"u"))if(typeof r!="object"&&(r=[r]),xc(r))for(var t=0,n=r.length;t<n;t++)e.call(null,r[t],t,r);else for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.call(null,r[i],i,r)}function wc(){var r={};function e(i,o){so(r[o])&&so(i)?r[o]=wc(r[o],i):so(i)?r[o]=wc({},i):xc(i)?r[o]=i.slice():r[o]=i}for(var t=0,n=arguments.length;t<n;t++)Ic(arguments[t],e);return r}function $b(r,e,t){return Ic(e,function(i,o){t&&typeof i=="function"?r[o]=Ob(i,t):r[o]=i}),r}function Vb(r){return r.charCodeAt(0)===65279&&(r=r.slice(1)),r}qd.exports={isArray:xc,isArrayBuffer:Nb,isBuffer:kb,isFormData:Mb,isArrayBufferView:Db,isString:Ub,isNumber:Lb,isObject:Ld,isPlainObject:so,isUndefined:bc,isDate:Bb,isFile:qb,isBlob:jb,isFunction:Bd,isStream:Fb,isURLSearchParams:zb,isStandardBrowserEnv:Gb,forEach:Ic,merge:wc,extend:$b,trim:Hb,stripBOM:Vb}});var co=g((JU,Fd)=>{"use strict";var en=Le();function jd(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Fd.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(en.isURLSearchParams(t))i=t.toString();else{var o=[];en.forEach(t,function(c,u){c===null||typeof c>"u"||(en.isArray(c)?u=u+"[]":c=[c],en.forEach(c,function(p){en.isDate(p)?p=p.toISOString():en.isObject(p)&&(p=JSON.stringify(p)),o.push(jd(u)+"="+jd(p))}))}),i=o.join("&")}if(i){var a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}});var Hd=g((QU,zd)=>{"use strict";var Kb=Le();function uo(){this.handlers=[]}uo.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};uo.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};uo.prototype.forEach=function(e){Kb.forEach(this.handlers,function(n){n!==null&&e(n)})};zd.exports=uo});var $d=g((XU,Gd)=>{"use strict";var Yb=Le();Gd.exports=function(e,t){Yb.forEach(e,function(i,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[o])})}});var lo=g((ZU,Vd)=>{"use strict";Vd.exports=function(e,t,n,i,o){return e.config=t,n&&(e.code=n),e.request=i,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}});var po=g((eL,Kd)=>{"use strict";var Wb=lo();Kd.exports=function(e,t,n,i,o){var a=new Error(e);return Wb(a,t,n,i,o)}});var _c=g((tL,Yd)=>{"use strict";var Jb=po();Yd.exports=function(e,t,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(Jb("Request failed with status code "+n.status,n.config,null,n.request,n))}});var Jd=g((rL,Wd)=>{"use strict";var fo=Le();Wd.exports=fo.isStandardBrowserEnv()?function(){return{write:function(t,n,i,o,a,s){var c=[];c.push(t+"="+encodeURIComponent(n)),fo.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),fo.isString(o)&&c.push("path="+o),fo.isString(a)&&c.push("domain="+a),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(t){var n=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Xd=g((nL,Qd)=>{"use strict";Qd.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}});var ef=g((iL,Zd)=>{"use strict";Zd.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}});var Sc=g((oL,tf)=>{"use strict";var Qb=Xd(),Xb=ef();tf.exports=function(e,t){return e&&!Qb(t)?Xb(e,t):t}});var nf=g((aL,rf)=>{"use strict";var Ac=Le(),Zb=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];rf.exports=function(e){var t={},n,i,o;return e&&Ac.forEach(e.split(`
`),function(s){if(o=s.indexOf(":"),n=Ac.trim(s.substr(0,o)).toLowerCase(),i=Ac.trim(s.substr(o+1)),n){if(t[n]&&Zb.indexOf(n)>=0)return;n==="set-cookie"?t[n]=(t[n]?t[n]:[]).concat([i]):t[n]=t[n]?t[n]+", "+i:i}}),t}});var sf=g((sL,af)=>{"use strict";var of=Le();af.exports=of.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),n;function i(o){var a=o;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(a){var s=of.isString(a)?i(a):a;return s.protocol===n.protocol&&s.host===n.host}}():function(){return function(){return!0}}()});var uf=g((cL,cf)=>{"use strict";var ho=Le(),ew=_c(),tw=Jd(),rw=co(),nw=Sc(),iw=nf(),ow=sf(),Pc=po();cf.exports=function(e){return new Promise(function(n,i){var o=e.data,a=e.headers,s=e.responseType;ho.isFormData(o)&&delete a["Content-Type"];var c=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",l=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.Authorization="Basic "+btoa(u+":"+l)}var p=nw(e.baseURL,e.url);c.open(e.method.toUpperCase(),rw(p,e.params,e.paramsSerializer),!0),c.timeout=e.timeout;function d(){if(!!c){var m="getAllResponseHeaders"in c?iw(c.getAllResponseHeaders()):null,y=!s||s==="text"||s==="json"?c.responseText:c.response,E={data:y,status:c.status,statusText:c.statusText,headers:m,config:e,request:c};ew(n,i,E),c=null}}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){!c||(i(Pc("Request aborted",e,"ECONNABORTED",c)),c=null)},c.onerror=function(){i(Pc("Network Error",e,null,c)),c=null},c.ontimeout=function(){var y="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(y=e.timeoutErrorMessage),i(Pc(y,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",c)),c=null},ho.isStandardBrowserEnv()){var f=(e.withCredentials||ow(p))&&e.xsrfCookieName?tw.read(e.xsrfCookieName):void 0;f&&(a[e.xsrfHeaderName]=f)}"setRequestHeader"in c&&ho.forEach(a,function(y,E){typeof o>"u"&&E.toLowerCase()==="content-type"?delete a[E]:c.setRequestHeader(E,y)}),ho.isUndefined(e.withCredentials)||(c.withCredentials=!!e.withCredentials),s&&s!=="json"&&(c.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&c.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(y){!c||(c.abort(),i(y),c=null)}),o||(o=null),c.send(o)})}});var Rc=g((uL,lf)=>{var tn=1e3,rn=tn*60,nn=rn*60,br=nn*24,aw=br*7,sw=br*365.25;lf.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return cw(r);if(t==="number"&&isFinite(r))return e.long?lw(r):uw(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function cw(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(!!e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*sw;case"weeks":case"week":case"w":return t*aw;case"days":case"day":case"d":return t*br;case"hours":case"hour":case"hrs":case"hr":case"h":return t*nn;case"minutes":case"minute":case"mins":case"min":case"m":return t*rn;case"seconds":case"second":case"secs":case"sec":case"s":return t*tn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function uw(r){var e=Math.abs(r);return e>=br?Math.round(r/br)+"d":e>=nn?Math.round(r/nn)+"h":e>=rn?Math.round(r/rn)+"m":e>=tn?Math.round(r/tn)+"s":r+"ms"}function lw(r){var e=Math.abs(r);return e>=br?mo(r,e,br,"day"):e>=nn?mo(r,e,nn,"hour"):e>=rn?mo(r,e,rn,"minute"):e>=tn?mo(r,e,tn,"second"):r+" ms"}function mo(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Oc=g((lL,pf)=>{function pw(r){t.debug=t,t.default=t,t.coerce=c,t.disable=o,t.enable=i,t.enabled=a,t.humanize=Rc(),t.destroy=u,Object.keys(r).forEach(l=>{t[l]=r[l]}),t.names=[],t.skips=[],t.formatters={};function e(l){let p=0;for(let d=0;d<l.length;d++)p=(p<<5)-p+l.charCodeAt(d),p|=0;return t.colors[Math.abs(p)%t.colors.length]}t.selectColor=e;function t(l){let p,d=null,f,m;function y(...E){if(!y.enabled)return;let S=y,P=Number(new Date),A=P-(p||P);S.diff=A,S.prev=p,S.curr=P,p=P,E[0]=t.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let j=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(we,Et)=>{if(we==="%%")return"%";j++;let ze=t.formatters[Et];if(typeof ze=="function"){let ro=E[j];we=ze.call(S,ro),E.splice(j,1),j--}return we}),t.formatArgs.call(S,E),(S.log||t.log).apply(S,E)}return y.namespace=l,y.useColors=t.useColors(),y.color=t.selectColor(l),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(f!==t.namespaces&&(f=t.namespaces,m=t.enabled(l)),m),set:E=>{d=E}}),typeof t.init=="function"&&t.init(y),y}function n(l,p){let d=t(this.namespace+(typeof p>"u"?":":p)+l);return d.log=this.log,d}function i(l){t.save(l),t.namespaces=l,t.names=[],t.skips=[];let p,d=(typeof l=="string"?l:"").split(/[\s,]+/),f=d.length;for(p=0;p<f;p++)!d[p]||(l=d[p].replace(/\*/g,".*?"),l[0]==="-"?t.skips.push(new RegExp("^"+l.slice(1)+"$")):t.names.push(new RegExp("^"+l+"$")))}function o(){let l=[...t.names.map(s),...t.skips.map(s).map(p=>"-"+p)].join(",");return t.enable(""),l}function a(l){if(l[l.length-1]==="*")return!0;let p,d;for(p=0,d=t.skips.length;p<d;p++)if(t.skips[p].test(l))return!1;for(p=0,d=t.names.length;p<d;p++)if(t.names[p].test(l))return!0;return!1}function s(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}pf.exports=pw});var df=g((He,go)=>{He.formatArgs=fw;He.save=hw;He.load=mw;He.useColors=dw;He.storage=gw();He.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();He.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function dw(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function fw(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+go.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}He.log=console.debug||console.log||(()=>{});function hw(r){try{r?He.storage.setItem("debug",r):He.storage.removeItem("debug")}catch{}}function mw(){let r;try{r=He.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function gw(){try{return localStorage}catch{}}go.exports=Oc()(He);var{formatters:vw}=go.exports;vw.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var hf=g((pL,ff)=>{"use strict";ff.exports=(r,e=process.argv)=>{let t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var vf=g((dL,gf)=>{"use strict";var yw=require("os"),mf=require("tty"),Ze=hf(),{env:xe}=process,Yt;Ze("no-color")||Ze("no-colors")||Ze("color=false")||Ze("color=never")?Yt=0:(Ze("color")||Ze("colors")||Ze("color=true")||Ze("color=always"))&&(Yt=1);"FORCE_COLOR"in xe&&(xe.FORCE_COLOR==="true"?Yt=1:xe.FORCE_COLOR==="false"?Yt=0:Yt=xe.FORCE_COLOR.length===0?1:Math.min(parseInt(xe.FORCE_COLOR,10),3));function kc(r){return r===0?!1:{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3}}function Nc(r,e){if(Yt===0)return 0;if(Ze("color=16m")||Ze("color=full")||Ze("color=truecolor"))return 3;if(Ze("color=256"))return 2;if(r&&!e&&Yt===void 0)return 0;let t=Yt||0;if(xe.TERM==="dumb")return t;if(process.platform==="win32"){let n=yw.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in xe)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in xe)||xe.CI_NAME==="codeship"?1:t;if("TEAMCITY_VERSION"in xe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(xe.TEAMCITY_VERSION)?1:0;if(xe.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in xe){let n=parseInt((xe.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(xe.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(xe.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(xe.TERM)||"COLORTERM"in xe?1:t}function Ew(r){let e=Nc(r,r&&r.isTTY);return kc(e)}gf.exports={supportsColor:Ew,stdout:kc(Nc(!0,mf.isatty(1))),stderr:kc(Nc(!0,mf.isatty(2)))}});var Ef=g((Se,yo)=>{var Cw=require("tty"),vo=require("util");Se.init=Sw;Se.log=xw;Se.formatArgs=bw;Se.save=Iw;Se.load=_w;Se.useColors=Tw;Se.destroy=vo.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Se.colors=[6,2,3,4,5,1];try{let r=vf();r&&(r.stderr||r).level>=2&&(Se.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Se.inspectOpts=Object.keys(process.env).filter(r=>/^debug_/i.test(r)).reduce((r,e)=>{let t=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),r[t]=n,r},{});function Tw(){return"colors"in Se.inspectOpts?Boolean(Se.inspectOpts.colors):Cw.isatty(process.stderr.fd)}function bw(r){let{namespace:e,useColors:t}=this;if(t){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;r[0]=o+r[0].split(`
`).join(`
`+o),r.push(i+"m+"+yo.exports.humanize(this.diff)+"\x1B[0m")}else r[0]=ww()+e+" "+r[0]}function ww(){return Se.inspectOpts.hideDate?"":new Date().toISOString()+" "}function xw(...r){return process.stderr.write(vo.format(...r)+`
`)}function Iw(r){r?process.env.DEBUG=r:delete process.env.DEBUG}function _w(){return process.env.DEBUG}function Sw(r){r.inspectOpts={};let e=Object.keys(Se.inspectOpts);for(let t=0;t<e.length;t++)r.inspectOpts[e[t]]=Se.inspectOpts[e[t]]}yo.exports=Oc()(Se);var{formatters:yf}=yo.exports;yf.o=function(r){return this.inspectOpts.colors=this.useColors,vo.inspect(r,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};yf.O=function(r){return this.inspectOpts.colors=this.useColors,vo.inspect(r,this.inspectOpts)}});var on=g((fL,Mc)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Mc.exports=df():Mc.exports=Ef()});var Tf=g((hL,Cf)=>{var Qn;Cf.exports=function(){if(!Qn){try{Qn=on()("follow-redirects")}catch{}typeof Qn!="function"&&(Qn=function(){})}Qn.apply(null,arguments)}});var jc=g((mL,qc)=>{var wr=require("url"),Dc=wr.URL,Aw=require("http"),Pw=require("https"),xf=require("stream").Writable,Rw=require("assert"),If=Tf(),Lc=["abort","aborted","connect","error","socket","timeout"],Bc=Object.create(null);Lc.forEach(function(r){Bc[r]=function(e,t,n){this._redirectable.emit(r,e,t,n)}});var bf=Eo("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),Ow=Eo("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),kw=Eo("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),Nw=Eo("ERR_STREAM_WRITE_AFTER_END","write after end");function Ge(r,e){xf.call(this),this._sanitizeOptions(r),this._options=r,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var t=this;this._onNativeResponse=function(n){t._processResponse(n)},this._performRequest()}Ge.prototype=Object.create(xf.prototype);Ge.prototype.abort=function(){Sf(this._currentRequest),this.emit("abort")};Ge.prototype.write=function(r,e,t){if(this._ending)throw new Nw;if(!(typeof r=="string"||typeof r=="object"&&"length"in r))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(t=e,e=null),r.length===0){t&&t();return}this._requestBodyLength+r.length<=this._options.maxBodyLength?(this._requestBodyLength+=r.length,this._requestBodyBuffers.push({data:r,encoding:e}),this._currentRequest.write(r,e,t)):(this.emit("error",new kw),this.abort())};Ge.prototype.end=function(r,e,t){if(typeof r=="function"?(t=r,r=e=null):typeof e=="function"&&(t=e,e=null),!r)this._ended=this._ending=!0,this._currentRequest.end(null,null,t);else{var n=this,i=this._currentRequest;this.write(r,e,function(){n._ended=!0,i.end(null,null,t)}),this._ending=!0}};Ge.prototype.setHeader=function(r,e){this._options.headers[r]=e,this._currentRequest.setHeader(r,e)};Ge.prototype.removeHeader=function(r){delete this._options.headers[r],this._currentRequest.removeHeader(r)};Ge.prototype.setTimeout=function(r,e){var t=this;function n(a){a.setTimeout(r),a.removeListener("timeout",a.destroy),a.addListener("timeout",a.destroy)}function i(a){t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.emit("timeout"),o()},r),n(a)}function o(){t._timeout&&(clearTimeout(t._timeout),t._timeout=null),t.removeListener("abort",o),t.removeListener("error",o),t.removeListener("response",o),e&&t.removeListener("timeout",e),t.socket||t._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",o),this.on("error",o),this.on("response",o),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(r){Ge.prototype[r]=function(e,t){return this._currentRequest[r](e,t)}});["aborted","connection","socket"].forEach(function(r){Object.defineProperty(Ge.prototype,r,{get:function(){return this._currentRequest[r]}})});Ge.prototype._sanitizeOptions=function(r){if(r.headers||(r.headers={}),r.host&&(r.hostname||(r.hostname=r.host),delete r.host),!r.pathname&&r.path){var e=r.path.indexOf("?");e<0?r.pathname=r.path:(r.pathname=r.path.substring(0,e),r.search=r.path.substring(e))}};Ge.prototype._performRequest=function(){var r=this._options.protocol,e=this._options.nativeProtocols[r];if(!e){this.emit("error",new TypeError("Unsupported protocol "+r));return}if(this._options.agents){var t=r.slice(0,-1);this._options.agent=this._options.agents[t]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);n._redirectable=this;for(var i of Lc)n.on(i,Bc[i]);if(this._currentUrl=/^\//.test(this._options.path)?wr.format(this._options):this._currentUrl=this._options.path,this._isRedirect){var o=0,a=this,s=this._requestBodyBuffers;(function c(u){if(n===a._currentRequest)if(u)a.emit("error",u);else if(o<s.length){var l=s[o++];n.finished||n.write(l.data,l.encoding,c)}else a._ended&&n.end()})()}};Ge.prototype._processResponse=function(r){var e=r.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:r.headers,statusCode:e});var t=r.headers.location;if(!t||this._options.followRedirects===!1||e<300||e>=400){r.responseUrl=this._currentUrl,r.redirects=this._redirects,this.emit("response",r),this._requestBodyBuffers=[];return}if(Sf(this._currentRequest),r.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new Ow);return}var n,i=this._options.beforeRedirect;i&&(n=Object.assign({Host:r.req.getHeader("host")},this._options.headers));var o=this._options.method;((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],Uc(/^content-/i,this._options.headers));var a=Uc(/^host$/i,this._options.headers),s=wr.parse(this._currentUrl),c=a||s.host,u=/^\w+:/.test(t)?this._currentUrl:wr.format(Object.assign(s,{host:c})),l;try{l=wr.resolve(u,t)}catch(m){this.emit("error",new bf(m));return}If("redirecting to",l),this._isRedirect=!0;var p=wr.parse(l);if(Object.assign(this._options,p),(p.protocol!==s.protocol&&p.protocol!=="https:"||p.host!==c&&!Dw(p.host,c))&&Uc(/^(?:authorization|cookie)$/i,this._options.headers),typeof i=="function"){var d={headers:r.headers,statusCode:e},f={url:u,method:o,headers:n};try{i(this._options,d,f)}catch(m){this.emit("error",m);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(m){this.emit("error",new bf(m))}};function _f(r){var e={maxRedirects:21,maxBodyLength:10485760},t={};return Object.keys(r).forEach(function(n){var i=n+":",o=t[i]=r[n],a=e[n]=Object.create(o);function s(u,l,p){if(typeof u=="string"){var d=u;try{u=wf(new Dc(d))}catch{u=wr.parse(d)}}else Dc&&u instanceof Dc?u=wf(u):(p=l,l=u,u={protocol:i});return typeof l=="function"&&(p=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,l),l.nativeProtocols=t,Rw.equal(l.protocol,i,"protocol mismatch"),If("options",l),new Ge(l,p)}function c(u,l,p){var d=a.request(u,l,p);return d.end(),d}Object.defineProperties(a,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function Mw(){}function wf(r){var e={protocol:r.protocol,hostname:r.hostname.startsWith("[")?r.hostname.slice(1,-1):r.hostname,hash:r.hash,search:r.search,pathname:r.pathname,path:r.pathname+r.search,href:r.href};return r.port!==""&&(e.port=Number(r.port)),e}function Uc(r,e){var t;for(var n in e)r.test(n)&&(t=e[n],delete e[n]);return t===null||typeof t>"u"?void 0:String(t).trim()}function Eo(r,e){function t(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return t.prototype=new Error,t.prototype.constructor=t,t.prototype.name="Error ["+r+"]",t.prototype.code=r,t}function Sf(r){for(var e of Lc)r.removeListener(e,Bc[e]);r.on("error",Mw),r.abort()}function Dw(r,e){let t=r.length-e.length-1;return t>0&&r[t]==="."&&r.endsWith(e)}qc.exports=_f({http:Aw,https:Pw});qc.exports.wrap=_f});var Fc=g((gL,Uw)=>{Uw.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}});var Nf=g((vL,kf)=>{"use strict";var Xn=Le(),Af=_c(),Lw=Sc(),Bw=co(),qw=require("http"),jw=require("https"),Fw=jc().http,zw=jc().https,Pf=require("url"),Hw=require("zlib"),Gw=Fc(),Co=po(),zc=lo(),Rf=/https:?/;function Of(r,e,t){if(r.hostname=e.host,r.host=e.host,r.port=e.port,r.path=t,e.auth){var n=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");r.headers["Proxy-Authorization"]="Basic "+n}r.beforeRedirect=function(o){o.headers.host=o.host,Of(o,e,o.href)}}kf.exports=function(e){return new Promise(function(n,i){var o=function(ne){n(ne)},a=function(ne){i(ne)},s=e.data,c=e.headers;if("User-Agent"in c||"user-agent"in c?!c["User-Agent"]&&!c["user-agent"]&&(delete c["User-Agent"],delete c["user-agent"]):c["User-Agent"]="axios/"+Gw.version,s&&!Xn.isStream(s)){if(!Buffer.isBuffer(s))if(Xn.isArrayBuffer(s))s=Buffer.from(new Uint8Array(s));else if(Xn.isString(s))s=Buffer.from(s,"utf-8");else return a(Co("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",e));c["Content-Length"]=s.length}var u=void 0;if(e.auth){var l=e.auth.username||"",p=e.auth.password||"";u=l+":"+p}var d=Lw(e.baseURL,e.url),f=Pf.parse(d),m=f.protocol||"http:";if(!u&&f.auth){var y=f.auth.split(":"),E=y[0]||"",S=y[1]||"";u=E+":"+S}u&&delete c.Authorization;var P=Rf.test(m),A=P?e.httpsAgent:e.httpAgent,j={path:Bw(f.path,e.params,e.paramsSerializer).replace(/^\?/,""),method:e.method.toUpperCase(),headers:c,agent:A,agents:{http:e.httpAgent,https:e.httpsAgent},auth:u};e.socketPath?j.socketPath=e.socketPath:(j.hostname=f.hostname,j.port=f.port);var ce=e.proxy;if(!ce&&ce!==!1){var we=m.slice(0,-1)+"_proxy",Et=process.env[we]||process.env[we.toUpperCase()];if(Et){var ze=Pf.parse(Et),ro=process.env.no_proxy||process.env.NO_PROXY,Ad=!0;if(ro){var wb=ro.split(",").map(function(ne){return ne.trim()});Ad=!wb.some(function(ne){return ne?ne==="*"||ne[0]==="."&&f.hostname.substr(f.hostname.length-ne.length)===ne?!0:f.hostname===ne:!1})}if(Ad&&(ce={host:ze.hostname,port:ze.port,protocol:ze.protocol},ze.auth)){var Pd=ze.auth.split(":");ce.auth={username:Pd[0],password:Pd[1]}}}}ce&&(j.headers.host=f.hostname+(f.port?":"+f.port:""),Of(j,ce,m+"//"+f.hostname+(f.port?":"+f.port:"")+j.path));var no,Rd=P&&(ce?Rf.test(ce.protocol):!0);e.transport?no=e.transport:e.maxRedirects===0?no=Rd?jw:qw:(e.maxRedirects&&(j.maxRedirects=e.maxRedirects),no=Rd?zw:Fw),e.maxBodyLength>-1&&(j.maxBodyLength=e.maxBodyLength);var Ue=no.request(j,function(ne){if(!Ue.aborted){var Cr=ne,io=ne.req||Ue;if(ne.statusCode!==204&&io.method!=="HEAD"&&e.decompress!==!1)switch(ne.headers["content-encoding"]){case"gzip":case"compress":case"deflate":Cr=Cr.pipe(Hw.createUnzip()),delete ne.headers["content-encoding"];break}var oo={status:ne.statusCode,statusText:ne.statusMessage,headers:ne.headers,config:e,request:io};if(e.responseType==="stream")oo.data=Cr,Af(o,a,oo);else{var Od=[],kd=0;Cr.on("data",function(Ct){Od.push(Ct),kd+=Ct.length,e.maxContentLength>-1&&kd>e.maxContentLength&&(Cr.destroy(),a(Co("maxContentLength size of "+e.maxContentLength+" exceeded",e,null,io)))}),Cr.on("error",function(Ct){Ue.aborted||a(zc(Ct,e,null,io))}),Cr.on("end",function(){var Ct=Buffer.concat(Od);e.responseType!=="arraybuffer"&&(Ct=Ct.toString(e.responseEncoding),(!e.responseEncoding||e.responseEncoding==="utf8")&&(Ct=Xn.stripBOM(Ct))),oo.data=Ct,Af(o,a,oo)})}}});if(Ue.on("error",function(ne){Ue.aborted&&ne.code!=="ERR_FR_TOO_MANY_REDIRECTS"||a(zc(ne,e,null,Ue))}),e.timeout){var Cc=parseInt(e.timeout,10);if(isNaN(Cc)){a(Co("error trying to parse `config.timeout` to int",e,"ERR_PARSE_TIMEOUT",Ue));return}Ue.setTimeout(Cc,function(){Ue.abort(),a(Co("timeout of "+Cc+"ms exceeded",e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",Ue))})}e.cancelToken&&e.cancelToken.promise.then(function(ne){Ue.aborted||(Ue.abort(),a(ne))}),Xn.isStream(s)?s.on("error",function(ne){a(zc(ne,e,null,Ue))}).pipe(Ue):Ue.end(s)})}});var bo=g((yL,Uf)=>{"use strict";var Ae=Le(),Mf=$d(),$w=lo(),Vw={"Content-Type":"application/x-www-form-urlencoded"};function Df(r,e){!Ae.isUndefined(r)&&Ae.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function Kw(){var r;return typeof XMLHttpRequest<"u"?r=uf():typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]"&&(r=Nf()),r}function Yw(r,e,t){if(Ae.isString(r))try{return(e||JSON.parse)(r),Ae.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var To={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Kw(),transformRequest:[function(e,t){return Mf(t,"Accept"),Mf(t,"Content-Type"),Ae.isFormData(e)||Ae.isArrayBuffer(e)||Ae.isBuffer(e)||Ae.isStream(e)||Ae.isFile(e)||Ae.isBlob(e)?e:Ae.isArrayBufferView(e)?e.buffer:Ae.isURLSearchParams(e)?(Df(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ae.isObject(e)||t&&t["Content-Type"]==="application/json"?(Df(t,"application/json"),Yw(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&this.responseType==="json";if(o||i&&Ae.isString(e)&&e.length)try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?$w(a,this,"E_JSON_PARSE"):a}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};To.headers={common:{Accept:"application/json, text/plain, */*"}};Ae.forEach(["delete","get","head"],function(e){To.headers[e]={}});Ae.forEach(["post","put","patch"],function(e){To.headers[e]=Ae.merge(Vw)});Uf.exports=To});var Bf=g((EL,Lf)=>{"use strict";var Ww=Le(),Jw=bo();Lf.exports=function(e,t,n){var i=this||Jw;return Ww.forEach(n,function(a){e=a.call(i,e,t)}),e}});var Hc=g((CL,qf)=>{"use strict";qf.exports=function(e){return!!(e&&e.__CANCEL__)}});var zf=g((TL,Ff)=>{"use strict";var jf=Le(),Gc=Bf(),Qw=Hc(),Xw=bo();function $c(r){r.cancelToken&&r.cancelToken.throwIfRequested()}Ff.exports=function(e){$c(e),e.headers=e.headers||{},e.data=Gc.call(e,e.data,e.headers,e.transformRequest),e.headers=jf.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),jf.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var t=e.adapter||Xw.adapter;return t(e).then(function(i){return $c(e),i.data=Gc.call(e,i.data,i.headers,e.transformResponse),i},function(i){return Qw(i)||($c(e),i&&i.response&&(i.response.data=Gc.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})}});var Vc=g((bL,Hf)=>{"use strict";var Me=Le();Hf.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function c(d,f){return Me.isPlainObject(d)&&Me.isPlainObject(f)?Me.merge(d,f):Me.isPlainObject(f)?Me.merge({},f):Me.isArray(f)?f.slice():f}function u(d){Me.isUndefined(t[d])?Me.isUndefined(e[d])||(n[d]=c(void 0,e[d])):n[d]=c(e[d],t[d])}Me.forEach(i,function(f){Me.isUndefined(t[f])||(n[f]=c(void 0,t[f]))}),Me.forEach(o,u),Me.forEach(a,function(f){Me.isUndefined(t[f])?Me.isUndefined(e[f])||(n[f]=c(void 0,e[f])):n[f]=c(void 0,t[f])}),Me.forEach(s,function(f){f in t?n[f]=c(e[f],t[f]):f in e&&(n[f]=c(void 0,e[f]))});var l=i.concat(o).concat(a).concat(s),p=Object.keys(e).concat(Object.keys(t)).filter(function(f){return l.indexOf(f)===-1});return Me.forEach(p,u),n}});var Yf=g((wL,Kf)=>{"use strict";var $f=Fc(),Kc={};["object","boolean","number","function","string","symbol"].forEach(function(r,e){Kc[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Gf={},Zw=$f.version.split(".");function Vf(r,e){for(var t=e?e.split("."):Zw,n=r.split("."),i=0;i<3;i++){if(t[i]>n[i])return!0;if(t[i]<n[i])return!1}return!1}Kc.transitional=function(e,t,n){var i=t&&Vf(t);function o(a,s){return"[Axios v"+$f.version+"] Transitional option '"+a+"'"+s+(n?". "+n:"")}return function(a,s,c){if(e===!1)throw new Error(o(s," has been removed in "+t));return i&&!Gf[s]&&(Gf[s]=!0,console.warn(o(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,s,c):!0}};function ex(r,e,t){if(typeof r!="object")throw new TypeError("options must be an object");for(var n=Object.keys(r),i=n.length;i-- >0;){var o=n[i],a=e[o];if(a){var s=r[o],c=s===void 0||a(s,o,r);if(c!==!0)throw new TypeError("option "+o+" must be "+c);continue}if(t!==!0)throw Error("Unknown option "+o)}}Kf.exports={isOlderVersion:Vf,assertOptions:ex,validators:Kc}});var eh=g((xL,Zf)=>{"use strict";var Qf=Le(),tx=co(),Wf=Hd(),Jf=zf(),wo=Vc(),Xf=Yf(),an=Xf.validators;function Zn(r){this.defaults=r,this.interceptors={request:new Wf,response:new Wf}}Zn.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=wo(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;t!==void 0&&Xf.assertOptions(t,{silentJSONParsing:an.transitional(an.boolean,"1.0.0"),forcedJSONParsing:an.transitional(an.boolean,"1.0.0"),clarifyTimeoutError:an.transitional(an.boolean,"1.0.0")},!1);var n=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(e)===!1||(i=i&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!i){var s=[Jf,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(o),a=Promise.resolve(e);s.length;)a=a.then(s.shift(),s.shift());return a}for(var c=e;n.length;){var u=n.shift(),l=n.shift();try{c=u(c)}catch(p){l(p);break}}try{a=Jf(c)}catch(p){return Promise.reject(p)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};Zn.prototype.getUri=function(e){return e=wo(this.defaults,e),tx(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Qf.forEach(["delete","get","head","options"],function(e){Zn.prototype[e]=function(t,n){return this.request(wo(n||{},{method:e,url:t,data:(n||{}).data}))}});Qf.forEach(["post","put","patch"],function(e){Zn.prototype[e]=function(t,n,i){return this.request(wo(i||{},{method:e,url:t,data:n}))}});Zf.exports=Zn});var Wc=g((IL,th)=>{"use strict";function Yc(r){this.message=r}Yc.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Yc.prototype.__CANCEL__=!0;th.exports=Yc});var nh=g((_L,rh)=>{"use strict";var rx=Wc();function xo(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var t=this;r(function(i){t.reason||(t.reason=new rx(i),e(t.reason))})}xo.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};xo.source=function(){var e,t=new xo(function(i){e=i});return{token:t,cancel:e}};rh.exports=xo});var oh=g((SL,ih)=>{"use strict";ih.exports=function(e){return function(n){return e.apply(null,n)}}});var sh=g((AL,ah)=>{"use strict";ah.exports=function(e){return typeof e=="object"&&e.isAxiosError===!0}});var lh=g((PL,Jc)=>{"use strict";var ch=Le(),nx=Tc(),Io=eh(),ix=Vc(),ox=bo();function uh(r){var e=new Io(r),t=nx(Io.prototype.request,e);return ch.extend(t,Io.prototype,e),ch.extend(t,e),t}var nt=uh(ox);nt.Axios=Io;nt.create=function(e){return uh(ix(nt.defaults,e))};nt.Cancel=Wc();nt.CancelToken=nh();nt.isCancel=Hc();nt.all=function(e){return Promise.all(e)};nt.spread=oh();nt.isAxiosError=sh();Jc.exports=nt;Jc.exports.default=nt});var _o=g((RL,ph)=>{ph.exports=lh()});var mh=g(sn=>{"use strict";var OL=require("net"),ax=require("tls"),Qc=require("http"),dh=require("https"),sx=require("events"),cx=require("assert"),ux=require("util");sn.httpOverHttp=lx;sn.httpsOverHttp=px;sn.httpOverHttps=dx;sn.httpsOverHttps=fx;function lx(r){var e=new Lt(r);return e.request=Qc.request,e}function px(r){var e=new Lt(r);return e.request=Qc.request,e.createSocket=fh,e}function dx(r){var e=new Lt(r);return e.request=dh.request,e}function fx(r){var e=new Lt(r);return e.request=dh.request,e.createSocket=fh,e}function Lt(r){var e=this;e.options=r||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||Qc.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,i,o){for(var a=0,s=e.requests.length;a<s;++a){var c=e.requests[a];if(c.host===i&&c.port===o){e.requests.splice(a,1),c.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}ux.inherits(Lt,sx.EventEmitter);Lt.prototype.addRequest=function(e,t,n){var i=this;if(i.sockets.length>=this.maxSockets){i.requests.push({host:t,port:n,request:e});return}i.createSocket({host:t,port:n,request:e},function(o){o.on("free",a),o.on("close",s),o.on("agentRemove",s),e.onSocket(o);function a(){i.emit("free",o,t,n)}function s(c){i.removeSocket(o),o.removeListener("free",a),o.removeListener("close",s),o.removeListener("agentRemove",s)}})};Lt.prototype.createSocket=function(e,t){var n=this,i={};n.sockets.push(i);var o=hh({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});o.proxyAuth&&(o.headers=o.headers||{},o.headers["Proxy-Authorization"]="Basic "+new Buffer(o.proxyAuth).toString("base64")),xr("making CONNECT request");var a=n.request(o);a.useChunkedEncodingByDefault=!1,a.once("response",s),a.once("upgrade",c),a.once("connect",u),a.once("error",l),a.end();function s(p){p.upgrade=!0}function c(p,d,f){process.nextTick(function(){u(p,d,f)})}function u(p,d,f){if(a.removeAllListeners(),d.removeAllListeners(),p.statusCode===200)cx.equal(f.length,0),xr("tunneling connection has established"),n.sockets[n.sockets.indexOf(i)]=d,t(d);else{xr("tunneling socket could not be established, statusCode=%d",p.statusCode);var m=new Error("tunneling socket could not be established, sutatusCode="+p.statusCode);m.code="ECONNRESET",e.request.emit("error",m),n.removeSocket(i)}}function l(p){a.removeAllListeners(),xr(`tunneling socket could not be established, cause=%s
`,p.message,p.stack);var d=new Error("tunneling socket could not be established, cause="+p.message);d.code="ECONNRESET",e.request.emit("error",d),n.removeSocket(i)}};Lt.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(t!==-1){this.sockets.splice(t,1);var n=this.requests.shift();n&&this.createSocket(n,function(i){n.request.onSocket(i)})}};function fh(r,e){var t=this;Lt.prototype.createSocket.call(t,r,function(n){var i=r.request.getHeader("host"),o=hh({},t.options,{socket:n,servername:i?i.replace(/:.*$/,""):r.host}),a=ax.connect(0,o);t.sockets[t.sockets.indexOf(n)]=a,e(a)})}function hh(r){for(var e=1,t=arguments.length;e<t;++e){var n=arguments[e];if(typeof n=="object")for(var i=Object.keys(n),o=0,a=i.length;o<a;++o){var s=i[o];n[s]!==void 0&&(r[s]=n[s])}}return r}var xr;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?xr=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:xr=function(){};sn.debug=xr});var vh=g((NL,gh)=>{gh.exports=mh()});var Ch=g((ML,Eh)=>{var hx=require("https"),yh=vh(),mx=require("url");Eh.exports=function(r){r=r||{};var e=process.env.https_proxy||process.env.HTTPS_PROXY,t=e?mx.parse(e):{},n=new hx.Agent(r);if(t.hostname&&t.protocol){var i=t.protocol==="https:"?yh.httpsOverHttps:yh.httpsOverHttp;r.proxy={host:t.hostname,port:t.port},n=i(r)}return n}});var su=g(h=>{"use strict";"use strict";Object.defineProperty(h,"__esModule",{value:!0});var Xc=function(r,e){return Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Xc(r,e)};function Re(r,e){Xc(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var me=function(){return me=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},me.apply(this,arguments)};function M(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(p){a(p)}}function c(l){try{u(n.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})}function D(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ko(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}var T={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token"},ou=[T.OPENID_SCOPE,T.PROFILE_SCOPE,T.OFFLINE_ACCESS_SCOPE],Th=ko(ou,[T.EMAIL_SCOPE]),Ve;(function(r){r.CONTENT_TYPE="Content-Type",r.RETRY_AFTER="Retry-After",r.CCS_HEADER="X-AnchorMailbox",r.WWWAuthenticate="WWW-Authenticate",r.AuthenticationInfo="Authentication-Info"})(Ve||(Ve={}));h.PersistentCacheKeys=void 0;(function(r){r.ID_TOKEN="idtoken",r.CLIENT_INFO="client.info",r.ADAL_ID_TOKEN="adal.idtoken",r.ERROR="error",r.ERROR_DESC="error.description",r.ACTIVE_ACCOUNT="active-account"})(h.PersistentCacheKeys||(h.PersistentCacheKeys={}));var So;(function(r){r.COMMON="common",r.ORGANIZATIONS="organizations",r.CONSUMERS="consumers"})(So||(So={}));var z;(function(r){r.CLIENT_ID="client_id",r.REDIRECT_URI="redirect_uri",r.RESPONSE_TYPE="response_type",r.RESPONSE_MODE="response_mode",r.GRANT_TYPE="grant_type",r.CLAIMS="claims",r.SCOPE="scope",r.ERROR="error",r.ERROR_DESCRIPTION="error_description",r.ACCESS_TOKEN="access_token",r.ID_TOKEN="id_token",r.REFRESH_TOKEN="refresh_token",r.EXPIRES_IN="expires_in",r.STATE="state",r.NONCE="nonce",r.PROMPT="prompt",r.SESSION_STATE="session_state",r.CLIENT_INFO="client_info",r.CODE="code",r.CODE_CHALLENGE="code_challenge",r.CODE_CHALLENGE_METHOD="code_challenge_method",r.CODE_VERIFIER="code_verifier",r.CLIENT_REQUEST_ID="client-request-id",r.X_CLIENT_SKU="x-client-SKU",r.X_CLIENT_VER="x-client-VER",r.X_CLIENT_OS="x-client-OS",r.X_CLIENT_CPU="x-client-CPU",r.X_CLIENT_CURR_TELEM="x-client-current-telemetry",r.X_CLIENT_LAST_TELEM="x-client-last-telemetry",r.X_MS_LIB_CAPABILITY="x-ms-lib-capability",r.X_APP_NAME="x-app-name",r.X_APP_VER="x-app-ver",r.POST_LOGOUT_URI="post_logout_redirect_uri",r.ID_TOKEN_HINT="id_token_hint",r.DEVICE_CODE="device_code",r.CLIENT_SECRET="client_secret",r.CLIENT_ASSERTION="client_assertion",r.CLIENT_ASSERTION_TYPE="client_assertion_type",r.TOKEN_TYPE="token_type",r.REQ_CNF="req_cnf",r.OBO_ASSERTION="assertion",r.REQUESTED_TOKEN_USE="requested_token_use",r.ON_BEHALF_OF="on_behalf_of",r.FOCI="foci",r.CCS_HEADER="X-AnchorMailbox",r.RETURN_SPA_CODE="return_spa_code",r.NATIVE_BROKER="nativebroker",r.LOGOUT_HINT="logout_hint"})(z||(z={}));var cn;(function(r){r.ACCESS_TOKEN="access_token",r.XMS_CC="xms_cc"})(cn||(cn={}));var ln={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create"},Pr;(function(r){r.ACCOUNT="account",r.SID="sid",r.LOGIN_HINT="login_hint",r.ID_TOKEN="id_token",r.DOMAIN_HINT="domain_hint",r.ORGANIZATIONS="organizations",r.CONSUMERS="consumers",r.ACCOUNT_ID="accountIdentifier",r.HOMEACCOUNT_ID="homeAccountIdentifier"})(Pr||(Pr={}));Pr.SID,Pr.LOGIN_HINT;var bh={PLAIN:"plain",S256:"S256"};h.ResponseMode=void 0;(function(r){r.QUERY="query",r.FRAGMENT="fragment",r.FORM_POST="form_post"})(h.ResponseMode||(h.ResponseMode={}));var Jt;(function(r){r.IMPLICIT_GRANT="implicit",r.AUTHORIZATION_CODE_GRANT="authorization_code",r.CLIENT_CREDENTIALS_GRANT="client_credentials",r.RESOURCE_OWNER_PASSWORD_GRANT="password",r.REFRESH_TOKEN_GRANT="refresh_token",r.DEVICE_CODE_GRANT="device_code",r.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"})(Jt||(Jt={}));h.CacheAccountType=void 0;(function(r){r.MSSTS_ACCOUNT_TYPE="MSSTS",r.ADFS_ACCOUNT_TYPE="ADFS",r.MSAV1_ACCOUNT_TYPE="MSA",r.GENERIC_ACCOUNT_TYPE="Generic"})(h.CacheAccountType||(h.CacheAccountType={}));var Ke;(function(r){r.CACHE_KEY_SEPARATOR="-",r.CLIENT_INFO_SEPARATOR="."})(Ke||(Ke={}));h.CredentialType=void 0;(function(r){r.ID_TOKEN="IdToken",r.ACCESS_TOKEN="AccessToken",r.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",r.REFRESH_TOKEN="RefreshToken"})(h.CredentialType||(h.CredentialType={}));h.CacheSchemaType=void 0;(function(r){r.ACCOUNT="Account",r.CREDENTIAL="Credential",r.ID_TOKEN="IdToken",r.ACCESS_TOKEN="AccessToken",r.REFRESH_TOKEN="RefreshToken",r.APP_METADATA="AppMetadata",r.TEMPORARY="TempCache",r.TELEMETRY="Telemetry",r.UNDEFINED="Undefined",r.THROTTLING="Throttling"})(h.CacheSchemaType||(h.CacheSchemaType={}));h.CacheType=void 0;(function(r){r[r.ADFS=1001]="ADFS",r[r.MSA=1002]="MSA",r[r.MSSTS=1003]="MSSTS",r[r.GENERIC=1004]="GENERIC",r[r.ACCESS_TOKEN=2001]="ACCESS_TOKEN",r[r.REFRESH_TOKEN=2002]="REFRESH_TOKEN",r[r.ID_TOKEN=2003]="ID_TOKEN",r[r.APP_METADATA=3001]="APP_METADATA",r[r.UNDEFINED=9999]="UNDEFINED"})(h.CacheType||(h.CacheType={}));var Zc="appmetadata",gx="client_info",Ao="1",ei={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},wt;(function(r){r.CONFIG="config",r.CACHE="cache",r.NETWORK="network"})(wt||(wt={}));var Pe={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};h.AuthenticationScheme=void 0;(function(r){r.BEARER="Bearer",r.POP="pop",r.SSH="ssh-cert"})(h.AuthenticationScheme||(h.AuthenticationScheme={}));var ti={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},wh={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},Po;(function(r){r.username="username",r.password="password"})(Po||(Po={}));var un;(function(r){r[r.httpSuccess=200]="httpSuccess",r[r.httpBadRequest=400]="httpBadRequest"})(un||(un={}));var Wt;(function(r){r.FAILED_AUTO_DETECTION="1",r.INTERNAL_CACHE="2",r.ENVIRONMENT_VARIABLE="3",r.IMDS="4"})(Wt||(Wt={}));var _r;(function(r){r.CONFIGURED_MATCHES_DETECTED="1",r.CONFIGURED_NO_AUTO_DETECTION="2",r.CONFIGURED_NOT_DETECTED="3",r.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",r.AUTO_DETECTION_REQUESTED_FAILED="5"})(_r||(_r={}));var it;(function(r){r.NO_CACHE_HIT="0",r.FORCE_REFRESH="1",r.NO_CACHED_ACCESS_TOKEN="2",r.CACHED_ACCESS_TOKEN_EXPIRED="3",r.REFRESH_CACHED_ACCESS_TOKEN="4"})(it||(it={}));var eu={unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."}},V=function(r){Re(e,r);function e(t,n,i){var o=this,a=n?t+": "+n:t;return o=r.call(this,a)||this,Object.setPrototypeOf(o,e.prototype),o.errorCode=t||T.EMPTY_STRING,o.errorMessage=n||T.EMPTY_STRING,o.subError=i||T.EMPTY_STRING,o.name="AuthError",o}return e.prototype.setCorrelationId=function(t){this.correlationId=t},e.createUnexpectedError=function(t){return new e(eu.unexpectedError.code,eu.unexpectedError.desc+": "+t)},e}(Error),tu={createNewGuid:function(){var r="Crypto interface - createNewGuid() has not been implemented";throw V.createUnexpectedError(r)},base64Decode:function(){var r="Crypto interface - base64Decode() has not been implemented";throw V.createUnexpectedError(r)},base64Encode:function(){var r="Crypto interface - base64Encode() has not been implemented";throw V.createUnexpectedError(r)},generatePkceCodes:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - generatePkceCodes() has not been implemented",V.createUnexpectedError(r)})})},getPublicKeyThumbprint:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - getPublicKeyThumbprint() has not been implemented",V.createUnexpectedError(r)})})},removeTokenBindingKey:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - removeTokenBindingKey() has not been implemented",V.createUnexpectedError(r)})})},clearKeystore:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - clearKeystore() has not been implemented",V.createUnexpectedError(r)})})},signJwt:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - signJwt() has not been implemented",V.createUnexpectedError(r)})})},hashString:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Crypto interface - hashString() has not been implemented",V.createUnexpectedError(r)})})}},I={clientInfoDecodingError:{code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},clientInfoEmptyError:{code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},tokenParsingError:{code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},nullOrEmptyToken:{code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},endpointResolutionError:{code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},networkError:{code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},unableToGetOpenidConfigError:{code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},hashNotDeserialized:{code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},blankGuidGenerated:{code:"blank_guid_generated",desc:"The guid generated was blank. Please review the trace to determine the root cause."},invalidStateError:{code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},stateMismatchError:{code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},stateNotFoundError:{code:"state_not_found",desc:"State not found"},nonceMismatchError:{code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},nonceNotFoundError:{code:"nonce_not_found",desc:"nonce not found"},noTokensFoundError:{code:"no_tokens_found",desc:"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken()."},multipleMatchingTokens:{code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account."},multipleMatchingAccounts:{code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},multipleMatchingAppMetadata:{code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},tokenRequestCannotBeMade:{code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},appendEmptyScopeError:{code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},removeEmptyScopeError:{code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},appendScopeSetError:{code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},emptyInputScopeSetError:{code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},DeviceCodePollingCancelled:{code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},DeviceCodeExpired:{code:"device_code_expired",desc:"Device code is expired."},DeviceCodeUnknownError:{code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},NoAccountInSilentRequest:{code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},invalidCacheRecord:{code:"invalid_cache_record",desc:"Cache record object was null or undefined."},invalidCacheEnvironment:{code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},noAccountFound:{code:"no_account_found",desc:"No account found in cache for given key."},CachePluginError:{code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},noCryptoObj:{code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},unexpectedAccountType:{code:"unexpected_account_type",desc:"Unexpected account type."},unexpectedCredentialType:{code:"unexpected_credential_type",desc:"Unexpected credential type."},invalidAssertion:{code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},invalidClientCredential:{code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},tokenRefreshRequired:{code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},userTimeoutReached:{code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},tokenClaimsRequired:{code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},noAuthorizationCodeFromServer:{code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},noAzureRegionDetected:{code:"no_azure_region_detected",desc:"No azure region was detected and no fallback was made available"},accessTokenEntityNullError:{code:"access_token_entity_null",desc:"Access token entity is null, please check logs and cache to ensure a valid access token is present."},bindingKeyNotRemovedError:{code:"binding_key_not_removed",desc:"Could not remove the credential's binding key from storage."},logoutNotSupported:{code:"end_session_endpoint_not_supported",desc:"Provided authority does not support logout."}},O=function(r){Re(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,e.prototype),i}return e.createClientInfoDecodingError=function(t){return new e(I.clientInfoDecodingError.code,I.clientInfoDecodingError.desc+" Failed with error: "+t)},e.createClientInfoEmptyError=function(){return new e(I.clientInfoEmptyError.code,""+I.clientInfoEmptyError.desc)},e.createTokenParsingError=function(t){return new e(I.tokenParsingError.code,I.tokenParsingError.desc+" Failed with error: "+t)},e.createTokenNullOrEmptyError=function(t){return new e(I.nullOrEmptyToken.code,I.nullOrEmptyToken.desc+" Raw Token Value: "+t)},e.createEndpointDiscoveryIncompleteError=function(t){return new e(I.endpointResolutionError.code,I.endpointResolutionError.desc+" Detail: "+t)},e.createNetworkError=function(t,n){return new e(I.networkError.code,I.networkError.desc+" | Fetch client threw: "+n+" | Attempted to reach: "+t.split("?")[0])},e.createUnableToGetOpenidConfigError=function(t){return new e(I.unableToGetOpenidConfigError.code,I.unableToGetOpenidConfigError.desc+" Attempted to retrieve endpoints from: "+t)},e.createHashNotDeserializedError=function(t){return new e(I.hashNotDeserialized.code,I.hashNotDeserialized.desc+" Given Object: "+t)},e.createInvalidStateError=function(t,n){return new e(I.invalidStateError.code,I.invalidStateError.desc+" Invalid State: "+t+", Root Err: "+n)},e.createStateMismatchError=function(){return new e(I.stateMismatchError.code,I.stateMismatchError.desc)},e.createStateNotFoundError=function(t){return new e(I.stateNotFoundError.code,I.stateNotFoundError.desc+":  "+t)},e.createNonceMismatchError=function(){return new e(I.nonceMismatchError.code,I.nonceMismatchError.desc)},e.createNonceNotFoundError=function(t){return new e(I.nonceNotFoundError.code,I.nonceNotFoundError.desc+":  "+t)},e.createMultipleMatchingTokensInCacheError=function(){return new e(I.multipleMatchingTokens.code,I.multipleMatchingTokens.desc+".")},e.createMultipleMatchingAccountsInCacheError=function(){return new e(I.multipleMatchingAccounts.code,I.multipleMatchingAccounts.desc)},e.createMultipleMatchingAppMetadataInCacheError=function(){return new e(I.multipleMatchingAppMetadata.code,I.multipleMatchingAppMetadata.desc)},e.createTokenRequestCannotBeMadeError=function(){return new e(I.tokenRequestCannotBeMade.code,I.tokenRequestCannotBeMade.desc)},e.createAppendEmptyScopeToSetError=function(t){return new e(I.appendEmptyScopeError.code,I.appendEmptyScopeError.desc+" Given Scope: "+t)},e.createRemoveEmptyScopeFromSetError=function(t){return new e(I.removeEmptyScopeError.code,I.removeEmptyScopeError.desc+" Given Scope: "+t)},e.createAppendScopeSetError=function(t){return new e(I.appendScopeSetError.code,I.appendScopeSetError.desc+" Detail Error: "+t)},e.createEmptyInputScopeSetError=function(){return new e(I.emptyInputScopeSetError.code,""+I.emptyInputScopeSetError.desc)},e.createDeviceCodeCancelledError=function(){return new e(I.DeviceCodePollingCancelled.code,""+I.DeviceCodePollingCancelled.desc)},e.createDeviceCodeExpiredError=function(){return new e(I.DeviceCodeExpired.code,""+I.DeviceCodeExpired.desc)},e.createDeviceCodeUnknownError=function(){return new e(I.DeviceCodeUnknownError.code,""+I.DeviceCodeUnknownError.desc)},e.createNoAccountInSilentRequestError=function(){return new e(I.NoAccountInSilentRequest.code,""+I.NoAccountInSilentRequest.desc)},e.createNullOrUndefinedCacheRecord=function(){return new e(I.invalidCacheRecord.code,I.invalidCacheRecord.desc)},e.createInvalidCacheEnvironmentError=function(){return new e(I.invalidCacheEnvironment.code,I.invalidCacheEnvironment.desc)},e.createNoAccountFoundError=function(){return new e(I.noAccountFound.code,I.noAccountFound.desc)},e.createCachePluginError=function(){return new e(I.CachePluginError.code,""+I.CachePluginError.desc)},e.createNoCryptoObjectError=function(t){return new e(I.noCryptoObj.code,""+I.noCryptoObj.desc+t)},e.createInvalidCacheTypeError=function(){return new e(I.invalidCacheType.code,""+I.invalidCacheType.desc)},e.createUnexpectedAccountTypeError=function(){return new e(I.unexpectedAccountType.code,""+I.unexpectedAccountType.desc)},e.createUnexpectedCredentialTypeError=function(){return new e(I.unexpectedCredentialType.code,""+I.unexpectedCredentialType.desc)},e.createInvalidAssertionError=function(){return new e(I.invalidAssertion.code,""+I.invalidAssertion.desc)},e.createInvalidCredentialError=function(){return new e(I.invalidClientCredential.code,""+I.invalidClientCredential.desc)},e.createRefreshRequiredError=function(){return new e(I.tokenRefreshRequired.code,I.tokenRefreshRequired.desc)},e.createUserTimeoutReachedError=function(){return new e(I.userTimeoutReached.code,I.userTimeoutReached.desc)},e.createTokenClaimsRequiredError=function(){return new e(I.tokenClaimsRequired.code,I.tokenClaimsRequired.desc)},e.createNoAuthCodeInServerResponseError=function(){return new e(I.noAuthorizationCodeFromServer.code,I.noAuthorizationCodeFromServer.desc)},e.createBindingKeyNotRemovedError=function(){return new e(I.bindingKeyNotRemovedError.code,I.bindingKeyNotRemovedError.desc)},e.createLogoutNotSupportedError=function(){return new e(I.logoutNotSupported.code,I.logoutNotSupported.desc)},e}(V),B=function(){function r(){}return r.decodeAuthToken=function(e){if(r.isEmpty(e))throw O.createTokenNullOrEmptyError(e);var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/,n=t.exec(e);if(!n||n.length<4)throw O.createTokenParsingError("Given token is malformed: "+JSON.stringify(e));var i={header:n[1],JWSPayload:n[2],JWSSig:n[3]};return i},r.isEmpty=function(e){return typeof e>"u"||!e||e.length===0},r.isEmptyObj=function(e){if(e&&!r.isEmpty(e))try{var t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0},r.startsWith=function(e,t){return e.indexOf(t)===0},r.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},r.queryStringToObject=function(e){var t={},n=e.split("&"),i=function(o){return decodeURIComponent(o.replace(/\+/g," "))};return n.forEach(function(o){if(o.trim()){var a=o.split(/=(.+)/g,2),s=a[0],c=a[1];s&&c&&(t[i(s)]=i(c))}}),t},r.trimArrayEntries=function(e){return e.map(function(t){return t.trim()})},r.removeEmptyStringsFromArray=function(e){return e.filter(function(t){return!r.isEmpty(t)})},r.jsonParseHelper=function(e){try{return JSON.parse(e)}catch{return null}},r.matchPattern=function(e,t){var n=new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?"));return n.test(t)},r}();h.LogLevel=void 0;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace"})(h.LogLevel||(h.LogLevel={}));var Ih=function(){function r(e,t,n){this.level=h.LogLevel.Info;var i=function(){};this.localCallback=e.loggerCallback||i,this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level=typeof e.logLevel=="number"?e.logLevel:h.LogLevel.Info,this.correlationId=e.correlationId||T.EMPTY_STRING,this.packageName=t||T.EMPTY_STRING,this.packageVersion=n||T.EMPTY_STRING}return r.prototype.clone=function(e,t,n){return new r({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)},r.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=new Date().toUTCString(),i;B.isEmpty(t.correlationId)?B.isEmpty(this.correlationId)?i="["+n+"]":i="["+n+"] : ["+this.correlationId+"]":i="["+n+"] : ["+t.correlationId+"]";var o=i+" : "+this.packageName+"@"+this.packageVersion+" : "+h.LogLevel[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,o,t.containsPii||!1)}},r.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},r.prototype.error=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Error,containsPii:!1,correlationId:t||T.EMPTY_STRING})},r.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Error,containsPii:!0,correlationId:t||T.EMPTY_STRING})},r.prototype.warning=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Warning,containsPii:!1,correlationId:t||T.EMPTY_STRING})},r.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Warning,containsPii:!0,correlationId:t||T.EMPTY_STRING})},r.prototype.info=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Info,containsPii:!1,correlationId:t||T.EMPTY_STRING})},r.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Info,containsPii:!0,correlationId:t||T.EMPTY_STRING})},r.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Verbose,containsPii:!1,correlationId:t||T.EMPTY_STRING})},r.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Verbose,containsPii:!0,correlationId:t||T.EMPTY_STRING})},r.prototype.trace=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Trace,containsPii:!1,correlationId:t||T.EMPTY_STRING})},r.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:h.LogLevel.Trace,containsPii:!0,correlationId:t||T.EMPTY_STRING})},r.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},r}(),vx="@azure/msal-common",au="6.3.0";h.AzureCloudInstance=void 0;(function(r){r[r.None=0]="None",r.AzurePublic="https://login.microsoftonline.com",r.AzurePpe="https://login.windows-ppe.net",r.AzureChina="https://login.chinacloudapi.cn",r.AzureGermany="https://login.microsoftonline.de",r.AzureUsGovernment="https://login.microsoftonline.us"})(h.AzureCloudInstance||(h.AzureCloudInstance={}));var pn=function(){function r(){}return r.prototype.generateAccountId=function(){return r.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},r.prototype.generateCredentialId=function(){return r.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},r.prototype.generateTarget=function(){return r.generateTargetForCacheKey(this.target)},r.prototype.generateCredentialKey=function(){return r.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId,this.tokenType,this.requestedClaimsHash)},r.prototype.generateType=function(){switch(this.credentialType){case h.CredentialType.ID_TOKEN:return h.CacheType.ID_TOKEN;case h.CredentialType.ACCESS_TOKEN:case h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:return h.CacheType.ACCESS_TOKEN;case h.CredentialType.REFRESH_TOKEN:return h.CacheType.REFRESH_TOKEN;default:throw O.createUnexpectedCredentialTypeError()}},r.getCredentialType=function(e){return e.indexOf(h.CredentialType.ACCESS_TOKEN.toLowerCase())!==-1?e.indexOf(h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())!==-1?h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:h.CredentialType.ACCESS_TOKEN:e.indexOf(h.CredentialType.ID_TOKEN.toLowerCase())!==-1?h.CredentialType.ID_TOKEN:e.indexOf(h.CredentialType.REFRESH_TOKEN.toLowerCase())!==-1?h.CredentialType.REFRESH_TOKEN:T.NOT_DEFINED},r.generateCredentialCacheKey=function(e,t,n,i,o,a,s,c,u){var l=[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(n,i,o,s),this.generateTargetForCacheKey(a),this.generateClaimsHashForCacheKey(u),this.generateSchemeForCacheKey(c)];return l.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateAccountIdForCacheKey=function(e,t){var n=[e,t];return n.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateCredentialIdForCacheKey=function(e,t,n,i){var o=e===h.CredentialType.REFRESH_TOKEN&&i||t,a=[e,o,n||T.EMPTY_STRING];return a.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateTargetForCacheKey=function(e){return(e||T.EMPTY_STRING).toLowerCase()},r.generateClaimsHashForCacheKey=function(e){return(e||T.EMPTY_STRING).toLowerCase()},r.generateSchemeForCacheKey=function(e){return e&&e.toLowerCase()!==h.AuthenticationScheme.BEARER.toLowerCase()?e.toLowerCase():T.EMPTY_STRING},r}(),F={redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create' and 'none'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."},invalidAzureCloudInstance:{code:"invalid_azure_cloud_instance",desc:"Invalid AzureCloudInstance provided. Please refer MSAL JS docs: aks.ms/msaljs/azure_cloud_instance for valid values"},missingSshJwk:{code:"missing_ssh_jwk",desc:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme."},missingSshKid:{code:"missing_ssh_kid",desc:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme."},missingNonceAuthenticationHeader:{code:"missing_nonce_authentication_header",desc:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce."},invalidAuthenticationHeader:{code:"invalid_authentication_header",desc:"Invalid authentication header provided"}},ae=function(r){Re(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.name="ClientConfigurationError",Object.setPrototypeOf(i,e.prototype),i}return e.createRedirectUriEmptyError=function(){return new e(F.redirectUriNotSet.code,F.redirectUriNotSet.desc)},e.createPostLogoutRedirectUriEmptyError=function(){return new e(F.postLogoutUriNotSet.code,F.postLogoutUriNotSet.desc)},e.createClaimsRequestParsingError=function(t){return new e(F.claimsRequestParsingError.code,F.claimsRequestParsingError.desc+" Given value: "+t)},e.createInsecureAuthorityUriError=function(t){return new e(F.authorityUriInsecure.code,F.authorityUriInsecure.desc+" Given URI: "+t)},e.createUrlParseError=function(t){return new e(F.urlParseError.code,F.urlParseError.desc+" Given Error: "+t)},e.createUrlEmptyError=function(){return new e(F.urlEmptyError.code,F.urlEmptyError.desc)},e.createEmptyScopesArrayError=function(){return new e(F.emptyScopesError.code,""+F.emptyScopesError.desc)},e.createClientIdSingleScopeError=function(t){return new e(F.clientIdSingleScopeError.code,F.clientIdSingleScopeError.desc+" Given Scopes: "+t)},e.createInvalidPromptError=function(t){return new e(F.invalidPrompt.code,F.invalidPrompt.desc+" Given value: "+t)},e.createInvalidClaimsRequestError=function(){return new e(F.invalidClaimsRequest.code,F.invalidClaimsRequest.desc)},e.createEmptyLogoutRequestError=function(){return new e(F.logoutRequestEmptyError.code,F.logoutRequestEmptyError.desc)},e.createEmptyTokenRequestError=function(){return new e(F.tokenRequestEmptyError.code,F.tokenRequestEmptyError.desc)},e.createInvalidCodeChallengeMethodError=function(){return new e(F.invalidCodeChallengeMethod.code,F.invalidCodeChallengeMethod.desc)},e.createInvalidCodeChallengeParamsError=function(){return new e(F.invalidCodeChallengeParams.code,F.invalidCodeChallengeParams.desc)},e.createInvalidCloudDiscoveryMetadataError=function(){return new e(F.invalidCloudDiscoveryMetadata.code,F.invalidCloudDiscoveryMetadata.desc)},e.createInvalidAuthorityMetadataError=function(){return new e(F.invalidAuthorityMetadata.code,F.invalidAuthorityMetadata.desc)},e.createUntrustedAuthorityError=function(){return new e(F.untrustedAuthority.code,F.untrustedAuthority.desc)},e.createInvalidAzureCloudInstanceError=function(){return new e(F.invalidAzureCloudInstance.code,F.invalidAzureCloudInstance.desc)},e.createMissingSshJwkError=function(){return new e(F.missingSshJwk.code,F.missingSshJwk.desc)},e.createMissingSshKidError=function(){return new e(F.missingSshKid.code,F.missingSshKid.desc)},e.createMissingNonceAuthenticationHeadersError=function(){return new e(F.missingNonceAuthenticationHeader.code,F.missingNonceAuthenticationHeader.desc)},e.createInvalidAuthenticationHeaderError=function(t,n){return new e(F.invalidAuthenticationHeader.code,F.invalidAuthenticationHeader.desc+". Invalid header: "+t+". Details: "+n)},e}(O),et=function(){function r(e){var t=this,n=e?B.trimArrayEntries(ko(e)):[],i=n?B.removeEmptyStringsFromArray(n):[];this.validateInputScopes(i),this.scopes=new Set,i.forEach(function(o){return t.scopes.add(o)})}return r.fromString=function(e){var t=e||T.EMPTY_STRING,n=t.split(" ");return new r(n)},r.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw ae.createEmptyScopesArrayError()},r.prototype.containsScope=function(e){var t=this.printScopesLowerCase().split(" "),n=new r(t);return B.isEmpty(e)?!1:n.scopes.has(e.toLowerCase())},r.prototype.containsScopeSet=function(e){var t=this;return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(function(n){return t.containsScope(n)})},r.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return Th.forEach(function(n){e.containsScope(n)&&(t+=1)}),this.scopes.size===t},r.prototype.appendScope=function(e){B.isEmpty(e)||this.scopes.add(e.trim())},r.prototype.appendScopes=function(e){var t=this;try{e.forEach(function(n){return t.appendScope(n)})}catch(n){throw O.createAppendScopeSetError(n)}},r.prototype.removeScope=function(e){if(B.isEmpty(e))throw O.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},r.prototype.removeOIDCScopes=function(){var e=this;Th.forEach(function(t){e.scopes.delete(t)})},r.prototype.unionScopeSets=function(e){if(!e)throw O.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach(function(n){return t.add(n.toLowerCase())}),this.scopes.forEach(function(n){return t.add(n.toLowerCase())}),t},r.prototype.intersectingScopeSets=function(e){if(!e)throw O.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount(),o=t.size;return o<i+n},r.prototype.getScopeCount=function(){return this.scopes.size},r.prototype.asArray=function(){var e=[];return this.scopes.forEach(function(t){return e.push(t)}),e},r.prototype.printScopes=function(){if(this.scopes){var e=this.asArray();return e.join(" ")}return T.EMPTY_STRING},r.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},r}();function Ro(r,e){if(B.isEmpty(r))throw O.createClientInfoEmptyError();try{var t=e.base64Decode(r);return JSON.parse(t)}catch(n){throw O.createClientInfoDecodingError(n)}}function ri(r){if(B.isEmpty(r))throw O.createClientInfoDecodingError("Home account ID was empty.");var e=r.split(Ke.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?T.EMPTY_STRING:e[1]}}h.AuthorityType=void 0;(function(r){r[r.Default=0]="Default",r[r.Adfs=1]="Adfs"})(h.AuthorityType||(h.AuthorityType={}));var Sr=function(){function r(){}return r.prototype.generateAccountId=function(){var e=[this.homeAccountId,this.environment];return e.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.prototype.generateAccountKey=function(){return r.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},r.prototype.generateType=function(){switch(this.authorityType){case h.CacheAccountType.ADFS_ACCOUNT_TYPE:return h.CacheType.ADFS;case h.CacheAccountType.MSAV1_ACCOUNT_TYPE:return h.CacheType.MSA;case h.CacheAccountType.MSSTS_ACCOUNT_TYPE:return h.CacheType.MSSTS;case h.CacheAccountType.GENERIC_ACCOUNT_TYPE:return h.CacheType.GENERIC;default:throw O.createUnexpectedAccountTypeError()}},r.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims,nativeAccountId:this.nativeAccountId}},r.generateAccountCacheKey=function(e){var t=[e.homeAccountId,e.environment||T.EMPTY_STRING,e.tenantId||T.EMPTY_STRING];return t.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.createAccount=function(e,t,n,i,o,a,s,c,u){var l,p,d,f,m,y,E=new r;E.authorityType=h.CacheAccountType.MSSTS_ACCOUNT_TYPE,E.clientInfo=e,E.homeAccountId=t,E.nativeAccountId=u;var S=c||i&&i.getPreferredCache();if(!S)throw O.createInvalidCacheEnvironmentError();return E.environment=S,E.realm=((l=n?.claims)===null||l===void 0?void 0:l.tid)||T.EMPTY_STRING,E.oboAssertion=o,n&&(E.idTokenClaims=n.claims,E.localAccountId=((p=n?.claims)===null||p===void 0?void 0:p.oid)||((d=n?.claims)===null||d===void 0?void 0:d.sub)||T.EMPTY_STRING,E.username=((f=n?.claims)===null||f===void 0?void 0:f.preferred_username)||(!((m=n?.claims)===null||m===void 0)&&m.emails?n.claims.emails[0]:T.EMPTY_STRING),E.name=(y=n?.claims)===null||y===void 0?void 0:y.name),E.cloudGraphHostName=a,E.msGraphHost=s,E},r.createGenericAccount=function(e,t,n,i,o,a,s){var c,u,l,p,d=new r;d.authorityType=n&&n.authorityType===h.AuthorityType.Adfs?h.CacheAccountType.ADFS_ACCOUNT_TYPE:h.CacheAccountType.GENERIC_ACCOUNT_TYPE,d.homeAccountId=e,d.realm=T.EMPTY_STRING,d.oboAssertion=i;var f=s||n&&n.getPreferredCache();if(!f)throw O.createInvalidCacheEnvironmentError();return t&&(d.localAccountId=((c=t?.claims)===null||c===void 0?void 0:c.oid)||((u=t?.claims)===null||u===void 0?void 0:u.sub)||T.EMPTY_STRING,d.username=((l=t?.claims)===null||l===void 0?void 0:l.upn)||T.EMPTY_STRING,d.name=((p=t?.claims)===null||p===void 0?void 0:p.name)||T.EMPTY_STRING,d.idTokenClaims=t?.claims),d.environment=f,d.cloudGraphHostName=o,d.msGraphHost=a,d},r.generateHomeAccountId=function(e,t,n,i,o){var a,s=!((a=o?.claims)===null||a===void 0)&&a.sub?o.claims.sub:T.EMPTY_STRING;if(t===h.AuthorityType.Adfs)return s;if(e)try{var c=Ro(e,i);if(!B.isEmpty(c.uid)&&!B.isEmpty(c.utid))return""+c.uid+Ke.CLIENT_INFO_SEPARATOR+c.utid}catch{}return n.verbose("No client info in response"),s},r.isAccountEntity=function(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1},r.accountInfoIsEqual=function(e,t,n){if(!e||!t)return!1;var i=!0;if(n){var o=e.idTokenClaims||{},a=t.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&i},r}(),Bt=function(){function r(e,t){if(B.isEmpty(e))throw O.createTokenNullOrEmptyError(e);this.rawToken=e,this.claims=r.extractTokenClaims(e,t)}return r.extractTokenClaims=function(e,t){var n=B.decodeAuthToken(e);try{var i=n.JWSPayload,o=t.base64Decode(i);return JSON.parse(o)}catch(a){throw O.createTokenParsingError(a)}},r}(),_h=function(){function r(e,t){this.clientId=e,this.cryptoImpl=t}return r.prototype.getAllAccounts=function(){var e=this,t=this.getAccountsFilteredBy(),n=Object.keys(t).map(function(a){return t[a]}),i=n.length;if(i<1)return[];var o=n.map(function(a){var s=r.toObject(new Sr,a),c=s.getAccountInfo(),u=e.readIdTokenFromCache(e.clientId,c);return u&&!c.idTokenClaims&&(c.idTokenClaims=new Bt(u.secret,e.cryptoImpl).claims),c});return o},r.prototype.saveCacheRecord=function(e){return M(this,void 0,void 0,function(){return D(this,function(t){switch(t.label){case 0:if(!e)throw O.createNullOrUndefinedCacheRecord();return e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken?[4,this.saveAccessToken(e.accessToken)]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata),[2]}})})},r.prototype.saveAccessToken=function(e){return M(this,void 0,void 0,function(){var t,n,i,o,a=this;return D(this,function(s){switch(s.label){case 0:return t=this.getCredentialsFilteredBy({clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash}),n=et.fromString(e.target),i=Object.keys(t.accessTokens).map(function(c){return t.accessTokens[c]}),i?(o=[],i.forEach(function(c){var u=et.fromString(c.target);u.intersectingScopeSets(n)&&o.push(a.removeCredential(c))}),[4,Promise.all(o)]):[3,2];case 1:s.sent(),s.label=2;case 2:return this.setAccessTokenCredential(e),[2]}})})},r.prototype.getAccountsFilteredBy=function(e){return this.getAccountsFilteredByInternal(e?e.homeAccountId:T.EMPTY_STRING,e?e.environment:T.EMPTY_STRING,e?e.realm:T.EMPTY_STRING)},r.prototype.getAccountsFilteredByInternal=function(e,t,n){var i=this,o=this.getKeys(),a={};return o.forEach(function(s){var c=i.getAccount(s);!c||!!e&&!i.matchHomeAccountId(c,e)||!!t&&!i.matchEnvironment(c,t)||!!n&&!i.matchRealm(c,n)||(a[s]=c)}),a},r.prototype.getCredentialsFilteredBy=function(e){return this.getCredentialsFilteredByInternal(e.homeAccountId,e.environment,e.credentialType,e.clientId,e.familyId,e.realm,e.target,e.oboAssertion,e.tokenType,e.keyId,e.requestedClaimsHash)},r.prototype.getCredentialsFilteredByInternal=function(e,t,n,i,o,a,s,c,u,l,p){var d=this,f=this.getKeys(),m={idTokens:{},accessTokens:{},refreshTokens:{}};return f.forEach(function(y){var E=pn.getCredentialType(y);if(E!==T.NOT_DEFINED){var S=d.getSpecificCredential(y,E);if(!!S&&!(!!c&&!d.matchOboAssertion(S,c))&&!(!!e&&!d.matchHomeAccountId(S,e))&&!(!!t&&!d.matchEnvironment(S,t))&&!(!!a&&!d.matchRealm(S,a))&&!(!!n&&!d.matchCredentialType(S,n))&&!(!!i&&!d.matchClientId(S,i))&&!(!!o&&!d.matchFamilyId(S,o))&&!(!!s&&!d.matchTarget(S,s))&&!((p||S.requestedClaimsHash)&&S.requestedClaimsHash!==p)&&!(n===h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(!!u&&!d.matchTokenType(S,u)||u===h.AuthenticationScheme.SSH&&l&&!d.matchKeyId(S,l)))){var P=d.updateCredentialCacheKey(y,S);switch(E){case h.CredentialType.ID_TOKEN:m.idTokens[P]=S;break;case h.CredentialType.ACCESS_TOKEN:case h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:m.accessTokens[P]=S;break;case h.CredentialType.REFRESH_TOKEN:m.refreshTokens[P]=S;break}}}}),m},r.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},r.prototype.getAppMetadataFilteredByInternal=function(e,t){var n=this,i=this.getKeys(),o={};return i.forEach(function(a){if(!!n.isAppMetadata(a)){var s=n.getAppMetadata(a);!s||!!e&&!n.matchEnvironment(s,e)||!!t&&!n.matchClientId(s,t)||(o[a]=s)}}),o},r.prototype.getAuthorityMetadataByAlias=function(e){var t=this,n=this.getAuthorityMetadataKeys(),i=null;return n.forEach(function(o){if(!(!t.isAuthorityMetadata(o)||o.indexOf(t.clientId)===-1)){var a=t.getAuthorityMetadata(o);!a||a.aliases.indexOf(e)!==-1&&(i=a)}}),i},r.prototype.removeAllAccounts=function(){return M(this,void 0,void 0,function(){var e,t,n=this;return D(this,function(i){switch(i.label){case 0:return e=this.getKeys(),t=[],e.forEach(function(o){var a=n.getAccount(o);!a||t.push(n.removeAccount(o))}),[4,Promise.all(t)];case 1:return i.sent(),[2,!0]}})})},r.prototype.removeAccount=function(e){return M(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:if(t=this.getAccount(e),!t)throw O.createNoAccountFoundError();return[4,this.removeAccountContext(t)];case 1:return[2,n.sent()&&this.removeItem(e,h.CacheSchemaType.ACCOUNT)]}})})},r.prototype.removeAccountContext=function(e){return M(this,void 0,void 0,function(){var t,n,i,o=this;return D(this,function(a){switch(a.label){case 0:return t=this.getKeys(),n=e.generateAccountId(),i=[],t.forEach(function(s){var c=pn.getCredentialType(s);if(c!==T.NOT_DEFINED){var u=o.getSpecificCredential(s,c);!!u&&n===u.generateAccountId()&&i.push(o.removeCredential(u))}}),[4,Promise.all(i)];case 1:return a.sent(),[2,!0]}})})},r.prototype.removeCredential=function(e){return M(this,void 0,void 0,function(){var t,n,i;return D(this,function(o){switch(o.label){case 0:if(t=e.generateCredentialKey(),e.credentialType.toLowerCase()!==h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())return[3,4];if(e.tokenType!==h.AuthenticationScheme.POP)return[3,4];if(n=e,i=n.keyId,!i)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.cryptoImpl.removeTokenBindingKey(i)];case 2:return o.sent(),[3,4];case 3:throw o.sent(),O.createBindingKeyNotRemovedError();case 4:return[2,this.removeItem(t,h.CacheSchemaType.CREDENTIAL)]}})})},r.prototype.removeAppMetadata=function(){var e=this,t=this.getKeys();return t.forEach(function(n){e.isAppMetadata(n)&&e.removeItem(n,h.CacheSchemaType.APP_METADATA)}),!0},r.prototype.readCacheRecord=function(e,t,n,i){var o=this.readAccountFromCache(e),a=this.readIdTokenFromCache(t,e),s=this.readAccessTokenFromCache(t,e,n),c=this.readRefreshTokenFromCache(t,e,!1),u=this.readAppMetadataFromCache(i,t);return o&&a&&(o.idTokenClaims=new Bt(a.secret,this.cryptoImpl).claims),{account:o,idToken:a,accessToken:s,refreshToken:c,appMetadata:u}},r.prototype.readAccountFromCache=function(e){var t=Sr.generateAccountCacheKey(e);return this.getAccount(t)},r.prototype.readIdTokenFromCache=function(e,t){var n={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:h.CredentialType.ID_TOKEN,clientId:e,realm:t.tenantId},i=this.getCredentialsFilteredBy(n),o=Object.keys(i.idTokens).map(function(s){return i.idTokens[s]}),a=o.length;if(a<1)return null;if(a>1)throw O.createMultipleMatchingTokensInCacheError();return o[0]},r.prototype.readAccessTokenFromCache=function(e,t,n){var i=new et(n.scopes||[]),o=n.authenticationScheme||h.AuthenticationScheme.BEARER,a=o&&o.toLowerCase()!==h.AuthenticationScheme.BEARER.toLowerCase()?h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:h.CredentialType.ACCESS_TOKEN,s={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:a,clientId:e,realm:t.tenantId,target:i.printScopesLowerCase(),tokenType:o,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},c=this.getCredentialsFilteredBy(s),u=Object.keys(c.accessTokens).map(function(p){return c.accessTokens[p]}),l=u.length;if(l<1)return null;if(l>1)throw O.createMultipleMatchingTokensInCacheError();return u[0]},r.prototype.readRefreshTokenFromCache=function(e,t,n){var i=n?Ao:void 0,o={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:h.CredentialType.REFRESH_TOKEN,clientId:e,familyId:i},a=this.getCredentialsFilteredBy(o),s=Object.keys(a.refreshTokens).map(function(u){return a.refreshTokens[u]}),c=s.length;return c<1?null:s[0]},r.prototype.readAppMetadataFromCache=function(e,t){var n={environment:e,clientId:t},i=this.getAppMetadataFilteredBy(n),o=Object.keys(i).map(function(s){return i[s]}),a=o.length;if(a<1)return null;if(a>1)throw O.createMultipleMatchingAppMetadataInCacheError();return o[0]},r.prototype.isAppMetadataFOCI=function(e,t){var n=this.readAppMetadataFromCache(e,t);return!!(n&&n.familyId===Ao)},r.prototype.matchHomeAccountId=function(e,t){return!!(e.homeAccountId&&t===e.homeAccountId)},r.prototype.matchOboAssertion=function(e,t){return!!(e.oboAssertion&&t===e.oboAssertion)},r.prototype.matchEnvironment=function(e,t){var n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)},r.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},r.prototype.matchClientId=function(e,t){return!!(e.clientId&&t===e.clientId)},r.prototype.matchFamilyId=function(e,t){return!!(e.familyId&&t===e.familyId)},r.prototype.matchRealm=function(e,t){return!!(e.realm&&t===e.realm)},r.prototype.matchTarget=function(e,t){var n=e.credentialType!==h.CredentialType.ACCESS_TOKEN&&e.credentialType!==h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;if(n||!e.target)return!1;var i=et.fromString(e.target),o=et.fromString(t);return o.containsOnlyOIDCScopes()?o.removeScope(T.OFFLINE_ACCESS_SCOPE):o.removeOIDCScopes(),i.containsScopeSet(o)},r.prototype.matchTokenType=function(e,t){return!!(e.tokenType&&e.tokenType===t)},r.prototype.matchKeyId=function(e,t){return!!(e.keyId&&e.keyId===t)},r.prototype.isAppMetadata=function(e){return e.indexOf(Zc)!==-1},r.prototype.isAuthorityMetadata=function(e){return e.indexOf(ei.CACHE_KEY)!==-1},r.prototype.generateAuthorityMetadataCacheKey=function(e){return ei.CACHE_KEY+"-"+this.clientId+"-"+e},r.prototype.getSpecificCredential=function(e,t){switch(t){case h.CredentialType.ID_TOKEN:return this.getIdTokenCredential(e);case h.CredentialType.ACCESS_TOKEN:case h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:return this.getAccessTokenCredential(e);case h.CredentialType.REFRESH_TOKEN:return this.getRefreshTokenCredential(e);default:return null}},r.toObject=function(e,t){for(var n in t)e[n]=t[n];return e},r}(),Sh=function(r){Re(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setAccount=function(){var t="Storage interface - setAccount() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getAccount=function(){var t="Storage interface - getAccount() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setIdTokenCredential=function(){var t="Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getIdTokenCredential=function(){var t="Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setAccessTokenCredential=function(){var t="Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getAccessTokenCredential=function(){var t="Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setRefreshTokenCredential=function(){var t="Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getRefreshTokenCredential=function(){var t="Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setAppMetadata=function(){var t="Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getAppMetadata=function(){var t="Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setServerTelemetry=function(){var t="Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getServerTelemetry=function(){var t="Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setAuthorityMetadata=function(){var t="Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getAuthorityMetadata=function(){var t="Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getAuthorityMetadataKeys=function(){var t="Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.setThrottlingCache=function(){var t="Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getThrottlingCache=function(){var t="Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.removeItem=function(){var t="Storage interface - removeItem() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.containsKey=function(){var t="Storage interface - containsKey() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.getKeys=function(){var t="Storage interface - getKeys() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e.prototype.clear=function(){return M(this,void 0,void 0,function(){var t;return D(this,function(n){throw t="Storage interface - clear() has not been implemented for the cacheStorage interface.",V.createUnexpectedError(t)})})},e.prototype.updateCredentialCacheKey=function(){var t="Storage interface - updateCredentialCacheKey() has not been implemented for the cacheStorage interface.";throw V.createUnexpectedError(t)},e}(_h),yx=300,Ah={tokenRenewalOffsetSeconds:yx,preventCorsPreflight:!1,proxyUrl:T.EMPTY_STRING},Ex={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:h.LogLevel.Info,correlationId:T.EMPTY_STRING},Cx={sendGetRequestAsync:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Network interface - sendGetRequestAsync() has not been implemented",V.createUnexpectedError(r)})})},sendPostRequestAsync:function(){return M(this,void 0,void 0,function(){var r;return D(this,function(e){throw r="Network interface - sendPostRequestAsync() has not been implemented",V.createUnexpectedError(r)})})}},Tx={sku:T.SKU,version:au,cpu:T.EMPTY_STRING,os:T.EMPTY_STRING},bx={clientSecret:T.EMPTY_STRING,clientAssertion:void 0},wx={azureCloudInstance:h.AzureCloudInstance.None,tenant:""+T.DEFAULT_COMMON_TENANT},xx={application:{appName:"",appVersion:""}};function Ix(r){var e=r.authOptions,t=r.systemOptions,n=r.loggerOptions,i=r.storageInterface,o=r.networkInterface,a=r.cryptoInterface,s=r.clientCredentials,c=r.libraryInfo,u=r.telemetry,l=r.serverTelemetryManager,p=r.persistencePlugin,d=r.serializableCache,f=me(me({},Ex),n);return{authOptions:_x(e),systemOptions:me(me({},Ah),t),loggerOptions:f,storageInterface:i||new Sh(e.clientId,tu),networkInterface:o||Cx,cryptoInterface:a||tu,clientCredentials:s||bx,libraryInfo:me(me({},Tx),c),telemetry:me(me({},xx),u),serverTelemetryManager:l||null,persistencePlugin:p||null,serializableCache:d||null}}function _x(r){return me({clientCapabilities:[],azureCloudOptions:wx},r)}var ni=function(r){Re(e,r);function e(t,n,i){var o=r.call(this,t,n,i)||this;return o.name="ServerError",Object.setPrototypeOf(o,e.prototype),o}return e}(V),ru=function(){function r(){}return r.generateThrottlingStorageKey=function(e){return ti.THROTTLING_PREFIX+"."+JSON.stringify(e)},r.preProcess=function(e,t){var n,i=r.generateThrottlingStorageKey(t),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,h.CacheSchemaType.THROTTLING);return}throw new ni(((n=o.errorCodes)===null||n===void 0?void 0:n.join(" "))||T.EMPTY_STRING,o.errorMessage,o.subError)}},r.postProcess=function(e,t,n){if(r.checkResponseStatus(n)||r.checkResponseForRetryAfter(n)){var i={throttleTime:r.calculateThrottleTime(parseInt(n.headers[Ve.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(r.generateThrottlingStorageKey(t),i)}},r.checkResponseStatus=function(e){return e.status===429||e.status>=500&&e.status<600},r.checkResponseForRetryAfter=function(e){return e.headers?e.headers.hasOwnProperty(Ve.RETRY_AFTER)&&(e.status<200||e.status>=300):!1},r.calculateThrottleTime=function(e){var t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(t||ti.DEFAULT_THROTTLE_TIME_SECONDS),n+ti.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)},r.removeThrottle=function(e,t,n,i){var o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:i,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},a=this.generateThrottlingStorageKey(o);return e.removeItem(a,h.CacheSchemaType.THROTTLING)},r}(),Ph=function(){function r(e,t){this.networkClient=e,this.cacheManager=t}return r.prototype.sendPostRequest=function(e,t,n){return M(this,void 0,void 0,function(){var i,o;return D(this,function(a){switch(a.label){case 0:ru.preProcess(this.cacheManager,e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,n)];case 2:return i=a.sent(),[3,4];case 3:throw o=a.sent(),o instanceof V?o:O.createNetworkError(t,o);case 4:return ru.postProcess(this.cacheManager,e,i),[2,i]}})})},r}();h.CcsCredentialType=void 0;(function(r){r.HOME_ACCOUNT_ID="home_account_id",r.UPN="UPN"})(h.CcsCredentialType||(h.CcsCredentialType={}));var Rr=function(){function r(e){this.config=Ix(e),this.logger=new Ih(this.config.loggerOptions,vx,au),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Ph(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority}return r.prototype.createTokenRequestHeaders=function(e){var t={};if(t[Ve.CONTENT_TYPE]=T.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case h.CcsCredentialType.HOME_ACCOUNT_ID:try{var n=ri(e.credential);t[Ve.CCS_HEADER]="Oid:"+n.uid+"@"+n.utid}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case h.CcsCredentialType.UPN:t[Ve.CCS_HEADER]="UPN: "+e.credential;break}return t},r.prototype.executePostToTokenEndpoint=function(e,t,n,i){return M(this,void 0,void 0,function(){var o;return D(this,function(a){switch(a.label){case 0:return[4,this.networkManager.sendPostRequest(i,e,{body:t,headers:n,proxyUrl:this.config.systemOptions.proxyUrl})];case 1:return o=a.sent(),this.config.serverTelemetryManager&&o.status<500&&o.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,o]}})})},r.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw O.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},r}(),Ir=function(){function r(){}return r.validateRedirectUri=function(e){if(B.isEmpty(e))throw ae.createRedirectUriEmptyError()},r.validatePrompt=function(e){var t=[];for(var n in ln)t.push(ln[n]);if(t.indexOf(e)<0)throw ae.createInvalidPromptError(e)},r.validateClaims=function(e){try{JSON.parse(e)}catch{throw ae.createInvalidClaimsRequestError()}},r.validateCodeChallengeParams=function(e,t){if(B.isEmpty(e)||B.isEmpty(t))throw ae.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},r.validateCodeChallengeMethod=function(e){if([bh.PLAIN,bh.S256].indexOf(e)<0)throw ae.createInvalidCodeChallengeMethodError()},r.sanitizeEQParams=function(e,t){return e?(t.forEach(function(n,i){e[i]&&delete e[i]}),e):{}},r}(),ot=function(){function r(){this.parameters=new Map}return r.prototype.addResponseTypeCode=function(){this.parameters.set(z.RESPONSE_TYPE,encodeURIComponent(T.CODE_RESPONSE_TYPE))},r.prototype.addResponseTypeForTokenAndIdToken=function(){this.parameters.set(z.RESPONSE_TYPE,encodeURIComponent(T.TOKEN_RESPONSE_TYPE+" "+T.ID_TOKEN_RESPONSE_TYPE))},r.prototype.addResponseMode=function(e){this.parameters.set(z.RESPONSE_MODE,encodeURIComponent(e||h.ResponseMode.QUERY))},r.prototype.addNativeBroker=function(){this.parameters.set(z.NATIVE_BROKER,encodeURIComponent("1"))},r.prototype.addScopes=function(e,t){t===void 0&&(t=!0);var n=t?ko(e||[],ou):e||[],i=new et(n);this.parameters.set(z.SCOPE,encodeURIComponent(i.printScopes()))},r.prototype.addClientId=function(e){this.parameters.set(z.CLIENT_ID,encodeURIComponent(e))},r.prototype.addRedirectUri=function(e){Ir.validateRedirectUri(e),this.parameters.set(z.REDIRECT_URI,encodeURIComponent(e))},r.prototype.addPostLogoutRedirectUri=function(e){Ir.validateRedirectUri(e),this.parameters.set(z.POST_LOGOUT_URI,encodeURIComponent(e))},r.prototype.addIdTokenHint=function(e){this.parameters.set(z.ID_TOKEN_HINT,encodeURIComponent(e))},r.prototype.addDomainHint=function(e){this.parameters.set(Pr.DOMAIN_HINT,encodeURIComponent(e))},r.prototype.addLoginHint=function(e){this.parameters.set(Pr.LOGIN_HINT,encodeURIComponent(e))},r.prototype.addCcsUpn=function(e){this.parameters.set(Ve.CCS_HEADER,encodeURIComponent("UPN:"+e))},r.prototype.addCcsOid=function(e){this.parameters.set(Ve.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},r.prototype.addSid=function(e){this.parameters.set(Pr.SID,encodeURIComponent(e))},r.prototype.addClaims=function(e,t){var n=this.addClientCapabilitiesToClaims(e,t);Ir.validateClaims(n),this.parameters.set(z.CLAIMS,encodeURIComponent(n))},r.prototype.addCorrelationId=function(e){this.parameters.set(z.CLIENT_REQUEST_ID,encodeURIComponent(e))},r.prototype.addLibraryInfo=function(e){this.parameters.set(z.X_CLIENT_SKU,e.sku),this.parameters.set(z.X_CLIENT_VER,e.version),e.os&&this.parameters.set(z.X_CLIENT_OS,e.os),e.cpu&&this.parameters.set(z.X_CLIENT_CPU,e.cpu)},r.prototype.addApplicationTelemetry=function(e){e?.appName&&this.parameters.set(z.X_APP_NAME,e.appName),e?.appVersion&&this.parameters.set(z.X_APP_VER,e.appVersion)},r.prototype.addPrompt=function(e){Ir.validatePrompt(e),this.parameters.set(""+z.PROMPT,encodeURIComponent(e))},r.prototype.addState=function(e){B.isEmpty(e)||this.parameters.set(z.STATE,encodeURIComponent(e))},r.prototype.addNonce=function(e){this.parameters.set(z.NONCE,encodeURIComponent(e))},r.prototype.addCodeChallengeParams=function(e,t){if(Ir.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(z.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(z.CODE_CHALLENGE_METHOD,encodeURIComponent(t));else throw ae.createInvalidCodeChallengeParamsError()},r.prototype.addAuthorizationCode=function(e){this.parameters.set(z.CODE,encodeURIComponent(e))},r.prototype.addDeviceCode=function(e){this.parameters.set(z.DEVICE_CODE,encodeURIComponent(e))},r.prototype.addRefreshToken=function(e){this.parameters.set(z.REFRESH_TOKEN,encodeURIComponent(e))},r.prototype.addCodeVerifier=function(e){this.parameters.set(z.CODE_VERIFIER,encodeURIComponent(e))},r.prototype.addClientSecret=function(e){this.parameters.set(z.CLIENT_SECRET,encodeURIComponent(e))},r.prototype.addClientAssertion=function(e){this.parameters.set(z.CLIENT_ASSERTION,encodeURIComponent(e))},r.prototype.addClientAssertionType=function(e){this.parameters.set(z.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},r.prototype.addOboAssertion=function(e){this.parameters.set(z.OBO_ASSERTION,encodeURIComponent(e))},r.prototype.addRequestTokenUse=function(e){this.parameters.set(z.REQUESTED_TOKEN_USE,encodeURIComponent(e))},r.prototype.addGrantType=function(e){this.parameters.set(z.GRANT_TYPE,encodeURIComponent(e))},r.prototype.addClientInfo=function(){this.parameters.set(gx,"1")},r.prototype.addExtraQueryParameters=function(e){var t=this;Ir.sanitizeEQParams(e,this.parameters),Object.keys(e).forEach(function(n){t.parameters.set(n,e[n])})},r.prototype.addClientCapabilitiesToClaims=function(e,t){var n;if(!e)n={};else try{n=JSON.parse(e)}catch{throw ae.createInvalidClaimsRequestError()}return t&&t.length>0&&(n.hasOwnProperty(cn.ACCESS_TOKEN)||(n[cn.ACCESS_TOKEN]={}),n[cn.ACCESS_TOKEN][cn.XMS_CC]={values:t}),JSON.stringify(n)},r.prototype.addUsername=function(e){this.parameters.set(Po.username,e)},r.prototype.addPassword=function(e){this.parameters.set(Po.password,e)},r.prototype.addPopToken=function(e){B.isEmpty(e)||(this.parameters.set(z.TOKEN_TYPE,h.AuthenticationScheme.POP),this.parameters.set(z.REQ_CNF,encodeURIComponent(e)))},r.prototype.addSshJwk=function(e){B.isEmpty(e)||(this.parameters.set(z.TOKEN_TYPE,h.AuthenticationScheme.SSH),this.parameters.set(z.REQ_CNF,encodeURIComponent(e)))},r.prototype.addServerTelemetry=function(e){this.parameters.set(z.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(z.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},r.prototype.addThrottling=function(){this.parameters.set(z.X_MS_LIB_CAPABILITY,ti.X_MS_LIB_CAPABILITY_VALUE)},r.prototype.addLogoutHint=function(e){this.parameters.set(z.LOGOUT_HINT,encodeURIComponent(e))},r.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach(function(t,n){e.push(n+"="+t)}),e.join("&")},r}(),Rh=function(r){Re(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createIdTokenEntity=function(t,n,i,o,a,s){var c=new e;return c.credentialType=h.CredentialType.ID_TOKEN,c.homeAccountId=t,c.environment=n,c.clientId=o,c.secret=i,c.realm=a,c.oboAssertion=s,c},e.isIdTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===h.CredentialType.ID_TOKEN:!1},e}(pn),ge=function(){function r(){}return r.nowSeconds=function(){return Math.round(new Date().getTime()/1e3)},r.isTokenExpired=function(e,t){var n=Number(e)||0,i=r.nowSeconds()+t;return i>n},r.wasClockTurnedBack=function(e){var t=Number(e);return t>r.nowSeconds()},r.delay=function(e,t){return new Promise(function(n){return setTimeout(function(){return n(t)},e)})},r}(),Oh=function(r){Re(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createAccessTokenEntity=function(t,n,i,o,a,s,c,u,l,p,d,f,m,y,E){var S,P,A=new e;A.homeAccountId=t,A.credentialType=h.CredentialType.ACCESS_TOKEN,A.secret=i;var j=ge.nowSeconds();if(A.cachedAt=j.toString(),A.expiresOn=c.toString(),A.extendedExpiresOn=u.toString(),p&&(A.refreshOn=p.toString()),A.environment=n,A.clientId=o,A.realm=a,A.target=s,A.oboAssertion=f,A.tokenType=B.isEmpty(d)?h.AuthenticationScheme.BEARER:d,y&&(A.requestedClaims=y,A.requestedClaimsHash=E),((S=A.tokenType)===null||S===void 0?void 0:S.toLowerCase())!==h.AuthenticationScheme.BEARER.toLowerCase())switch(A.credentialType=h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME,A.tokenType){case h.AuthenticationScheme.POP:var ce=Bt.extractTokenClaims(i,l);if(!(!((P=ce?.cnf)===null||P===void 0)&&P.kid))throw O.createTokenClaimsRequiredError();A.keyId=ce.cnf.kid;break;case h.AuthenticationScheme.SSH:A.keyId=m}return A},e.isAccessTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.hasOwnProperty("target")&&(t.credentialType===h.CredentialType.ACCESS_TOKEN||t.credentialType===h.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1},e}(pn),kh=function(r){Re(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createRefreshTokenEntity=function(t,n,i,o,a,s){var c=new e;return c.clientId=o,c.credentialType=h.CredentialType.REFRESH_TOKEN,c.environment=n,c.homeAccountId=t,c.secret=i,c.oboAssertion=s,a&&(c.familyId=a),c},e.isRefreshTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===h.CredentialType.REFRESH_TOKEN:!1},e}(pn),xh=["interaction_required","consent_required","login_required"],Sx=["message_only","additional_action","basic_action","user_password_expired","consent_required"],Oo={noTokensFoundError:{code:"no_tokens_found",desc:"No refresh token found in the cache. Please sign-in."}},Ar=function(r){Re(e,r);function e(t,n,i){var o=r.call(this,t,n,i)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,e.prototype),o}return e.isInteractionRequiredError=function(t,n,i){var o=!!t&&xh.indexOf(t)>-1,a=!!i&&Sx.indexOf(i)>-1,s=!!n&&xh.some(function(c){return n.indexOf(c)>-1});return o||s||a},e.createNoTokensFoundError=function(){return new e(Oo.noTokensFoundError.code,Oo.noTokensFoundError.desc)},e}(V),Ax=function(){function r(e,t,n,i,o){this.account=e||null,this.idToken=t||null,this.accessToken=n||null,this.refreshToken=i||null,this.appMetadata=o||null}return r}(),Nh=function(){function r(){}return r.setRequestState=function(e,t,n){var i=r.generateLibraryState(e,n);return B.isEmpty(t)?i:""+i+T.RESOURCE_DELIM+t},r.generateLibraryState=function(e,t){if(!e)throw O.createNoCryptoObjectError("generateLibraryState");var n={id:e.createNewGuid()};t&&(n.meta=t);var i=JSON.stringify(n);return e.base64Encode(i)},r.parseRequestState=function(e,t){if(!e)throw O.createNoCryptoObjectError("parseRequestState");if(B.isEmpty(t))throw O.createInvalidStateError(t,"Null, undefined or empty state");try{var n=t.split(T.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(T.RESOURCE_DELIM):T.EMPTY_STRING,a=e.base64Decode(i),s=JSON.parse(a);return{userRequestState:B.isEmpty(o)?T.EMPTY_STRING:o,libraryState:s}}catch(c){throw O.createInvalidStateError(t,c)}},r}(),$e=function(){function r(e){if(this._urlString=e,B.isEmpty(this._urlString))throw ae.createUrlEmptyError();B.isEmpty(this.getHash())&&(this._urlString=r.canonicalizeUri(e))}return Object.defineProperty(r.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),r.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return B.endsWith(t,"?")?t=t.slice(0,-1):B.endsWith(t,"?/")&&(t=t.slice(0,-2)),B.endsWith(t,"/")||(t+="/"),t}return e},r.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(t){throw ae.createUrlParseError(t)}if(!e.HostNameAndPort||!e.PathSegments)throw ae.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ae.createInsecureAuthorityUriError(this.urlString)},r.appendQueryString=function(e,t){return B.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},r.removeHashFromUrl=function(e){return r.canonicalizeUri(e.split("#")[0])},r.prototype.replaceTenantPath=function(e){var t=this.getUrlComponents(),n=t.PathSegments;return e&&n.length!==0&&(n[0]===So.COMMON||n[0]===So.ORGANIZATIONS)&&(n[0]=e),r.constructAuthorityUriFromObject(t)},r.prototype.getHash=function(){return r.parseHash(this.urlString)},r.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ae.createUrlParseError("Given url string: "+this.urlString);var n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},i=n.AbsolutePath.split("/");return i=i.filter(function(o){return o&&o.length>0}),n.PathSegments=i,!B.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n},r.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw ae.createUrlParseError("Given url string: "+e);return n[2]},r.getAbsoluteUrl=function(e,t){if(e[0]===T.FORWARD_SLASH){var n=new r(t),i=n.getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e},r.parseHash=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):T.EMPTY_STRING},r.constructAuthorityUriFromObject=function(e){return new r(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))},r.getDeserializedHash=function(e){if(B.isEmpty(e))return{};var t=r.parseHash(e),n=B.queryStringToObject(B.isEmpty(t)?e:t);if(!n)throw O.createHashNotDeserializedError(JSON.stringify(n));return n},r.hashContainsKnownProperties=function(e){if(B.isEmpty(e)||e.indexOf("=")<0)return!1;var t=r.getDeserializedHash(e);return!!(t.code||t.error_description||t.error||t.state)},r}(),nu;(function(r){r.SW="sw",r.UHW="uhw"})(nu||(nu={}));var ii=function(){function r(e){this.cryptoUtils=e}return r.prototype.generateCnf=function(e){return M(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return[4,this.generateKid(e)];case 1:return t=n.sent(),[2,this.cryptoUtils.base64Encode(JSON.stringify(t))]}})})},r.prototype.generateCnfHash=function(e){return M(this,void 0,void 0,function(){return D(this,function(t){return[2,this.cryptoUtils.hashString(e)]})})},r.prototype.generateKid=function(e){return M(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return t=n.sent(),[2,{kid:t,xms_ksl:nu.SW}]}})})},r.prototype.signPopToken=function(e,t){var n;return M(this,void 0,void 0,function(){var i;return D(this,function(o){if(i=Bt.extractTokenClaims(e,this.cryptoUtils),!(!((n=i?.cnf)===null||n===void 0)&&n.kid))throw O.createTokenClaimsRequiredError();return[2,this.signPayload(e,i.cnf.kid,t)]})})},r.prototype.signPayload=function(e,t,n,i){return M(this,void 0,void 0,function(){var o,a,s,c,u,l;return D(this,function(p){switch(p.label){case 0:return o=n.resourceRequestMethod,a=n.resourceRequestUri,s=n.shrClaims,c=n.shrNonce,u=a?new $e(a):void 0,l=u?.getUrlComponents(),[4,this.cryptoUtils.signJwt(me({at:e,ts:ge.nowSeconds(),m:o?.toUpperCase(),u:l?.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:l?.AbsolutePath,q:l?.QueryString?[[],l.QueryString]:void 0,client_claims:s||void 0},i),t,n.correlationId)];case 1:return[2,p.sent()]}})})},r}(),Mh=function(){function r(){}return r.prototype.generateAppMetadataKey=function(){return r.generateAppMetadataCacheKey(this.environment,this.clientId)},r.generateAppMetadataCacheKey=function(e,t){var n=[Zc,e,t];return n.join(Ke.CACHE_KEY_SEPARATOR).toLowerCase()},r.createAppMetadataEntity=function(e,t,n){var i=new r;return i.clientId=e,i.environment=t,n&&(i.familyId=n),i},r.isAppMetadataEntity=function(e,t){return t?e.indexOf(Zc)===0&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment"):!1},r}(),Dh=function(){function r(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(r.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),r}(),xt=function(){function r(e,t,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a}return r.prototype.validateServerAuthorizationCodeResponse=function(e,t,n){if(!e.state||!t)throw e.state?O.createStateNotFoundError("Cached State"):O.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw O.createStateMismatchError();if(e.error||e.error_description||e.suberror)throw Ar.isInteractionRequiredError(e.error,e.error_description,e.suberror)?new Ar(e.error||T.EMPTY_STRING,e.error_description,e.suberror):new ni(e.error||T.EMPTY_STRING,e.error_description,e.suberror);e.client_info&&Ro(e.client_info,n)},r.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(Ar.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new Ar(e.error,e.error_description,e.suberror);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new ni(e.error,t,e.suberror)}},r.prototype.handleServerTokenResponse=function(e,t,n,i,o,a,s){return M(this,void 0,void 0,function(){var c,u,l,p,d,f;return D(this,function(m){switch(m.label){case 0:if(e.id_token&&(c=new Bt(e.id_token||T.EMPTY_STRING,this.cryptoObj),o&&!B.isEmpty(o.nonce)&&c.claims.nonce!==o.nonce))throw O.createNonceMismatchError();this.homeAccountIdentifier=Sr.generateHomeAccountId(e.client_info||T.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),!!o&&!!o.state&&(u=Nh.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||i.sshKid||void 0,l=this.generateCacheRecord(e,t,n,i,c,a,o),m.label=1;case 1:return m.trys.push([1,,5,8]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new Dh(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(p)]):[3,3];case 2:m.sent(),m.label=3;case 3:return s&&l.account&&(d=l.account.generateAccountKey(),f=this.cacheStorage.getAccount(d),!f)?(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,r.generateAuthenticationResult(this.cryptoObj,t,l,!1,i,c,u)]):[4,this.cacheStorage.saveCacheRecord(l)];case 4:return m.sent(),[3,8];case 5:return this.persistencePlugin&&this.serializableCache&&p?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(p)]):[3,7];case 6:m.sent(),m.label=7;case 7:return[7];case 8:return[2,r.generateAuthenticationResult(this.cryptoObj,t,l,!1,i,c,u,e.spa_code)]}})})},r.prototype.generateCacheRecord=function(e,t,n,i,o,a,s){var c=t.getPreferredCache();if(B.isEmpty(c))throw O.createInvalidCacheEnvironmentError();var u,l;!B.isEmpty(e.id_token)&&!!o&&(u=Rh.createIdTokenEntity(this.homeAccountIdentifier,c,e.id_token||T.EMPTY_STRING,this.clientId,o.claims.tid||T.EMPTY_STRING,a),l=this.generateAccountEntity(e,o,t,a,s));var p=null;if(!B.isEmpty(e.access_token)){var d=e.scope?et.fromString(e.scope):new et(i.scopes||[]),f=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,m=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,y=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,E=n+f,S=E+m,P=y&&y>0?n+y:void 0;p=Oh.createAccessTokenEntity(this.homeAccountIdentifier,c,e.access_token||T.EMPTY_STRING,this.clientId,o?o.claims.tid||T.EMPTY_STRING:t.tenant,d.printScopes(),E,S,this.cryptoObj,P,e.token_type,a,e.key_id,i.claims,i.requestedClaimsHash)}var A=null;B.isEmpty(e.refresh_token)||(A=kh.createRefreshTokenEntity(this.homeAccountIdentifier,c,e.refresh_token||T.EMPTY_STRING,this.clientId,e.foci,a));var j=null;return B.isEmpty(e.foci)||(j=Mh.createAppMetadataEntity(this.clientId,c,e.foci)),new Ax(l,u,p,A,j)},r.prototype.generateAccountEntity=function(e,t,n,i,o){var a=n.authorityType,s=o?o.cloud_graph_host_name:T.EMPTY_STRING,c=o?o.msgraph_host:T.EMPTY_STRING;if(a===h.AuthorityType.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),Sr.createGenericAccount(this.homeAccountIdentifier,t,n,i,s,c);if(B.isEmpty(e.client_info)&&n.protocolMode==="AAD")throw O.createClientInfoEmptyError();return e.client_info?Sr.createAccount(e.client_info,this.homeAccountIdentifier,t,n,i,s,c):Sr.createGenericAccount(this.homeAccountIdentifier,t,n,i,s,c)},r.generateAuthenticationResult=function(e,t,n,i,o,a,s,c){var u,l,p;return M(this,void 0,void 0,function(){var d,f,m,y,E,S,P,A;return D(this,function(j){switch(j.label){case 0:return d=T.EMPTY_STRING,f=[],m=null,E=T.EMPTY_STRING,n.accessToken?n.accessToken.tokenType!==h.AuthenticationScheme.POP?[3,2]:(S=new ii(e),[4,S.signPopToken(n.accessToken.secret,o)]):[3,4];case 1:return d=j.sent(),[3,3];case 2:d=n.accessToken.secret,j.label=3;case 3:f=et.fromString(n.accessToken.target).asArray(),m=new Date(Number(n.accessToken.expiresOn)*1e3),y=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),j.label=4;case 4:return n.appMetadata&&(E=n.appMetadata.familyId===Ao?Ao:T.EMPTY_STRING),P=a?.claims.oid||a?.claims.sub||T.EMPTY_STRING,A=a?.claims.tid||T.EMPTY_STRING,[2,{authority:t.canonicalAuthority,uniqueId:P,tenantId:A,scopes:f,account:n.account?n.account.getAccountInfo():null,idToken:a?a.rawToken:T.EMPTY_STRING,idTokenClaims:a?a.claims:{},accessToken:d,fromCache:i,expiresOn:m,correlationId:o.correlationId,extExpiresOn:y,familyId:E,tokenType:((u=n.accessToken)===null||u===void 0?void 0:u.tokenType)||T.EMPTY_STRING,state:s?s.userRequestState:T.EMPTY_STRING,cloudGraphHostName:((l=n.account)===null||l===void 0?void 0:l.cloudGraphHostName)||T.EMPTY_STRING,msGraphHost:((p=n.account)===null||p===void 0?void 0:p.msGraphHost)||T.EMPTY_STRING,code:c,fromNativeBroker:!1}]}})})},r}(),Px=function(r){Re(e,r);function e(t){var n=r.call(this,t)||this;return n.includeRedirectUri=!0,n}return e.prototype.getAuthCodeUrl=function(t){return M(this,void 0,void 0,function(){var n;return D(this,function(i){switch(i.label){case 0:return[4,this.createAuthCodeUrlQueryString(t)];case 1:return n=i.sent(),[2,$e.appendQueryString(this.authority.authorizationEndpoint,n)]}})})},e.prototype.acquireToken=function(t,n){return M(this,void 0,void 0,function(){var i,o,a;return D(this,function(s){switch(s.label){case 0:if(this.logger.info("in acquireToken call"),!t||B.isEmpty(t.code))throw O.createTokenRequestCannotBeMadeError();return i=ge.nowSeconds(),[4,this.executeTokenRequest(this.authority,t)];case 1:return o=s.sent(),a=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),a.validateTokenResponse(o.body),[4,a.handleServerTokenResponse(o.body,this.authority,i,t,n)];case 2:return[2,s.sent()]}})})},e.prototype.handleFragmentResponse=function(t,n){var i=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),o=new $e(t),a=$e.getDeserializedHash(o.getHash());if(i.validateServerAuthorizationCodeResponse(a,n,this.cryptoUtils),!a.code)throw O.createNoAuthCodeInServerResponseError();return me(me({},a),{code:a.code})},e.prototype.getLogoutUri=function(t){if(!t)throw ae.createEmptyLogoutRequestError();var n=this.createLogoutUrlQueryString(t);return $e.appendQueryString(this.authority.endSessionEndpoint,n)},e.prototype.executeTokenRequest=function(t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return D(this,function(p){switch(p.label){case 0:return i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},[4,this.createTokenRequestBody(n)];case 1:if(o=p.sent(),a=this.createTokenQueryParameters(n),s=void 0,n.clientInfo)try{c=Ro(n.clientInfo,this.cryptoUtils),s={credential:""+c.uid+Ke.CLIENT_INFO_SEPARATOR+c.utid,type:h.CcsCredentialType.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}return u=this.createTokenRequestHeaders(s||n.ccsCredential),l=B.isEmpty(a)?t.tokenEndpoint:t.tokenEndpoint+"?"+a,[2,this.executePostToTokenEndpoint(l,o,u,i)]}})})},e.prototype.createTokenQueryParameters=function(t){var n=new ot;return t.tokenQueryParameters&&n.addExtraQueryParameters(t.tokenQueryParameters),n.createQueryString()},e.prototype.createTokenRequestBody=function(t){return M(this,void 0,void 0,function(){var n,i,o,a,s,c,u,u,l;return D(this,function(p){switch(p.label){case 0:return n=new ot,n.addClientId(this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(t.redirectUri):Ir.validateRedirectUri(t.redirectUri),n.addScopes(t.scopes),n.addAuthorizationCode(t.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),t.codeVerifier&&n.addCodeVerifier(t.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(i=this.config.clientCredentials.clientAssertion,n.addClientAssertion(i.assertion),n.addClientAssertionType(i.assertionType)),n.addGrantType(Jt.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),t.authenticationScheme!==h.AuthenticationScheme.POP?[3,2]:(o=new ii(this.cryptoUtils),[4,o.generateCnf(t)]);case 1:return a=p.sent(),n.addPopToken(a),[3,3];case 2:if(t.authenticationScheme===h.AuthenticationScheme.SSH)if(t.sshJwk)n.addSshJwk(t.sshJwk);else throw ae.createMissingSshJwkError();p.label=3;case 3:if(s=t.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(s),(!B.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),c=void 0,t.clientInfo)try{u=Ro(t.clientInfo,this.cryptoUtils),c={credential:""+u.uid+Ke.CLIENT_INFO_SEPARATOR+u.utid,type:h.CcsCredentialType.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}else c=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&c)switch(c.type){case h.CcsCredentialType.HOME_ACCOUNT_ID:try{u=ri(c.credential),n.addCcsOid(u)}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}break;case h.CcsCredentialType.UPN:n.addCcsUpn(c.credential);break}return t.tokenBodyParameters&&n.addExtraQueryParameters(t.tokenBodyParameters),t.enableSpaAuthorizationCode&&(!t.tokenBodyParameters||!t.tokenBodyParameters[z.RETURN_SPA_CODE])&&n.addExtraQueryParameters((l={},l[z.RETURN_SPA_CODE]="1",l)),[2,n.createQueryString()]}})})},e.prototype.createAuthCodeUrlQueryString=function(t){return M(this,void 0,void 0,function(){var n,i,o,a,s,s,c,u,l;return D(this,function(p){switch(p.label){case 0:if(n=new ot,n.addClientId(this.config.authOptions.clientId),i=ko(t.scopes||[],t.extraScopesToConsent||[]),n.addScopes(i),n.addRedirectUri(t.redirectUri),o=t.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(o),n.addResponseMode(t.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),t.codeChallenge&&t.codeChallengeMethod&&n.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod),t.prompt&&n.addPrompt(t.prompt),t.domainHint&&n.addDomainHint(t.domainHint),t.prompt!==ln.SELECT_ACCOUNT)if(t.sid&&t.prompt===ln.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(t.sid);else if(t.account){if(a=this.extractAccountSid(t.account),a&&t.prompt===ln.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{s=ri(t.account.homeAccountId),n.addCcsOid(s)}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}}else if(t.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(t.loginHint),n.addCcsUpn(t.loginHint);else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(t.account.username);try{s=ri(t.account.homeAccountId),n.addCcsOid(s)}catch(d){this.logger.verbose("Could not parse home account ID for CCS Header: "+d)}}}else t.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(t.loginHint),n.addCcsUpn(t.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&n.addNonce(t.nonce),t.state&&n.addState(t.state),(!B.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),t.extraQueryParameters&&n.addExtraQueryParameters(t.extraQueryParameters),t.nativeBroker?(n.addNativeBroker(),t.authenticationScheme!==h.AuthenticationScheme.POP?[3,3]:(c=new ii(this.cryptoUtils),[4,c.generateCnf(t)])):[3,3];case 1:return u=p.sent(),[4,c.generateCnfHash(u)];case 2:l=p.sent(),n.addPopToken(l),p.label=3;case 3:return[2,n.createQueryString()]}})})},e.prototype.createLogoutUrlQueryString=function(t){var n=new ot;return t.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(t.postLogoutRedirectUri),t.correlationId&&n.addCorrelationId(t.correlationId),t.idTokenHint&&n.addIdTokenHint(t.idTokenHint),t.state&&n.addState(t.state),t.logoutHint&&n.addLogoutHint(t.logoutHint),t.extraQueryParameters&&n.addExtraQueryParameters(t.extraQueryParameters),n.createQueryString()},e.prototype.extractAccountSid=function(t){if(t.idTokenClaims){var n=t.idTokenClaims;return n.sid||null}return null},e}(Rr),Rx=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n,i,o,a;return D(this,function(s){switch(s.label){case 0:return[4,this.getDeviceCode(t)];case 1:return n=s.sent(),t.deviceCodeCallback(n),i=ge.nowSeconds(),[4,this.acquireTokenWithDeviceCode(t,n)];case 2:return o=s.sent(),a=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),a.validateTokenResponse(o),[4,a.handleServerTokenResponse(o,this.authority,i,t)];case 3:return[2,s.sent()]}})})},e.prototype.getDeviceCode=function(t){return M(this,void 0,void 0,function(){var n,i,o;return D(this,function(a){return n=this.createQueryString(t),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[2,this.executePostRequestToDeviceCodeEndpoint(this.authority.deviceCodeEndpoint,n,i,o)]})})},e.prototype.executePostRequestToDeviceCodeEndpoint=function(t,n,i,o){return M(this,void 0,void 0,function(){var a,s,c,u,l,p,d;return D(this,function(f){switch(f.label){case 0:return[4,this.networkManager.sendPostRequest(o,t,{body:n,headers:i,proxyUrl:this.config.systemOptions.proxyUrl})];case 1:return a=f.sent().body,s=a.user_code,c=a.device_code,u=a.verification_uri,l=a.expires_in,p=a.interval,d=a.message,[2,{userCode:s,deviceCode:c,verificationUri:u,expiresIn:l,interval:p,message:d}]}})})},e.prototype.createQueryString=function(t){var n=new ot;return n.addScopes(t.scopes),n.addClientId(this.config.authOptions.clientId),(!B.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),n.createQueryString()},e.prototype.continuePolling=function(t,n,i){if(i)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),O.createDeviceCodeCancelledError();if(n&&n<t&&ge.nowSeconds()>n)throw this.logger.error("User defined timeout for device code polling reached. The timeout was set for "+n),O.createUserTimeoutReachedError();if(ge.nowSeconds()>t)throw n&&this.logger.verbose("User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for "+n),this.logger.error("Device code expired. Expiration time of device code was "+t),O.createDeviceCodeExpiredError();return!0},e.prototype.acquireTokenWithDeviceCode=function(t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return D(this,function(p){switch(p.label){case 0:i=this.createTokenRequestBody(t,n),o=this.createTokenRequestHeaders(),a=t.timeout?ge.nowSeconds()+t.timeout:void 0,s=ge.nowSeconds()+n.expiresIn,c=n.interval*1e3,p.label=1;case 1:return this.continuePolling(s,a,t.cancel)?(u={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},[4,this.executePostToTokenEndpoint(this.authority.tokenEndpoint,i,o,u)]):[3,6];case 2:return l=p.sent(),l.body&&l.body.error===T.AUTHORIZATION_PENDING?(this.logger.info(l.body.error_description||"Authorization pending. Continue polling."),[4,ge.delay(c)]):[3,4];case 3:return p.sent(),[3,5];case 4:return this.logger.verbose("Authorization completed successfully. Polling stopped."),[2,l.body];case 5:return[3,1];case 6:throw this.logger.error("Polling stopped for unknown reasons."),O.createDeviceCodeUnknownError()}})})},e.prototype.createTokenRequestBody=function(t,n){var i=new ot;i.addScopes(t.scopes),i.addClientId(this.config.authOptions.clientId),i.addGrantType(Jt.DEVICE_CODE_GRANT),i.addDeviceCode(n.deviceCode);var o=t.correlationId||this.config.cryptoInterface.createNewGuid();return i.addCorrelationId(o),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&i.addServerTelemetry(this.serverTelemetryManager),(!B.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(t.claims,this.config.authOptions.clientCapabilities),i.createQueryString()},e}(Rr),Uh=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n,i,o;return D(this,function(a){switch(a.label){case 0:return n=ge.nowSeconds(),[4,this.executeTokenRequest(t,this.authority)];case 1:return i=a.sent(),o=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),o.validateTokenResponse(i.body),[2,o.handleServerTokenResponse(i.body,this.authority,n,t,void 0,void 0,!0)]}})})},e.prototype.acquireTokenByRefreshToken=function(t){return M(this,void 0,void 0,function(){var n,i,o;return D(this,function(a){if(!t)throw ae.createEmptyTokenRequestError();if(!t.account)throw O.createNoAccountInSilentRequestError();if(n=this.cacheManager.isAppMetadataFOCI(t.account.environment,this.config.authOptions.clientId),n)try{return[2,this.acquireTokenWithCachedRefreshToken(t,!0)]}catch(s){if(i=s instanceof Ar&&s.errorCode===Oo.noTokensFoundError.code,o=s instanceof ni&&s.errorCode===wh.INVALID_GRANT_ERROR&&s.subError===wh.CLIENT_MISMATCH_ERROR,i||o)return[2,this.acquireTokenWithCachedRefreshToken(t,!1)];throw s}return[2,this.acquireTokenWithCachedRefreshToken(t,!1)]})})},e.prototype.acquireTokenWithCachedRefreshToken=function(t,n){return M(this,void 0,void 0,function(){var i,o;return D(this,function(a){if(i=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,t.account,n),!i)throw Ar.createNoTokensFoundError();return o=me(me({},t),{refreshToken:i.secret,authenticationScheme:t.authenticationScheme||h.AuthenticationScheme.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:h.CcsCredentialType.HOME_ACCOUNT_ID}}),[2,this.acquireToken(o)]})})},e.prototype.executeTokenRequest=function(t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c;return D(this,function(u){switch(u.label){case 0:return[4,this.createTokenRequestBody(t)];case 1:return i=u.sent(),o=this.createTokenQueryParameters(t),a=this.createTokenRequestHeaders(t.ccsCredential),s={clientId:this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},c=$e.appendQueryString(n.tokenEndpoint,o),[2,this.executePostToTokenEndpoint(c,i,a,s)]}})})},e.prototype.createTokenQueryParameters=function(t){var n=new ot;return t.tokenQueryParameters&&n.addExtraQueryParameters(t.tokenQueryParameters),n.createQueryString()},e.prototype.createTokenRequestBody=function(t){return M(this,void 0,void 0,function(){var n,i,o,a,s,c;return D(this,function(u){switch(u.label){case 0:return n=new ot,n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes),n.addGrantType(Jt.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),i=t.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(i),n.addRefreshToken(t.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(o=this.config.clientCredentials.clientAssertion,n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)),t.authenticationScheme!==h.AuthenticationScheme.POP?[3,2]:(a=new ii(this.cryptoUtils),[4,a.generateCnf(t)]);case 1:return s=u.sent(),n.addPopToken(s),[3,3];case 2:if(t.authenticationScheme===h.AuthenticationScheme.SSH)if(t.sshJwk)n.addSshJwk(t.sshJwk);else throw ae.createMissingSshJwkError();u.label=3;case 3:if((!B.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case h.CcsCredentialType.HOME_ACCOUNT_ID:try{c=ri(t.ccsCredential.credential),n.addCcsOid(c)}catch(l){this.logger.verbose("Could not parse home account ID for CCS Header: "+l)}break;case h.CcsCredentialType.UPN:n.addCcsUpn(t.ccsCredential.credential);break}return[2,n.createQueryString()]}})})},e}(Rr),Ox=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n;return D(this,function(i){switch(i.label){case 0:return this.scopeSet=new et(t.scopes||[]),t.skipCache?[4,this.executeTokenRequest(t,this.authority)]:[3,2];case 1:return[2,i.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:return n=i.sent(),n?[2,n]:[3,4];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,i.sent()]}})})},e.prototype.getCachedAuthenticationResult=function(t){var n,i;return M(this,void 0,void 0,function(){var o;return D(this,function(a){switch(a.label){case 0:return o=this.readAccessTokenFromCache(),o?ge.isTokenExpired(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?((i=this.serverTelemetryManager)===null||i===void 0||i.setCacheOutcome(it.CACHED_ACCESS_TOKEN_EXPIRED),[2,null]):[4,xt.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:null,idToken:null,accessToken:o,refreshToken:null,appMetadata:null},!0,t)]:((n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(it.NO_CACHED_ACCESS_TOKEN),[2,null]);case 1:return[2,a.sent()]}})})},e.prototype.readAccessTokenFromCache=function(){var t={homeAccountId:T.EMPTY_STRING,environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:h.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()},n=this.cacheManager.getCredentialsFilteredBy(t),i=Object.keys(n.accessTokens).map(function(o){return n.accessTokens[o]});if(i.length<1)return null;if(i.length>1)throw O.createMultipleMatchingTokensInCacheError();return i[0]},e.prototype.executeTokenRequest=function(t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return D(this,function(p){switch(p.label){case 0:return i=this.createTokenRequestBody(t),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},s=ge.nowSeconds(),[4,this.executePostToTokenEndpoint(n.tokenEndpoint,i,o,a)];case 1:return c=p.sent(),u=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),u.validateTokenResponse(c.body),[4,u.handleServerTokenResponse(c.body,this.authority,s,t)];case 2:return l=p.sent(),[2,l]}})})},e.prototype.createTokenRequestBody=function(t){var n=new ot;n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes,!1),n.addGrantType(Jt.CLIENT_CREDENTIALS_GRANT),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return(!B.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),n.createQueryString()},e}(Rr),kx=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n;return D(this,function(i){switch(i.label){case 0:return this.scopeSet=new et(t.scopes||[]),t.skipCache?[4,this.executeTokenRequest(t,this.authority)]:[3,2];case 1:return[2,i.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:return n=i.sent(),n?[2,n]:[3,4];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,i.sent()]}})})},e.prototype.getCachedAuthenticationResult=function(t){var n;return M(this,void 0,void 0,function(){var i,o,a,s,c,u;return D(this,function(l){switch(l.label){case 0:return i=this.readAccessTokenFromCache(),!i||ge.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?((n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(i?it.NO_CACHED_ACCESS_TOKEN:it.CACHED_ACCESS_TOKEN_EXPIRED),[2,null]):(o=this.readIdTokenFromCache(t),s=null,o&&(a=new Bt(o.secret,this.config.cryptoInterface),c=a.claims.oid?a.claims.oid:a.claims.sub,u={homeAccountId:o.homeAccountId,environment:o.environment,tenantId:o.realm,username:T.EMPTY_STRING,localAccountId:c||T.EMPTY_STRING},s=this.readAccountFromCache(u)),[4,xt.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:i,idToken:o,refreshToken:null,appMetadata:null},!0,t,a)]);case 1:return[2,l.sent()]}})})},e.prototype.readAccessTokenFromCache=function(){var t={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:h.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()},n=this.cacheManager.getCredentialsFilteredBy(t),i=Object.keys(n.accessTokens).map(function(a){return n.accessTokens[a]}),o=i.length;if(o<1)return null;if(o>1)throw O.createMultipleMatchingTokensInCacheError();return i[0]},e.prototype.readIdTokenFromCache=function(t){var n={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:h.CredentialType.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,oboAssertion:t.oboAssertion},i=this.cacheManager.getCredentialsFilteredBy(n),o=Object.keys(i.idTokens).map(function(a){return i.idTokens[a]});return o.length<1?null:o[0]},e.prototype.readAccountFromCache=function(t){return this.cacheManager.readAccountFromCache(t)},e.prototype.executeTokenRequest=function(t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return D(this,function(p){switch(p.label){case 0:return i=this.createTokenRequestBody(t),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid},s=ge.nowSeconds(),[4,this.executePostToTokenEndpoint(n.tokenEndpoint,i,o,a)];case 1:return c=p.sent(),u=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),u.validateTokenResponse(c.body),[4,u.handleServerTokenResponse(c.body,this.authority,s,t)];case 2:return l=p.sent(),[2,l]}})})},e.prototype.createTokenRequestBody=function(t){var n=new ot;n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes),n.addGrantType(Jt.JWT_BEARER),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),n.addRequestTokenUse(z.ON_BEHALF_OF),n.addOboAssertion(t.oboAssertion),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return n.createQueryString()},e}(Rr),Nx=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n,i;return D(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.acquireCachedToken(t)];case 1:return[2,o.sent()];case 2:if(n=o.sent(),n instanceof O&&n.errorCode===I.tokenRefreshRequired.code)return i=new Uh(this.config),[2,i.acquireTokenByRefreshToken(t)];throw n;case 3:return[2]}})})},e.prototype.acquireCachedToken=function(t){var n,i,o,a;return M(this,void 0,void 0,function(){var s,c;return D(this,function(u){switch(u.label){case 0:if(!t)throw ae.createEmptyTokenRequestError();if(t.forceRefresh)throw(n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(it.FORCE_REFRESH),this.logger.info("SilentFlowClient:acquireCachedToken - Skipping cache because forceRefresh is true."),O.createRefreshRequiredError();if(!t.account)throw O.createNoAccountInSilentRequestError();if(s=t.authority||this.authority.getPreferredCache(),c=this.cacheManager.readCacheRecord(t.account,this.config.authOptions.clientId,t,s),c.accessToken){if(ge.wasClockTurnedBack(c.accessToken.cachedAt)||ge.isTokenExpired(c.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw(o=this.serverTelemetryManager)===null||o===void 0||o.setCacheOutcome(it.CACHED_ACCESS_TOKEN_EXPIRED),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token is expired or will expire within "+this.config.systemOptions.tokenRenewalOffsetSeconds+" seconds."),O.createRefreshRequiredError();if(c.accessToken.refreshOn&&ge.isTokenExpired(c.accessToken.refreshOn,0))throw(a=this.serverTelemetryManager)===null||a===void 0||a.setCacheOutcome(it.REFRESH_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'."),O.createRefreshRequiredError()}else throw(i=this.serverTelemetryManager)===null||i===void 0||i.setCacheOutcome(it.NO_CACHED_ACCESS_TOKEN),this.logger.info("SilentFlowClient:acquireCachedToken - No access token found in cache for the given properties."),O.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(c,t)];case 1:return[2,u.sent()]}})})},e.prototype.generateResultFromCacheRecord=function(t,n){return M(this,void 0,void 0,function(){var i;return D(this,function(o){switch(o.label){case 0:return t.idToken&&(i=new Bt(t.idToken.secret,this.config.cryptoInterface)),[4,xt.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,n,i)];case 1:return[2,o.sent()]}})})},e}(Rr),Mx=function(r){Re(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return M(this,void 0,void 0,function(){var n,i,o,a;return D(this,function(s){switch(s.label){case 0:return this.logger.info("in acquireToken call"),n=ge.nowSeconds(),[4,this.executeTokenRequest(this.authority,t)];case 1:return i=s.sent(),o=new xt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),o.validateTokenResponse(i.body),a=o.handleServerTokenResponse(i.body,this.authority,n,t),[2,a]}})})},e.prototype.executeTokenRequest=function(t,n){return M(this,void 0,void 0,function(){var i,o,a;return D(this,function(s){return i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},o=this.createTokenRequestBody(n),a=this.createTokenRequestHeaders({credential:n.username,type:h.CcsCredentialType.UPN}),[2,this.executePostToTokenEndpoint(t.tokenEndpoint,o,a,i)]})})},e.prototype.createTokenRequestBody=function(t){var n=new ot;n.addClientId(this.config.authOptions.clientId),n.addUsername(t.username),n.addPassword(t.password),n.addScopes(t.scopes),n.addResponseTypeForTokenAndIdToken(),n.addGrantType(Jt.RESOURCE_OWNER_PASSWORD_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return(!B.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.username&&n.addCcsUpn(t.username),n.createQueryString()},e}(Rr);function Dx(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("issuer")}h.ProtocolMode=void 0;(function(r){r.AAD="AAD",r.OIDC="OIDC"})(h.ProtocolMode||(h.ProtocolMode={}));var Lh=function(){function r(){this.expiresAt=ge.nowSeconds()+ei.REFRESH_TIME_SECONDS}return r.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},r.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t},r.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},r.prototype.resetExpiresAt=function(){this.expiresAt=ge.nowSeconds()+ei.REFRESH_TIME_SECONDS},r.prototype.isExpired=function(){return this.expiresAt<=ge.nowSeconds()},r.isAuthorityMetadataEntity=function(e,t){return t?e.indexOf(ei.CACHE_KEY)===0&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt"):!1},r}();function Ux(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}var Lx=function(){function r(e){this.networkInterface=e}return r.prototype.detectRegion=function(e,t,n){return M(this,void 0,void 0,function(){var i,o,a,s,c;return D(this,function(u){switch(u.label){case 0:if(i=e,i)return[3,8];o=r.IMDS_OPTIONS,n&&(o.proxyUrl=n),u.label=1;case 1:return u.trys.push([1,6,,7]),[4,this.getRegionFromIMDS(T.IMDS_VERSION,o)];case 2:return a=u.sent(),a.status===un.httpSuccess&&(i=a.body,t.region_source=Wt.IMDS),a.status!==un.httpBadRequest?[3,5]:[4,this.getCurrentVersion(o)];case 3:return s=u.sent(),s?[4,this.getRegionFromIMDS(s,o)]:(t.region_source=Wt.FAILED_AUTO_DETECTION,[2,null]);case 4:c=u.sent(),c.status===un.httpSuccess&&(i=c.body,t.region_source=Wt.IMDS),u.label=5;case 5:return[3,7];case 6:return u.sent(),t.region_source=Wt.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:t.region_source=Wt.ENVIRONMENT_VARIABLE,u.label=9;case 9:return i||(t.region_source=Wt.FAILED_AUTO_DETECTION),[2,i||null]}})})},r.prototype.getRegionFromIMDS=function(e,t){return M(this,void 0,void 0,function(){return D(this,function(n){return[2,this.networkInterface.sendGetRequestAsync(T.IMDS_ENDPOINT+"?api-version="+e+"&format=text",t,T.IMDS_TIMEOUT)]})})},r.prototype.getCurrentVersion=function(e){return M(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.networkInterface.sendGetRequestAsync(T.IMDS_ENDPOINT+"?format=json",e)];case 1:return t=n.sent(),t.status===un.httpBadRequest&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?[2,t.body["newest-versions"][0]]:[2,null];case 2:return n.sent(),[2,null];case 3:return[2]}})})},r.IMDS_OPTIONS={headers:{Metadata:"true"}},r}(),Bh=function(){function r(e,t,n,i,o){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=i,this.regionDiscovery=new Lx(t),this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.proxyUrl=o||T.EMPTY_STRING}return Object.defineProperty(r.prototype,"authorityType",{get:function(){var e=this.canonicalAuthorityUrlComponents.PathSegments;return e.length&&e[0].toLowerCase()===T.ADFS?h.AuthorityType.Adfs:h.AuthorityType.Default},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new $e(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.authorization_endpoint);return this.replaceTenant(e)}else throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint);return this.replaceTenant(e)}else throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));return this.replaceTenant(e)}else throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw O.createLogoutNotSupportedError();var e=this.replacePath(this.metadata.end_session_endpoint);return this.replaceTenant(e)}else throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.issuer);return this.replaceTenant(e)}else throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),r.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},r.prototype.replacePath=function(e){var t=e,n=new $e(this.metadata.canonical_authority),i=n.getUrlComponents().PathSegments,o=this.canonicalAuthorityUrlComponents.PathSegments;return o.forEach(function(a,s){var c=i[s];a!==c&&(t=t.replace("/"+c+"/","/"+a+"/"))}),t},Object.defineProperty(r.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===h.AuthorityType.Adfs||this.protocolMode===h.ProtocolMode.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),r.prototype.discoveryComplete=function(){return!!this.metadata},r.prototype.resolveEndpointsAsync=function(){return M(this,void 0,void 0,function(){var e,t,n,i;return D(this,function(o){switch(o.label){case 0:return e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort),e||(e=new Lh,e.updateCanonicalAuthority(this.canonicalAuthority)),[4,this.updateCloudDiscoveryMetadata(e)];case 1:return t=o.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network),[4,this.updateEndpointMetadata(e)];case 2:return n=o.sent(),t!==wt.CACHE&&n!==wt.CACHE&&(e.resetExpiresAt(),e.updateCanonicalAuthority(this.canonicalAuthority)),i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache),this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e,[2]}})})},r.prototype.updateEndpointMetadata=function(e){var t;return M(this,void 0,void 0,function(){var n,i,o;return D(this,function(a){switch(a.label){case 0:return n=this.getEndpointMetadataFromConfig(),n?(e.updateEndpointMetadata(n,!1),[2,wt.CONFIG]):this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!e.isExpired()?[2,wt.CACHE]:[4,this.getEndpointMetadataFromNetwork()];case 1:return n=a.sent(),n?!((t=this.authorityOptions.azureRegionConfiguration)===null||t===void 0)&&t.azureRegion?[4,this.regionDiscovery.detectRegion(this.authorityOptions.azureRegionConfiguration.environmentRegion,this.regionDiscoveryMetadata,this.proxyUrl)]:[3,3]:[3,4];case 2:i=a.sent(),o=this.authorityOptions.azureRegionConfiguration.azureRegion===T.AZURE_REGION_AUTO_DISCOVER_FLAG?i:this.authorityOptions.azureRegionConfiguration.azureRegion,this.authorityOptions.azureRegionConfiguration.azureRegion===T.AZURE_REGION_AUTO_DISCOVER_FLAG?this.regionDiscoveryMetadata.region_outcome=i?_r.AUTO_DETECTION_REQUESTED_SUCCESSFUL:_r.AUTO_DETECTION_REQUESTED_FAILED:i?this.regionDiscoveryMetadata.region_outcome=this.authorityOptions.azureRegionConfiguration.azureRegion===i?_r.CONFIGURED_MATCHES_DETECTED:_r.CONFIGURED_NOT_DETECTED:this.regionDiscoveryMetadata.region_outcome=_r.CONFIGURED_NO_AUTO_DETECTION,o&&(this.regionDiscoveryMetadata.region_used=o,n=r.replaceWithRegionalInformation(n,o)),a.label=3;case 3:return e.updateEndpointMetadata(n,!0),[2,wt.NETWORK];case 4:throw O.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}})})},r.prototype.isAuthoritySameType=function(e){var t=new $e(e.canonical_authority),n=t.getUrlComponents().PathSegments;return n.length===this.canonicalAuthorityUrlComponents.PathSegments.length},r.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ae.createInvalidAuthorityMetadataError()}return null},r.prototype.getEndpointMetadataFromNetwork=function(){return M(this,void 0,void 0,function(){var e,t;return D(this,function(n){switch(n.label){case 0:e={},this.proxyUrl&&(e.proxyUrl=this.proxyUrl),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint,e)];case 2:return t=n.sent(),[2,Dx(t.body)?t.body:null];case 3:return n.sent(),[2,null];case 4:return[2]}})})},r.prototype.updateCloudDiscoveryMetadata=function(e){return M(this,void 0,void 0,function(){var t;return D(this,function(n){switch(n.label){case 0:return t=this.getCloudDiscoveryMetadataFromConfig(),t?(e.updateCloudDiscoveryMetadata(t,!1),[2,wt.CONFIG]):this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!e.isExpired()?[2,wt.CACHE]:[4,this.getCloudDiscoveryMetadataFromNetwork()];case 1:if(t=n.sent(),t)return e.updateCloudDiscoveryMetadata(t,!0),[2,wt.NETWORK];throw ae.createUntrustedAuthorityError()}})})},r.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityOptions.cloudDiscoveryMetadata)try{var e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=r.getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(t)return t}catch{throw ae.createInvalidCloudDiscoveryMetadataError()}return this.isInKnownAuthorities()?r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort):null},r.prototype.getCloudDiscoveryMetadataFromNetwork=function(){return M(this,void 0,void 0,function(){var e,t,n,i,o;return D(this,function(a){switch(a.label){case 0:e=""+T.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",t={},this.proxyUrl&&(t.proxyUrl=this.proxyUrl),n=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(e,t)];case 2:return i=a.sent(),o=Ux(i.body)?i.body.metadata:[],o.length===0?[2,null]:(n=r.getCloudDiscoveryMetadataFromNetworkResponse(o,this.hostnameAndPort),[3,4]);case 3:return a.sent(),[2,null];case 4:return n||(n=r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,n]}})})},r.prototype.isInKnownAuthorities=function(){var e=this,t=this.authorityOptions.knownAuthorities.filter(function(n){return $e.getDomainFromUrl(n).toLowerCase()===e.hostnameAndPort});return t.length>0},r.generateAuthority=function(e,t){var n;if(t&&t.azureCloudInstance!==h.AzureCloudInstance.None){var i=t.tenant?t.tenant:T.DEFAULT_COMMON_TENANT;n=t.azureCloudInstance+"/"+i+"/"}return n||e},r.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},r.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.aliases.indexOf(t)>-1)return i}return null},r.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw O.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},r.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},r.isPublicCloudAuthority=function(e){return T.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},r.buildRegionalAuthorityString=function(e,t,n){var i=new $e(e);i.validateAsUri();var o=i.getUrlComponents(),a=t+"."+o.HostNameAndPort;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=t+"."+T.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var s=$e.constructAuthorityUriFromObject(me(me({},i.getUrlComponents()),{HostNameAndPort:a})).urlString;return n?s+"?"+n:s},r.replaceWithRegionalInformation=function(e,t){return e.authorization_endpoint=r.buildRegionalAuthorityString(e.authorization_endpoint,t),e.token_endpoint=r.buildRegionalAuthorityString(e.token_endpoint,t,"allowestsrnonmsi=true"),e.end_session_endpoint&&(e.end_session_endpoint=r.buildRegionalAuthorityString(e.end_session_endpoint,t)),e},r}(),Bx=function(){function r(){}return r.createDiscoveredInstance=function(e,t,n,i,o){return M(this,void 0,void 0,function(){var a,s;return D(this,function(c){switch(c.label){case 0:a=r.createInstance(e,t,n,i,o),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,a.resolveEndpointsAsync()];case 2:return c.sent(),[2,a];case 3:throw s=c.sent(),O.createEndpointDiscoveryIncompleteError(s);case 4:return[2]}})})},r.createInstance=function(e,t,n,i,o){if(B.isEmpty(e))throw ae.createUrlEmptyError();return new Bh(e,t,n,i,o)},r}(),iu=function(){function r(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return r.isServerTelemetryEntity=function(e,t){var n=e.indexOf(Pe.CACHE_KEY)===0,i=!0;return t&&(i=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&i},r}(),qx=function(){function r(){}return r.isThrottlingEntity=function(e,t){var n=!1;e&&(n=e.indexOf(ti.THROTTLING_PREFIX)===0);var i=!0;return t&&(i=t.hasOwnProperty("throttleTime")),n&&i},r}(),jx={sendGetRequestAsync:function(){var r="Network interface - sendGetRequestAsync() has not been implemented for the Network interface.";return Promise.reject(V.createUnexpectedError(r))},sendPostRequestAsync:function(){var r="Network interface - sendPostRequestAsync() has not been implemented for the Network interface.";return Promise.reject(V.createUnexpectedError(r))}},Fx=function(){function r(e){this.headers=e}return r.prototype.getShrNonce=function(){var e=this.headers[Ve.AuthenticationInfo];if(e){var t=this.parseChallenges(e);if(t.nextnonce)return t.nextnonce;throw ae.createInvalidAuthenticationHeaderError(Ve.AuthenticationInfo,"nextnonce challenge is missing.")}var n=this.headers[Ve.WWWAuthenticate];if(n){var i=this.parseChallenges(n);if(i.nonce)return i.nonce;throw ae.createInvalidAuthenticationHeaderError(Ve.WWWAuthenticate,"nonce challenge is missing.")}throw ae.createMissingNonceAuthenticationHeadersError()},r.prototype.parseChallenges=function(e){var t=e.indexOf(" "),n=e.substr(t+1).split(","),i={};return n.forEach(function(o){var a=o.split("="),s=a[0],c=a[1];i[s]=unescape(c.replace(/['"]+/g,T.EMPTY_STRING))}),i},r}(),zx=function(){function r(e,t){this.cacheOutcome=it.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||T.EMPTY_STRING,this.wrapperVer=e.wrapperVer||T.EMPTY_STRING,this.telemetryCacheKey=Pe.CACHE_KEY+Ke.CACHE_KEY_SEPARATOR+e.clientId}return r.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+Pe.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(Pe.VALUE_SEPARATOR),n=this.getRegionDiscoveryFields(),i=[e,n].join(Pe.VALUE_SEPARATOR);return[Pe.SCHEMA_VERSION,i,t].join(Pe.CATEGORY_SEPARATOR)},r.prototype.generateLastRequestHeaderValue=function(){var e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Pe.VALUE_SEPARATOR),i=e.errors.slice(0,t).join(Pe.VALUE_SEPARATOR),o=e.errors.length,a=t<o?Pe.OVERFLOW_TRUE:Pe.OVERFLOW_FALSE,s=[o,a].join(Pe.VALUE_SEPARATOR);return[Pe.SCHEMA_VERSION,e.cacheHits,n,i,s].join(Pe.CATEGORY_SEPARATOR)},r.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=Pe.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),B.isEmpty(e.subError)?B.isEmpty(e.errorCode)?!!e&&e.toString()?t.errors.push(e.toString()):t.errors.push(Pe.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},r.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},r.prototype.getLastRequests=function(){var e=new iu,t=this.cacheManager.getServerTelemetry(this.telemetryCacheKey);return t||e},r.prototype.clearTelemetryCache=function(){var e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.errors.length;if(t===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{var i=new iu;i.failedRequests=e.failedRequests.slice(t*2),i.errors=e.errors.slice(t),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}},r.maxErrorsToSend=function(e){var t,n=0,i=0,o=e.errors.length;for(t=0;t<o;t++){var a=e.failedRequests[2*t]||T.EMPTY_STRING,s=e.failedRequests[2*t+1]||T.EMPTY_STRING,c=e.errors[t]||T.EMPTY_STRING;if(i+=a.toString().length+s.toString().length+c.length+3,i<Pe.MAX_LAST_HEADER_BYTES)n+=1;else break}return n},r.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||T.EMPTY_STRING),e.push(this.regionSource||T.EMPTY_STRING),e.push(this.regionOutcome||T.EMPTY_STRING),e.join(",")},r.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},r.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},r}();h.PerformanceEvents=void 0;(function(r){r.AcquireTokenByCode="acquireTokenByCode",r.AcquireTokenByRefreshToken="acquireTokenByRefreshToken",r.AcquireTokenSilent="acquireTokenSilent",r.AcquireTokenSilentAsync="acquireTokenSilentAsync",r.AcquireTokenPopup="acquireTokenPopup",r.CryptoOptsGetPublicKeyThumbprint="cryptoOptsGetPublicKeyThumbprint",r.CryptoOptsSignJwt="cryptoOptsSignJwt",r.SilentCacheClientAcquireToken="silentCacheClientAcquireToken",r.SilentIframeClientAcquireToken="silentIframeClientAcquireToken",r.SilentRefreshClientAcquireToken="silentRefreshClientAcquireToken",r.SsoSilent="ssoSilent",r.StandardInteractionClientGetDiscoveredAuthority="standardInteractionClientGetDiscoveredAuthority",r.FetchAccountIdWithNativeBroker="fetchAccountIdWithNativeBroker",r.NativeInteractionClientAcquireToken="nativeInteractionClientAcquireToken"})(h.PerformanceEvents||(h.PerformanceEvents={}));h.PerformanceEventStatus=void 0;(function(r){r[r.NotStarted=0]="NotStarted",r[r.InProgress=1]="InProgress",r[r.Completed=2]="Completed"})(h.PerformanceEventStatus||(h.PerformanceEventStatus={}));var qh=function(){function r(e,t,n,i,o,a){this.authority=t,this.libraryName=i,this.libraryVersion=o,this.applicationTelemetry=a,this.clientId=e,this.logger=n,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.measurementsById=new Map}return r.prototype.startMeasurement=function(e,t){var n=this,i,o,a=t||this.generateId();t||this.logger.info("PerformanceClient: No correlation id provided for "+e+", generating",a),this.logger.trace("PerformanceClient: Performance measurement started for "+e,a);var s=this.startPerformanceMeasuremeant(e,a);s.startMeasurement();var c={eventId:this.generateId(),status:h.PerformanceEventStatus.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,appName:(i=this.applicationTelemetry)===null||i===void 0?void 0:i.appName,appVersion:(o=this.applicationTelemetry)===null||o===void 0?void 0:o.appVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:a};return this.cacheEventByCorrelationId(c),this.cacheMeasurement(c,s),{endMeasurement:function(u){var l=n.endMeasurement(me(me({},c),u));return l&&n.cacheEventByCorrelationId(l),l},flushMeasurement:function(){return n.flushMeasurements(c.name,c.correlationId)},discardMeasurement:function(){return n.discardMeasurements(c.correlationId)},measurement:s,event:c}},r.prototype.endMeasurement=function(e){var t=this.measurementsById.get(e.eventId);if(t){this.measurementsById.delete(e.eventId),t.endMeasurement();var n=t.flushMeasurement();if(n!==null){this.logger.trace("PerformanceClient: Performance measurement ended for "+e.name+": "+n+" ms",e.correlationId);var i=me(me({durationMs:Math.round(n)},e),{status:h.PerformanceEventStatus.Completed});return i}else this.logger.trace("PerformanceClient: Performance measurement not taken",e.correlationId)}else this.logger.trace("PerformanceClient: Measurement not found for "+e.eventId,e.correlationId);return null},r.prototype.cacheEventByCorrelationId=function(e){var t=this.eventsByCorrelationId.get(e.correlationId);t?(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" added/updated",e.correlationId),t.set(e.eventId,e)):(this.logger.trace("PerformanceClient: Performance measurement for "+e.name+" started",e.correlationId),this.eventsByCorrelationId.set(e.correlationId,new Map().set(e.eventId,e)))},r.prototype.cacheMeasurement=function(e,t){this.measurementsById.set(e.eventId,t)},r.prototype.flushMeasurements=function(e,t){var n=this;this.logger.trace("PerformanceClient: Performance measurements flushed for "+e,t);var i=this.eventsByCorrelationId.get(t);if(i){this.discardMeasurements(t);var o=[];i.forEach(function(l){if(l.name!==e&&l.status!==h.PerformanceEventStatus.Completed){n.logger.trace("PerformanceClient: Incomplete submeasurement "+l.name+" found for "+e,t);var p=n.endMeasurement(l);p&&o.push(p)}o.push(l)});var a=o.sort(function(l,p){return l.startTimeMs-p.startTimeMs}),s=a.filter(function(l){return l.name===e&&l.status===h.PerformanceEventStatus.Completed});if(s.length>0){s.length>1&&this.logger.verbose("PerformanceClient: Multiple distinct top-level performance events found, using the first",t);var c=s[0];this.logger.verbose("PerformanceClient: Measurement found for "+e,t);var u=a.reduce(function(l,p){if(p.name!==e){n.logger.trace("PerformanceClient: Complete submeasurement found for "+p.name,t);var d=p.name+"DurationMs";l[d]?n.logger.verbose("PerformanceClient: Submeasurement for "+e+" already exists for "+p.name+", ignoring",t):l[d]=p.durationMs}return l},c);this.emitEvents([u],u.correlationId)}else this.logger.verbose("PerformanceClient: No completed top-level measurements found for "+e,t)}else this.logger.verbose("PerformanceClient: No measurements found",t)},r.prototype.discardMeasurements=function(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e)},r.prototype.addPerformanceCallback=function(e){var t=this.generateId();return this.callbacks.set(t,e),this.logger.verbose("PerformanceClient: Performance callback registered with id: "+t),t},r.prototype.removePerformanceCallback=function(e){var t=this.callbacks.delete(e);return t?this.logger.verbose("PerformanceClient: Performance callback "+e+" removed."):this.logger.verbose("PerformanceClient: Performance callback "+e+" not removed."),t},r.prototype.emitEvents=function(e,t){var n=this;this.logger.verbose("PerformanceClient: Emitting performance events",t),this.callbacks.forEach(function(i,o){n.logger.trace("PerformanceClient: Emitting event to callback "+o,t),i.apply(null,[e])})},r}(),Hx=function(){function r(){}return r.prototype.startMeasurement=function(){},r.prototype.endMeasurement=function(){},r.prototype.flushMeasurement=function(){return null},r}(),Gx=function(r){Re(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.generateId=function(){return"callback-id"},e.prototype.startPerformanceMeasuremeant=function(){return new Hx},e}(qh);h.AccessTokenEntity=Oh;h.AccountEntity=Sr;h.AppMetadataEntity=Mh;h.AuthError=V;h.AuthErrorMessage=eu;h.AuthToken=Bt;h.AuthenticationHeaderParser=Fx;h.Authority=Bh;h.AuthorityFactory=Bx;h.AuthorityMetadataEntity=Lh;h.AuthorizationCodeClient=Px;h.CacheManager=_h;h.ClientAuthError=O;h.ClientAuthErrorMessage=I;h.ClientConfigurationError=ae;h.ClientConfigurationErrorMessage=F;h.ClientCredentialClient=Ox;h.Constants=T;h.CredentialEntity=pn;h.DEFAULT_CRYPTO_IMPLEMENTATION=tu;h.DEFAULT_SYSTEM_OPTIONS=Ah;h.DefaultStorageClass=Sh;h.DeviceCodeClient=Rx;h.IdToken=Bt;h.IdTokenEntity=Rh;h.InteractionRequiredAuthError=Ar;h.InteractionRequiredAuthErrorMessage=Oo;h.Logger=Ih;h.NetworkManager=Ph;h.OIDC_DEFAULT_SCOPES=ou;h.OnBehalfOfClient=kx;h.PerformanceClient=qh;h.PopTokenGenerator=ii;h.PromptValue=ln;h.ProtocolUtils=Nh;h.RefreshTokenClient=Uh;h.RefreshTokenEntity=kh;h.ScopeSet=et;h.ServerError=ni;h.ServerTelemetryEntity=iu;h.ServerTelemetryManager=zx;h.SilentFlowClient=Nx;h.StringUtils=B;h.StubPerformanceClient=Gx;h.StubbedNetworkModule=jx;h.ThrottlingEntity=qx;h.ThrottlingUtils=ru;h.TimeUtils=ge;h.TokenCacheContext=Dh;h.UrlString=$e;h.UsernamePasswordClient=Mx;h.version=au});var jh=g(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});function $x(r){return function(e,t){return new Promise((n,i)=>{r.call(this,e,t,(o,a)=>{o?i(o):n(a)})})}}cu.default=$x});var pu=g((lu,zh)=>{"use strict";var Fh=lu&&lu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},Vx=require("events"),Kx=Fh(on()),Yx=Fh(jh()),oi=Kx.default("agent-base");function Wx(r){return Boolean(r)&&typeof r.addRequest=="function"}function uu(){let{stack:r}=new Error;return typeof r!="string"?!1:r.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function No(r,e){return new No.Agent(r,e)}(function(r){class e extends Vx.EventEmitter{constructor(n,i){super();let o=i;typeof n=="function"?this.callback=n:n&&(o=n),this.timeout=null,o&&typeof o.timeout=="number"&&(this.timeout=o.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:uu()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:uu()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,o){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let o=Object.assign({},i);typeof o.secureEndpoint!="boolean"&&(o.secureEndpoint=uu()),o.host==null&&(o.host="localhost"),o.port==null&&(o.port=o.secureEndpoint?443:80),o.protocol==null&&(o.protocol=o.secureEndpoint?"https:":"http:"),o.host&&o.path&&delete o.path,delete o.agent,delete o.hostname,delete o._defaultAgent,delete o.defaultPort,delete o.createConnection,n._last=!0,n.shouldKeepAlive=!1;let a=!1,s=null,c=o.timeout||this.timeout,u=f=>{n._hadError||(n.emit("error",f),n._hadError=!0)},l=()=>{s=null,a=!0;let f=new Error(`A "socket" was not created for HTTP request before ${c}ms`);f.code="ETIMEOUT",u(f)},p=f=>{a||(s!==null&&(clearTimeout(s),s=null),u(f))},d=f=>{if(a)return;if(s!=null&&(clearTimeout(s),s=null),Wx(f)){oi("Callback returned another Agent instance %o",f.constructor.name),f.addRequest(n,o);return}if(f){f.once("free",()=>{this.freeSocket(f,o)}),n.onSocket(f);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);u(m)};if(typeof this.callback!="function"){u(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(oi("Converting legacy callback function to promise"),this.promisifiedCallback=Yx.default(this.callback)):this.promisifiedCallback=this.callback),typeof c=="number"&&c>0&&(s=setTimeout(l,c)),"port"in o&&typeof o.port!="number"&&(o.port=Number(o.port));try{oi("Resolving socket for %o request: %o",o.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,o)).then(d,p)}catch(f){Promise.reject(f).catch(p)}}freeSocket(n,i){oi("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){oi("Destroying agent %o",this.constructor.name)}}r.Agent=e,r.prototype=r.Agent.prototype})(No||(No={}));zh.exports=No});var Hh=g(si=>{"use strict";var Jx=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var Qx=Jx(on()),ai=Qx.default("https-proxy-agent:parse-proxy-response");function Xx(r){return new Promise((e,t)=>{let n=0,i=[];function o(){let p=r.read();p?l(p):r.once("readable",o)}function a(){r.removeListener("end",c),r.removeListener("error",u),r.removeListener("close",s),r.removeListener("readable",o)}function s(p){ai("onclose had error %o",p)}function c(){ai("onend")}function u(p){a(),ai("onerror %o",p),t(p)}function l(p){i.push(p),n+=p.length;let d=Buffer.concat(i,n);if(d.indexOf(`\r
\r
`)===-1){ai("have not received end of HTTP headers yet..."),o();return}let m=d.toString("ascii",0,d.indexOf(`\r
`)),y=+m.split(" ")[1];ai("got proxy server response: %o",m),e({statusCode:y,buffered:d})}r.on("error",u),r.on("close",s),r.on("end",c),o()})}si.default=Xx});var Vh=g(Or=>{"use strict";var Zx=Or&&Or.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(p){a(p)}}function c(l){try{u(n.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},dn=Or&&Or.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Or,"__esModule",{value:!0});var Gh=dn(require("net")),$h=dn(require("tls")),eI=dn(require("url")),tI=dn(require("assert")),rI=dn(on()),nI=pu(),iI=dn(Hh()),ci=rI.default("https-proxy-agent:agent"),du=class extends nI.Agent{constructor(e){let t;if(typeof e=="string"?t=eI.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");ci("creating new HttpsProxyAgent instance: %o",t),super(t);let n=Object.assign({},t);this.secureProxy=t.secureProxy||sI(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return Zx(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o;i?(ci("Creating `tls.Socket`: %o",n),o=$h.default.connect(n)):(ci("Creating `net.Socket`: %o",n),o=Gh.default.connect(n));let a=Object.assign({},n.headers),c=`CONNECT ${`${t.host}:${t.port}`} HTTP/1.1\r
`;n.auth&&(a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:u,port:l,secureEndpoint:p}=t;aI(l,p)||(u+=`:${l}`),a.Host=u,a.Connection="close";for(let E of Object.keys(a))c+=`${E}: ${a[E]}\r
`;let d=iI.default(o);o.write(`${c}\r
`);let{statusCode:f,buffered:m}=yield d;if(f===200){if(e.once("socket",oI),t.secureEndpoint){ci("Upgrading socket connection to TLS");let E=t.servername||t.host;return $h.default.connect(Object.assign(Object.assign({},cI(t,"host","hostname","path","port")),{socket:o,servername:E}))}return o}o.destroy();let y=new Gh.default.Socket({writable:!1});return y.readable=!0,e.once("socket",E=>{ci("replaying proxy buffer for failed request"),tI.default(E.listenerCount("data")>0),E.push(m),E.push(null)}),y})}};Or.default=du;function oI(r){r.resume()}function aI(r,e){return Boolean(!e&&r===80||e&&r===443)}function sI(r){return typeof r=="string"?/^https:?$/i.test(r):!1}function cI(r,...e){let t={},n;for(n in r)e.includes(n)||(t[n]=r[n]);return t}});var Mo=g((mu,Kh)=>{"use strict";var uI=mu&&mu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},fu=uI(Vh());function hu(r){return new fu.default(r)}(function(r){r.HttpsProxyAgent=fu.default,r.prototype=fu.default.prototype})(hu||(hu={}));Kh.exports=hu});var vu=g(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.default=dI;var lI=pI(require("crypto"));function pI(r){return r&&r.__esModule?r:{default:r}}var Uo=new Uint8Array(256),Do=Uo.length;function dI(){return Do>Uo.length-16&&(lI.default.randomFillSync(Uo),Do=0),Uo.slice(Do,Do+=16)}});var Yh=g(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.default=void 0;var fI=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Lo.default=fI});var ui=g(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.default=void 0;var hI=mI(Yh());function mI(r){return r&&r.__esModule?r:{default:r}}function gI(r){return typeof r=="string"&&hI.default.test(r)}var vI=gI;Bo.default=vI});var li=g(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.default=void 0;var yI=EI(ui());function EI(r){return r&&r.__esModule?r:{default:r}}var Oe=[];for(let r=0;r<256;++r)Oe.push((r+256).toString(16).substr(1));function CI(r,e=0){let t=(Oe[r[e+0]]+Oe[r[e+1]]+Oe[r[e+2]]+Oe[r[e+3]]+"-"+Oe[r[e+4]]+Oe[r[e+5]]+"-"+Oe[r[e+6]]+Oe[r[e+7]]+"-"+Oe[r[e+8]]+Oe[r[e+9]]+"-"+Oe[r[e+10]]+Oe[r[e+11]]+Oe[r[e+12]]+Oe[r[e+13]]+Oe[r[e+14]]+Oe[r[e+15]]).toLowerCase();if(!(0,yI.default)(t))throw TypeError("Stringified UUID is invalid");return t}var TI=CI;qo.default=TI});var Qh=g(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var bI=Jh(vu()),wI=Jh(li());function Jh(r){return r&&r.__esModule?r:{default:r}}var Wh,yu,Eu=0,Cu=0;function xI(r,e,t){let n=e&&t||0,i=e||new Array(16);r=r||{};let o=r.node||Wh,a=r.clockseq!==void 0?r.clockseq:yu;if(o==null||a==null){let d=r.random||(r.rng||bI.default)();o==null&&(o=Wh=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=yu=(d[6]<<8|d[7])&16383)}let s=r.msecs!==void 0?r.msecs:Date.now(),c=r.nsecs!==void 0?r.nsecs:Cu+1,u=s-Eu+(c-Cu)/1e4;if(u<0&&r.clockseq===void 0&&(a=a+1&16383),(u<0||s>Eu)&&r.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Eu=s,Cu=c,yu=a,s+=122192928e5;let l=((s&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;let p=s/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=o[d];return e||(0,wI.default)(i)}var II=xI;jo.default=II});var Tu=g(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var _I=SI(ui());function SI(r){return r&&r.__esModule?r:{default:r}}function AI(r){if(!(0,_I.default)(r))throw TypeError("Invalid UUID");let e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var PI=AI;Fo.default=PI});var bu=g(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.default=NI;kr.URL=kr.DNS=void 0;var RI=Xh(li()),OI=Xh(Tu());function Xh(r){return r&&r.__esModule?r:{default:r}}function kI(r){r=unescape(encodeURIComponent(r));let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}var Zh="6ba7b810-9dad-11d1-80b4-00c04fd430c8";kr.DNS=Zh;var em="6ba7b811-9dad-11d1-80b4-00c04fd430c8";kr.URL=em;function NI(r,e,t){function n(i,o,a,s){if(typeof i=="string"&&(i=kI(i)),typeof o=="string"&&(o=(0,OI.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+i.length);if(c.set(o),c.set(i,o.length),c=t(c),c[6]=c[6]&15|e,c[8]=c[8]&63|128,a){s=s||0;for(let u=0;u<16;++u)a[s+u]=c[u];return a}return(0,RI.default)(c)}try{n.name=r}catch{}return n.DNS=Zh,n.URL=em,n}});var tm=g(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var MI=DI(require("crypto"));function DI(r){return r&&r.__esModule?r:{default:r}}function UI(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),MI.default.createHash("md5").update(r).digest()}var LI=UI;zo.default=LI});var nm=g(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=void 0;var BI=rm(bu()),qI=rm(tm());function rm(r){return r&&r.__esModule?r:{default:r}}var jI=(0,BI.default)("v3",48,qI.default),FI=jI;Ho.default=FI});var om=g(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.default=void 0;var zI=im(vu()),HI=im(li());function im(r){return r&&r.__esModule?r:{default:r}}function GI(r,e,t){r=r||{};let n=r.random||(r.rng||zI.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=n[i];return e}return(0,HI.default)(n)}var $I=GI;Go.default=$I});var am=g($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var VI=KI(require("crypto"));function KI(r){return r&&r.__esModule?r:{default:r}}function YI(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),VI.default.createHash("sha1").update(r).digest()}var WI=YI;$o.default=WI});var cm=g(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var JI=sm(bu()),QI=sm(am());function sm(r){return r&&r.__esModule?r:{default:r}}var XI=(0,JI.default)("v5",80,QI.default),ZI=XI;Vo.default=ZI});var um=g(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.default=void 0;var e_="00000000-0000-0000-0000-000000000000";Ko.default=e_});var lm=g(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.default=void 0;var t_=r_(ui());function r_(r){return r&&r.__esModule?r:{default:r}}function n_(r){if(!(0,t_.default)(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var i_=n_;Yo.default=i_});var pi=g(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});Object.defineProperty(at,"v1",{enumerable:!0,get:function(){return o_.default}});Object.defineProperty(at,"v3",{enumerable:!0,get:function(){return a_.default}});Object.defineProperty(at,"v4",{enumerable:!0,get:function(){return s_.default}});Object.defineProperty(at,"v5",{enumerable:!0,get:function(){return c_.default}});Object.defineProperty(at,"NIL",{enumerable:!0,get:function(){return u_.default}});Object.defineProperty(at,"version",{enumerable:!0,get:function(){return l_.default}});Object.defineProperty(at,"validate",{enumerable:!0,get:function(){return p_.default}});Object.defineProperty(at,"stringify",{enumerable:!0,get:function(){return d_.default}});Object.defineProperty(at,"parse",{enumerable:!0,get:function(){return f_.default}});var o_=qt(Qh()),a_=qt(nm()),s_=qt(om()),c_=qt(cm()),u_=qt(um()),l_=qt(lm()),p_=qt(ui()),d_=qt(li()),f_=qt(Tu());function qt(r){return r&&r.__esModule?r:{default:r}}});var fn=g((wu,dm)=>{var Wo=require("buffer"),It=Wo.Buffer;function pm(r,e){for(var t in r)e[t]=r[t]}It.from&&It.alloc&&It.allocUnsafe&&It.allocUnsafeSlow?dm.exports=Wo:(pm(Wo,wu),wu.Buffer=Nr);function Nr(r,e,t){return It(r,e,t)}Nr.prototype=Object.create(It.prototype);pm(It,Nr);Nr.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return It(r,e,t)};Nr.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=It(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};Nr.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return It(r)};Nr.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Wo.SlowBuffer(r)}});var xu=g((eB,fm)=>{var Jo=fn().Buffer,h_=require("stream"),m_=require("util");function Qo(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=Jo.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=Jo.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}m_.inherits(Qo,h_);Qo.prototype.write=function(e){this.buffer=Jo.concat([this.buffer,Jo.from(e)]),this.emit("data",e)};Qo.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};fm.exports=Qo});var mm=g((tB,hm)=>{"use strict";var di=require("buffer").Buffer,Iu=require("buffer").SlowBuffer;hm.exports=Xo;function Xo(r,e){if(!di.isBuffer(r)||!di.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}Xo.install=function(){di.prototype.equal=Iu.prototype.equal=function(e){return Xo(this,e)}};var g_=di.prototype.equal,v_=Iu.prototype.equal;Xo.restore=function(){di.prototype.equal=g_,Iu.prototype.equal=v_}});var vm=g((rB,gm)=>{"use strict";function _u(r){var e=(r/8|0)+(r%8===0?0:1);return e}var y_={ES256:_u(256),ES384:_u(384),ES512:_u(521)};function E_(r){var e=y_[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}gm.exports=E_});var xm=g((nB,wm)=>{"use strict";var Zo=fn().Buffer,Em=vm(),ea=128,Cm=0,C_=32,T_=16,b_=2,Tm=T_|C_|Cm<<6,ta=b_|Cm<<6;function w_(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bm(r){if(Zo.isBuffer(r))return r;if(typeof r=="string")return Zo.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function x_(r,e){r=bm(r);var t=Em(e),n=t+1,i=r.length,o=0;if(r[o++]!==Tm)throw new Error('Could not find expected "seq"');var a=r[o++];if(a===(ea|1)&&(a=r[o++]),i-o<a)throw new Error('"seq" specified length of "'+a+'", only "'+(i-o)+'" remaining');if(r[o++]!==ta)throw new Error('Could not find expected "int" for "r"');var s=r[o++];if(i-o-2<s)throw new Error('"r" specified length of "'+s+'", only "'+(i-o-2)+'" available');if(n<s)throw new Error('"r" specified length of "'+s+'", max of "'+n+'" is acceptable');var c=o;if(o+=s,r[o++]!==ta)throw new Error('Could not find expected "int" for "s"');var u=r[o++];if(i-o!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(i-o)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var l=o;if(o+=u,o!==i)throw new Error('Expected to consume entire buffer, but "'+(i-o)+'" bytes remain');var p=t-s,d=t-u,f=Zo.allocUnsafe(p+s+d+u);for(o=0;o<p;++o)f[o]=0;r.copy(f,o,c+Math.max(-p,0),c+s),o=t;for(var m=o;o<m+d;++o)f[o]=0;return r.copy(f,o,l+Math.max(-d,0),l+u),f=f.toString("base64"),f=w_(f),f}function ym(r,e,t){for(var n=0;e+n<t&&r[e+n]===0;)++n;var i=r[e+n]>=ea;return i&&--n,n}function I_(r,e){r=bm(r);var t=Em(e),n=r.length;if(n!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var i=ym(r,0,t),o=ym(r,t,r.length),a=t-i,s=t-o,c=1+1+a+1+1+s,u=c<ea,l=Zo.allocUnsafe((u?2:3)+c),p=0;return l[p++]=Tm,u?l[p++]=c:(l[p++]=ea|1,l[p++]=c&255),l[p++]=ta,l[p++]=a,i<0?(l[p++]=0,p+=r.copy(l,p,0,t)):p+=r.copy(l,p,i,t),l[p++]=ta,l[p++]=s,o<0?(l[p++]=0,r.copy(l,p,t)):r.copy(l,p,t+o),l}wm.exports={derToJose:x_,joseToDer:I_}});var Pu=g((iB,Nm)=>{var __=mm(),mn=fn().Buffer,_t=require("crypto"),_m=xm(),Im=require("util"),S_=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,fi="secret must be a string or buffer",hn="key must be a string or a buffer",A_="key must be a string, a buffer or an object",Su=typeof _t.createPublicKey=="function";Su&&(hn+=" or a KeyObject",fi+="or a KeyObject");function Sm(r){if(!mn.isBuffer(r)&&typeof r!="string"&&(!Su||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw st(hn)}function Am(r){if(!mn.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw st(A_)}function P_(r){if(!mn.isBuffer(r)){if(typeof r=="string")return r;if(!Su||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw st(fi)}}function Au(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Pm(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function st(r){var e=[].slice.call(arguments,1),t=Im.format.bind(Im,r).apply(null,e);return new TypeError(t)}function R_(r){return mn.isBuffer(r)||typeof r=="string"}function hi(r){return R_(r)||(r=JSON.stringify(r)),r}function Rm(r){return function(t,n){P_(n),t=hi(t);var i=_t.createHmac("sha"+r,n),o=(i.update(t),i.digest("base64"));return Au(o)}}function O_(r){return function(t,n,i){var o=Rm(r)(t,i);return __(mn.from(n),mn.from(o))}}function Om(r){return function(t,n){Am(n),t=hi(t);var i=_t.createSign("RSA-SHA"+r),o=(i.update(t),i.sign(n,"base64"));return Au(o)}}function km(r){return function(t,n,i){Sm(i),t=hi(t),n=Pm(n);var o=_t.createVerify("RSA-SHA"+r);return o.update(t),o.verify(i,n,"base64")}}function k_(r){return function(t,n){Am(n),t=hi(t);var i=_t.createSign("RSA-SHA"+r),o=(i.update(t),i.sign({key:n,padding:_t.constants.RSA_PKCS1_PSS_PADDING,saltLength:_t.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Au(o)}}function N_(r){return function(t,n,i){Sm(i),t=hi(t),n=Pm(n);var o=_t.createVerify("RSA-SHA"+r);return o.update(t),o.verify({key:i,padding:_t.constants.RSA_PKCS1_PSS_PADDING,saltLength:_t.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function M_(r){var e=Om(r);return function(){var n=e.apply(null,arguments);return n=_m.derToJose(n,"ES"+r),n}}function D_(r){var e=km(r);return function(n,i,o){i=_m.joseToDer(i,"ES"+r).toString("base64");var a=e(n,i,o);return a}}function U_(){return function(){return""}}function L_(){return function(e,t){return t===""}}Nm.exports=function(e){var t={hs:Rm,rs:Om,ps:k_,es:M_,none:U_},n={hs:O_,rs:km,ps:N_,es:D_,none:L_},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!i)throw st(S_,e);var o=(i[1]||i[3]).toLowerCase(),a=i[2];return{sign:t[o](a),verify:n[o](a)}}});var Ru=g((oB,Mm)=>{var B_=require("buffer").Buffer;Mm.exports=function(e){return typeof e=="string"?e:typeof e=="number"||B_.isBuffer(e)?e.toString():JSON.stringify(e)}});var jm=g((aB,qm)=>{var q_=fn().Buffer,Dm=xu(),j_=Pu(),F_=require("stream"),Um=Ru(),Ou=require("util");function Lm(r,e){return q_.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function z_(r,e,t){t=t||"utf8";var n=Lm(Um(r),"binary"),i=Lm(Um(e),t);return Ou.format("%s.%s",n,i)}function Bm(r){var e=r.header,t=r.payload,n=r.secret||r.privateKey,i=r.encoding,o=j_(e.alg),a=z_(e,t,i),s=o.sign(a,n);return Ou.format("%s.%s",a,s)}function ra(r){var e=r.secret||r.privateKey||r.key,t=new Dm(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new Dm(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Ou.inherits(ra,F_);ra.prototype.sign=function(){try{var e=Bm({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};ra.sign=Bm;qm.exports=ra});var Jm=g((sB,Wm)=>{var zm=fn().Buffer,Fm=xu(),H_=Pu(),G_=require("stream"),Hm=Ru(),$_=require("util"),V_=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function K_(r){return Object.prototype.toString.call(r)==="[object Object]"}function Y_(r){if(K_(r))return r;try{return JSON.parse(r)}catch{return}}function Gm(r){var e=r.split(".",1)[0];return Y_(zm.from(e,"base64").toString("binary"))}function W_(r){return r.split(".",2).join(".")}function $m(r){return r.split(".")[2]}function J_(r,e){e=e||"utf8";var t=r.split(".")[1];return zm.from(t,"base64").toString(e)}function Vm(r){return V_.test(r)&&!!Gm(r)}function Km(r,e,t){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}r=Hm(r);var i=$m(r),o=W_(r),a=H_(e);return a.verify(o,i,t)}function Ym(r,e){if(e=e||{},r=Hm(r),!Vm(r))return null;var t=Gm(r);if(!t)return null;var n=J_(r);return(t.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:t,payload:n,signature:$m(r)}}function gn(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new Fm(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new Fm(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}$_.inherits(gn,G_);gn.prototype.verify=function(){try{var e=Km(this.signature.buffer,this.algorithm,this.key.buffer),t=Ym(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};gn.decode=Ym;gn.isValid=Vm;gn.verify=Km;Wm.exports=gn});var ia=g(Qt=>{var Qm=jm(),na=Jm(),Q_=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Qt.ALGORITHMS=Q_;Qt.sign=Qm.sign;Qt.verify=na.verify;Qt.decode=na.decode;Qt.isValid=na.isValid;Qt.createSign=function(e){return new Qm(e)};Qt.createVerify=function(e){return new na(e)}});var ku=g((uB,Xm)=>{var X_=ia();Xm.exports=function(r,e){e=e||{};var t=X_.decode(r,e);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var i=JSON.parse(n);i!==null&&typeof i=="object"&&(n=i)}catch{}return e.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var mi=g((lB,Zm)=>{var oa=function(r,e){Error.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=r,e&&(this.inner=e)};oa.prototype=Object.create(Error.prototype);oa.prototype.constructor=oa;Zm.exports=oa});var Nu=g((pB,tg)=>{var eg=mi(),aa=function(r,e){eg.call(this,r),this.name="NotBeforeError",this.date=e};aa.prototype=Object.create(eg.prototype);aa.prototype.constructor=aa;tg.exports=aa});var Mu=g((dB,ng)=>{var rg=mi(),sa=function(r,e){rg.call(this,r),this.name="TokenExpiredError",this.expiredAt=e};sa.prototype=Object.create(rg.prototype);sa.prototype.constructor=sa;ng.exports=sa});var Du=g((fB,ig)=>{var Z_=Rc();ig.exports=function(r,e){var t=e||Math.floor(Date.now()/1e3);if(typeof r=="string"){var n=Z_(r);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof r=="number"?t+r:void 0}});var Tg=g((H,Cg)=>{H=Cg.exports=X;var re;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?re=function(){var r=Array.prototype.slice.call(arguments,0);r.unshift("SEMVER"),console.log.apply(console,r)}:re=function(){};H.SEMVER_SPEC_VERSION="2.0.0";var Lu=256,ca=Number.MAX_SAFE_INTEGER||9007199254740991,Uu=16,se=H.re=[],x=H.src=[],Y=0,vn=Y++;x[vn]="0|[1-9]\\d*";var yn=Y++;x[yn]="[0-9]+";var Fu=Y++;x[Fu]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var ag=Y++;x[ag]="("+x[vn]+")\\.("+x[vn]+")\\.("+x[vn]+")";var sg=Y++;x[sg]="("+x[yn]+")\\.("+x[yn]+")\\.("+x[yn]+")";var Bu=Y++;x[Bu]="(?:"+x[vn]+"|"+x[Fu]+")";var qu=Y++;x[qu]="(?:"+x[yn]+"|"+x[Fu]+")";var zu=Y++;x[zu]="(?:-("+x[Bu]+"(?:\\."+x[Bu]+")*))";var Hu=Y++;x[Hu]="(?:-?("+x[qu]+"(?:\\."+x[qu]+")*))";var ju=Y++;x[ju]="[0-9A-Za-z-]+";var yi=Y++;x[yi]="(?:\\+("+x[ju]+"(?:\\."+x[ju]+")*))";var Gu=Y++,cg="v?"+x[ag]+x[zu]+"?"+x[yi]+"?";x[Gu]="^"+cg+"$";var $u="[v=\\s]*"+x[sg]+x[Hu]+"?"+x[yi]+"?",Vu=Y++;x[Vu]="^"+$u+"$";var Tn=Y++;x[Tn]="((?:<|>)?=?)";var ua=Y++;x[ua]=x[yn]+"|x|X|\\*";var la=Y++;x[la]=x[vn]+"|x|X|\\*";var Mr=Y++;x[Mr]="[v=\\s]*("+x[la]+")(?:\\.("+x[la]+")(?:\\.("+x[la]+")(?:"+x[zu]+")?"+x[yi]+"?)?)?";var Cn=Y++;x[Cn]="[v=\\s]*("+x[ua]+")(?:\\.("+x[ua]+")(?:\\.("+x[ua]+")(?:"+x[Hu]+")?"+x[yi]+"?)?)?";var ug=Y++;x[ug]="^"+x[Tn]+"\\s*"+x[Mr]+"$";var lg=Y++;x[lg]="^"+x[Tn]+"\\s*"+x[Cn]+"$";var pg=Y++;x[pg]="(?:^|[^\\d])(\\d{1,"+Uu+"})(?:\\.(\\d{1,"+Uu+"}))?(?:\\.(\\d{1,"+Uu+"}))?(?:$|[^\\d])";var ga=Y++;x[ga]="(?:~>?)";var pa=Y++;x[pa]="(\\s*)"+x[ga]+"\\s+";se[pa]=new RegExp(x[pa],"g");var eS="$1~",dg=Y++;x[dg]="^"+x[ga]+x[Mr]+"$";var fg=Y++;x[fg]="^"+x[ga]+x[Cn]+"$";var va=Y++;x[va]="(?:\\^)";var da=Y++;x[da]="(\\s*)"+x[va]+"\\s+";se[da]=new RegExp(x[da],"g");var tS="$1^",hg=Y++;x[hg]="^"+x[va]+x[Mr]+"$";var mg=Y++;x[mg]="^"+x[va]+x[Cn]+"$";var Ku=Y++;x[Ku]="^"+x[Tn]+"\\s*("+$u+")$|^$";var Yu=Y++;x[Yu]="^"+x[Tn]+"\\s*("+cg+")$|^$";var gi=Y++;x[gi]="(\\s*)"+x[Tn]+"\\s*("+$u+"|"+x[Mr]+")";se[gi]=new RegExp(x[gi],"g");var rS="$1$2$3",gg=Y++;x[gg]="^\\s*("+x[Mr]+")\\s+-\\s+("+x[Mr]+")\\s*$";var vg=Y++;x[vg]="^\\s*("+x[Cn]+")\\s+-\\s+("+x[Cn]+")\\s*$";var yg=Y++;x[yg]="(<|>)?=?\\s*\\*";for(Xt=0;Xt<Y;Xt++)re(Xt,x[Xt]),se[Xt]||(se[Xt]=new RegExp(x[Xt]));var Xt;H.parse=Dr;function Dr(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof X)return r;if(typeof r!="string"||r.length>Lu)return null;var t=e.loose?se[Vu]:se[Gu];if(!t.test(r))return null;try{return new X(r,e)}catch{return null}}H.valid=nS;function nS(r,e){var t=Dr(r,e);return t?t.version:null}H.clean=iS;function iS(r,e){var t=Dr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null}H.SemVer=X;function X(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof X){if(r.loose===e.loose)return r;r=r.version}else if(typeof r!="string")throw new TypeError("Invalid Version: "+r);if(r.length>Lu)throw new TypeError("version is longer than "+Lu+" characters");if(!(this instanceof X))return new X(r,e);re("SemVer",r,e),this.options=e,this.loose=!!e.loose;var t=r.trim().match(e.loose?se[Vu]:se[Gu]);if(!t)throw new TypeError("Invalid Version: "+r);if(this.raw=r,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>ca||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ca||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ca||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<ca)return i}return n}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};X.prototype.toString=function(){return this.version};X.prototype.compare=function(r){return re("SemVer.compare",this.version,this.options,r),r instanceof X||(r=new X(r,this.options)),this.compareMain(r)||this.comparePre(r)};X.prototype.compareMain=function(r){return r instanceof X||(r=new X(r,this.options)),En(this.major,r.major)||En(this.minor,r.minor)||En(this.patch,r.patch)};X.prototype.comparePre=function(r){if(r instanceof X||(r=new X(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;var e=0;do{var t=this.prerelease[e],n=r.prerelease[e];if(re("prerelease compare",e,t,n),t===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(t===void 0)return-1;if(t===n)continue;return En(t,n)}while(++e)};X.prototype.inc=function(r,e){switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e),this.inc("pre",e);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var t=this.prerelease.length;--t>=0;)typeof this.prerelease[t]=="number"&&(this.prerelease[t]++,t=-2);t===-1&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+r)}return this.format(),this.raw=this.version,this};H.inc=oS;function oS(r,e,t,n){typeof t=="string"&&(n=t,t=void 0);try{return new X(r,t).inc(e,n).version}catch{return null}}H.diff=aS;function aS(r,e){if(Wu(r,e))return null;var t=Dr(r),n=Dr(e),i="";if(t.prerelease.length||n.prerelease.length){i="pre";var o="prerelease"}for(var a in t)if((a==="major"||a==="minor"||a==="patch")&&t[a]!==n[a])return i+a;return o}H.compareIdentifiers=En;var og=/^[0-9]+$/;function En(r,e){var t=og.test(r),n=og.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1}H.rcompareIdentifiers=sS;function sS(r,e){return En(e,r)}H.major=cS;function cS(r,e){return new X(r,e).major}H.minor=uS;function uS(r,e){return new X(r,e).minor}H.patch=lS;function lS(r,e){return new X(r,e).patch}H.compare=jt;function jt(r,e,t){return new X(r,t).compare(new X(e,t))}H.compareLoose=pS;function pS(r,e){return jt(r,e,!0)}H.rcompare=dS;function dS(r,e,t){return jt(e,r,t)}H.sort=fS;function fS(r,e){return r.sort(function(t,n){return H.compare(t,n,e)})}H.rsort=hS;function hS(r,e){return r.sort(function(t,n){return H.rcompare(t,n,e)})}H.gt=vi;function vi(r,e,t){return jt(r,e,t)>0}H.lt=fa;function fa(r,e,t){return jt(r,e,t)<0}H.eq=Wu;function Wu(r,e,t){return jt(r,e,t)===0}H.neq=Eg;function Eg(r,e,t){return jt(r,e,t)!==0}H.gte=Ju;function Ju(r,e,t){return jt(r,e,t)>=0}H.lte=Qu;function Qu(r,e,t){return jt(r,e,t)<=0}H.cmp=ha;function ha(r,e,t,n){switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return Wu(r,t,n);case"!=":return Eg(r,t,n);case">":return vi(r,t,n);case">=":return Ju(r,t,n);case"<":return fa(r,t,n);case"<=":return Qu(r,t,n);default:throw new TypeError("Invalid operator: "+e)}}H.Comparator=tt;function tt(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof tt){if(r.loose===!!e.loose)return r;r=r.value}if(!(this instanceof tt))return new tt(r,e);re("comparator",r,e),this.options=e,this.loose=!!e.loose,this.parse(r),this.semver===Ei?this.value="":this.value=this.operator+this.semver.version,re("comp",this)}var Ei={};tt.prototype.parse=function(r){var e=this.options.loose?se[Ku]:se[Yu],t=r.match(e);if(!t)throw new TypeError("Invalid comparator: "+r);this.operator=t[1],this.operator==="="&&(this.operator=""),t[2]?this.semver=new X(t[2],this.options.loose):this.semver=Ei};tt.prototype.toString=function(){return this.value};tt.prototype.test=function(r){return re("Comparator.test",r,this.options.loose),this.semver===Ei?!0:(typeof r=="string"&&(r=new X(r,this.options)),ha(r,this.operator,this.semver,this.options))};tt.prototype.intersects=function(r,e){if(!(r instanceof tt))throw new TypeError("a Comparator is required");(!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1});var t;if(this.operator==="")return t=new he(r.value,e),ma(this.value,t,e);if(r.operator==="")return t=new he(this.value,e),ma(r.semver,t,e);var n=(this.operator===">="||this.operator===">")&&(r.operator===">="||r.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(r.operator==="<="||r.operator==="<"),o=this.semver.version===r.semver.version,a=(this.operator===">="||this.operator==="<=")&&(r.operator===">="||r.operator==="<="),s=ha(this.semver,"<",r.semver,e)&&(this.operator===">="||this.operator===">")&&(r.operator==="<="||r.operator==="<"),c=ha(this.semver,">",r.semver,e)&&(this.operator==="<="||this.operator==="<")&&(r.operator===">="||r.operator===">");return n||i||o&&a||s||c};H.Range=he;function he(r,e){if((!e||typeof e!="object")&&(e={loose:!!e,includePrerelease:!1}),r instanceof he)return r.loose===!!e.loose&&r.includePrerelease===!!e.includePrerelease?r:new he(r.raw,e);if(r instanceof tt)return new he(r.value,e);if(!(this instanceof he))return new he(r,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=r,this.set=r.split(/\s*\|\|\s*/).map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+r);this.format()}he.prototype.format=function(){return this.range=this.set.map(function(r){return r.join(" ").trim()}).join("||").trim(),this.range};he.prototype.toString=function(){return this.range};he.prototype.parseRange=function(r){var e=this.options.loose;r=r.trim();var t=e?se[vg]:se[gg];r=r.replace(t,xS),re("hyphen replace",r),r=r.replace(se[gi],rS),re("comparator trim",r,se[gi]),r=r.replace(se[pa],eS),r=r.replace(se[da],tS),r=r.split(/\s+/).join(" ");var n=e?se[Ku]:se[Yu],i=r.split(" ").map(function(o){return gS(o,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(o){return!!o.match(n)})),i=i.map(function(o){return new tt(o,this.options)},this),i};he.prototype.intersects=function(r,e){if(!(r instanceof he))throw new TypeError("a Range is required");return this.set.some(function(t){return t.every(function(n){return r.set.some(function(i){return i.every(function(o){return n.intersects(o,e)})})})})};H.toComparators=mS;function mS(r,e){return new he(r,e).set.map(function(t){return t.map(function(n){return n.value}).join(" ").trim().split(" ")})}function gS(r,e){return re("comp",r,e),r=ES(r,e),re("caret",r),r=vS(r,e),re("tildes",r),r=TS(r,e),re("xrange",r),r=wS(r,e),re("stars",r),r}function Be(r){return!r||r.toLowerCase()==="x"||r==="*"}function vS(r,e){return r.trim().split(/\s+/).map(function(t){return yS(t,e)}).join(" ")}function yS(r,e){var t=e.loose?se[fg]:se[dg];return r.replace(t,function(n,i,o,a,s){re("tilde",r,n,i,o,a,s);var c;return Be(i)?c="":Be(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Be(a)?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":s?(re("replaceTilde pr",s),c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0"):c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0",re("tilde return",c),c})}function ES(r,e){return r.trim().split(/\s+/).map(function(t){return CS(t,e)}).join(" ")}function CS(r,e){re("caret",r,e);var t=e.loose?se[mg]:se[hg];return r.replace(t,function(n,i,o,a,s){re("caret",r,n,i,o,a,s);var c;return Be(i)?c="":Be(o)?c=">="+i+".0.0 <"+(+i+1)+".0.0":Be(a)?i==="0"?c=">="+i+"."+o+".0 <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+".0 <"+(+i+1)+".0.0":s?(re("replaceCaret pr",s),i==="0"?o==="0"?c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+o+"."+(+a+1):c=">="+i+"."+o+"."+a+"-"+s+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+a+"-"+s+" <"+(+i+1)+".0.0"):(re("no pr"),i==="0"?o==="0"?c=">="+i+"."+o+"."+a+" <"+i+"."+o+"."+(+a+1):c=">="+i+"."+o+"."+a+" <"+i+"."+(+o+1)+".0":c=">="+i+"."+o+"."+a+" <"+(+i+1)+".0.0"),re("caret return",c),c})}function TS(r,e){return re("replaceXRanges",r,e),r.split(/\s+/).map(function(t){return bS(t,e)}).join(" ")}function bS(r,e){r=r.trim();var t=e.loose?se[lg]:se[ug];return r.replace(t,function(n,i,o,a,s,c){re("xRange",r,n,i,o,a,s,c);var u=Be(o),l=u||Be(a),p=l||Be(s),d=p;return i==="="&&d&&(i=""),u?i===">"||i==="<"?n="<0.0.0":n="*":i&&d?(l&&(a=0),s=0,i===">"?(i=">=",l?(o=+o+1,a=0,s=0):(a=+a+1,s=0)):i==="<="&&(i="<",l?o=+o+1:a=+a+1),n=i+o+"."+a+"."+s):l?n=">="+o+".0.0 <"+(+o+1)+".0.0":p&&(n=">="+o+"."+a+".0 <"+o+"."+(+a+1)+".0"),re("xRange return",n),n})}function wS(r,e){return re("replaceStars",r,e),r.trim().replace(se[yg],"")}function xS(r,e,t,n,i,o,a,s,c,u,l,p,d){return Be(t)?e="":Be(n)?e=">="+t+".0.0":Be(i)?e=">="+t+"."+n+".0":e=">="+e,Be(c)?s="":Be(u)?s="<"+(+c+1)+".0.0":Be(l)?s="<"+c+"."+(+u+1)+".0":p?s="<="+c+"."+u+"."+l+"-"+p:s="<="+s,(e+" "+s).trim()}he.prototype.test=function(r){if(!r)return!1;typeof r=="string"&&(r=new X(r,this.options));for(var e=0;e<this.set.length;e++)if(IS(this.set[e],r,this.options))return!0;return!1};function IS(r,e,t){for(var n=0;n<r.length;n++)if(!r[n].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(n=0;n<r.length;n++)if(re(r[n].semver),r[n].semver!==Ei&&r[n].semver.prerelease.length>0){var i=r[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}H.satisfies=ma;function ma(r,e,t){try{e=new he(e,t)}catch{return!1}return e.test(r)}H.maxSatisfying=_S;function _S(r,e,t){var n=null,i=null;try{var o=new he(e,t)}catch{return null}return r.forEach(function(a){o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new X(n,t))}),n}H.minSatisfying=SS;function SS(r,e,t){var n=null,i=null;try{var o=new he(e,t)}catch{return null}return r.forEach(function(a){o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new X(n,t))}),n}H.minVersion=AS;function AS(r,e){r=new he(r,e);var t=new X("0.0.0");if(r.test(t)||(t=new X("0.0.0-0"),r.test(t)))return t;t=null;for(var n=0;n<r.set.length;++n){var i=r.set[n];i.forEach(function(o){var a=new X(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!t||vi(t,a))&&(t=a);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+o.operator)}})}return t&&r.test(t)?t:null}H.validRange=PS;function PS(r,e){try{return new he(r,e).range||"*"}catch{return null}}H.ltr=RS;function RS(r,e,t){return Xu(r,e,"<",t)}H.gtr=OS;function OS(r,e,t){return Xu(r,e,">",t)}H.outside=Xu;function Xu(r,e,t,n){r=new X(r,n),e=new he(e,n);var i,o,a,s,c;switch(t){case">":i=vi,o=Qu,a=fa,s=">",c=">=";break;case"<":i=fa,o=Ju,a=vi,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ma(r,e,n))return!1;for(var u=0;u<e.set.length;++u){var l=e.set[u],p=null,d=null;if(l.forEach(function(f){f.semver===Ei&&(f=new tt(">=0.0.0")),p=p||f,d=d||f,i(f.semver,p.semver,n)?p=f:a(f.semver,d.semver,n)&&(d=f)}),p.operator===s||p.operator===c||(!d.operator||d.operator===s)&&o(r,d.semver))return!1;if(d.operator===c&&a(r,d.semver))return!1}return!0}H.prerelease=kS;function kS(r,e){var t=Dr(r,e);return t&&t.prerelease.length?t.prerelease:null}H.intersects=NS;function NS(r,e,t){return r=new he(r,t),e=new he(e,t),r.intersects(e)}H.coerce=MS;function MS(r){if(r instanceof X)return r;if(typeof r!="string")return null;var e=r.match(se[pg]);return e==null?null:Dr(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}});var Zu=g((hB,bg)=>{var DS=Tg();bg.exports=DS.satisfies(process.version,"^6.12.0 || >=8.0.0")});var Sg=g((mB,_g)=>{var Te=mi(),US=Nu(),wg=Mu(),LS=ku(),BS=Du(),qS=Zu(),jS=ia(),xg=["RS256","RS384","RS512","ES256","ES384","ES512"],Ig=["RS256","RS384","RS512"],FS=["HS256","HS384","HS512"];qS&&(xg.splice(3,0,"PS256","PS384","PS512"),Ig.splice(3,0,"PS256","PS384","PS512"));_g.exports=function(r,e,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);var i;if(n?i=n:i=function(l,p){if(l)throw l;return p},t.clockTimestamp&&typeof t.clockTimestamp!="number")return i(new Te("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return i(new Te("nonce must be a non-empty string"));var o=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!r)return i(new Te("jwt must be provided"));if(typeof r!="string")return i(new Te("jwt must be a string"));var a=r.split(".");if(a.length!==3)return i(new Te("jwt malformed"));var s;try{s=LS(r,{complete:!0})}catch(l){return i(l)}if(!s)return i(new Te("invalid token"));var c=s.header,u;if(typeof e=="function"){if(!n)return i(new Te("verify must be called asynchronous if secret or public key is provided as a callback"));u=e}else u=function(l,p){return p(null,e)};return u(c,function(l,p){if(l)return i(new Te("error in secret or public key callback: "+l.message));var d=a[2].trim()!=="";if(!d&&p)return i(new Te("jwt signature is required"));if(d&&!p)return i(new Te("secret or public key must be provided"));if(!d&&!t.algorithms&&(t.algorithms=["none"]),t.algorithms||(t.algorithms=~p.toString().indexOf("BEGIN CERTIFICATE")||~p.toString().indexOf("BEGIN PUBLIC KEY")?xg:~p.toString().indexOf("BEGIN RSA PUBLIC KEY")?Ig:FS),!~t.algorithms.indexOf(s.header.alg))return i(new Te("invalid algorithm"));var f;try{f=jS.verify(r,s.header.alg,p)}catch(ce){return i(ce)}if(!f)return i(new Te("invalid signature"));var m=s.payload;if(typeof m.nbf<"u"&&!t.ignoreNotBefore){if(typeof m.nbf!="number")return i(new Te("invalid nbf value"));if(m.nbf>o+(t.clockTolerance||0))return i(new US("jwt not active",new Date(m.nbf*1e3)))}if(typeof m.exp<"u"&&!t.ignoreExpiration){if(typeof m.exp!="number")return i(new Te("invalid exp value"));if(o>=m.exp+(t.clockTolerance||0))return i(new wg("jwt expired",new Date(m.exp*1e3)))}if(t.audience){var y=Array.isArray(t.audience)?t.audience:[t.audience],E=Array.isArray(m.aud)?m.aud:[m.aud],S=E.some(function(ce){return y.some(function(we){return we instanceof RegExp?we.test(ce):we===ce})});if(!S)return i(new Te("jwt audience invalid. expected: "+y.join(" or ")))}if(t.issuer){var P=typeof t.issuer=="string"&&m.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(m.iss)===-1;if(P)return i(new Te("jwt issuer invalid. expected: "+t.issuer))}if(t.subject&&m.sub!==t.subject)return i(new Te("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&m.jti!==t.jwtid)return i(new Te("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&m.nonce!==t.nonce)return i(new Te("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof m.iat!="number")return i(new Te("iat required when maxAge is specified"));var A=BS(t.maxAge,m.iat);if(typeof A>"u")return i(new Te('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(o>=A+(t.clockTolerance||0))return i(new wg("maxAge exceeded",new Date(A*1e3)))}if(t.complete===!0){var j=s.signature;return i(null,{header:c,payload:m,signature:j})}return i(null,m)})}});var Ng=g((gB,kg)=>{var Ag=1/0,Rg=9007199254740991,zS=17976931348623157e292,Pg=0/0,HS="[object Arguments]",GS="[object Function]",$S="[object GeneratorFunction]",VS="[object String]",KS="[object Symbol]",YS=/^\s+|\s+$/g,WS=/^[-+]0x[0-9a-f]+$/i,JS=/^0b[01]+$/i,QS=/^0o[0-7]+$/i,XS=/^(?:0|[1-9]\d*)$/,ZS=parseInt;function eA(r,e){for(var t=-1,n=r?r.length:0,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}function tA(r,e,t,n){for(var i=r.length,o=t+(n?1:-1);n?o--:++o<i;)if(e(r[o],o,r))return o;return-1}function rA(r,e,t){if(e!==e)return tA(r,nA,t);for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}function nA(r){return r!==r}function iA(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function oA(r,e){return eA(e,function(t){return r[t]})}function aA(r,e){return function(t){return r(e(t))}}var ya=Object.prototype,tl=ya.hasOwnProperty,Ea=ya.toString,sA=ya.propertyIsEnumerable,cA=aA(Object.keys,Object),uA=Math.max;function lA(r,e){var t=Og(r)||mA(r)?iA(r.length,String):[],n=t.length,i=!!n;for(var o in r)(e||tl.call(r,o))&&!(i&&(o=="length"||dA(o,n)))&&t.push(o);return t}function pA(r){if(!fA(r))return cA(r);var e=[];for(var t in Object(r))tl.call(r,t)&&t!="constructor"&&e.push(t);return e}function dA(r,e){return e=e??Rg,!!e&&(typeof r=="number"||XS.test(r))&&r>-1&&r%1==0&&r<e}function fA(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||ya;return r===t}function hA(r,e,t,n){r=rl(r)?r:IA(r),t=t&&!n?bA(t):0;var i=r.length;return t<0&&(t=uA(i+t,0)),EA(r)?t<=i&&r.indexOf(e,t)>-1:!!i&&rA(r,e,t)>-1}function mA(r){return gA(r)&&tl.call(r,"callee")&&(!sA.call(r,"callee")||Ea.call(r)==HS)}var Og=Array.isArray;function rl(r){return r!=null&&yA(r.length)&&!vA(r)}function gA(r){return nl(r)&&rl(r)}function vA(r){var e=el(r)?Ea.call(r):"";return e==GS||e==$S}function yA(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Rg}function el(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function nl(r){return!!r&&typeof r=="object"}function EA(r){return typeof r=="string"||!Og(r)&&nl(r)&&Ea.call(r)==VS}function CA(r){return typeof r=="symbol"||nl(r)&&Ea.call(r)==KS}function TA(r){if(!r)return r===0?r:0;if(r=wA(r),r===Ag||r===-Ag){var e=r<0?-1:1;return e*zS}return r===r?r:0}function bA(r){var e=TA(r),t=e%1;return e===e?t?e-t:e:0}function wA(r){if(typeof r=="number")return r;if(CA(r))return Pg;if(el(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=el(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(YS,"");var t=JS.test(r);return t||QS.test(r)?ZS(r.slice(2),t?2:8):WS.test(r)?Pg:+r}function xA(r){return rl(r)?lA(r):pA(r)}function IA(r){return r?oA(r,xA(r)):[]}kg.exports=hA});var Dg=g((vB,Mg)=>{var _A="[object Boolean]",SA=Object.prototype,AA=SA.toString;function PA(r){return r===!0||r===!1||RA(r)&&AA.call(r)==_A}function RA(r){return!!r&&typeof r=="object"}Mg.exports=PA});var jg=g((yB,qg)=>{var Ug=1/0,OA=17976931348623157e292,Lg=0/0,kA="[object Symbol]",NA=/^\s+|\s+$/g,MA=/^[-+]0x[0-9a-f]+$/i,DA=/^0b[01]+$/i,UA=/^0o[0-7]+$/i,LA=parseInt,BA=Object.prototype,qA=BA.toString;function jA(r){return typeof r=="number"&&r==GA(r)}function Bg(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function FA(r){return!!r&&typeof r=="object"}function zA(r){return typeof r=="symbol"||FA(r)&&qA.call(r)==kA}function HA(r){if(!r)return r===0?r:0;if(r=$A(r),r===Ug||r===-Ug){var e=r<0?-1:1;return e*OA}return r===r?r:0}function GA(r){var e=HA(r),t=e%1;return e===e?t?e-t:e:0}function $A(r){if(typeof r=="number")return r;if(zA(r))return Lg;if(Bg(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Bg(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(NA,"");var t=DA.test(r);return t||UA.test(r)?LA(r.slice(2),t?2:8):MA.test(r)?Lg:+r}qg.exports=jA});var zg=g((EB,Fg)=>{var VA="[object Number]",KA=Object.prototype,YA=KA.toString;function WA(r){return!!r&&typeof r=="object"}function JA(r){return typeof r=="number"||WA(r)&&YA.call(r)==VA}Fg.exports=JA});var Vg=g((CB,$g)=>{var QA="[object Object]";function XA(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function ZA(r,e){return function(t){return r(e(t))}}var eP=Function.prototype,Hg=Object.prototype,Gg=eP.toString,tP=Hg.hasOwnProperty,rP=Gg.call(Object),nP=Hg.toString,iP=ZA(Object.getPrototypeOf,Object);function oP(r){return!!r&&typeof r=="object"}function aP(r){if(!oP(r)||nP.call(r)!=QA||XA(r))return!1;var e=iP(r);if(e===null)return!0;var t=tP.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Gg.call(t)==rP}$g.exports=aP});var Yg=g((TB,Kg)=>{var sP="[object String]",cP=Object.prototype,uP=cP.toString,lP=Array.isArray;function pP(r){return!!r&&typeof r=="object"}function dP(r){return typeof r=="string"||!lP(r)&&pP(r)&&uP.call(r)==sP}Kg.exports=dP});var Zg=g((bB,Xg)=>{var fP="Expected a function",Wg=1/0,hP=17976931348623157e292,Jg=0/0,mP="[object Symbol]",gP=/^\s+|\s+$/g,vP=/^[-+]0x[0-9a-f]+$/i,yP=/^0b[01]+$/i,EP=/^0o[0-7]+$/i,CP=parseInt,TP=Object.prototype,bP=TP.toString;function wP(r,e){var t;if(typeof e!="function")throw new TypeError(fP);return r=AP(r),function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=void 0),t}}function xP(r){return wP(2,r)}function Qg(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function IP(r){return!!r&&typeof r=="object"}function _P(r){return typeof r=="symbol"||IP(r)&&bP.call(r)==mP}function SP(r){if(!r)return r===0?r:0;if(r=PP(r),r===Wg||r===-Wg){var e=r<0?-1:1;return e*hP}return r===r?r:0}function AP(r){var e=SP(r),t=e%1;return e===e?t?e-t:e:0}function PP(r){if(typeof r=="number")return r;if(_P(r))return Jg;if(Qg(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Qg(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(gP,"");var t=yP.test(r);return t||EP.test(r)?CP(r.slice(2),t?2:8):vP.test(r)?Jg:+r}Xg.exports=xP});var uv=g((wB,cv)=>{var ev=Du(),RP=Zu(),tv=ia(),OP=Ng(),rv=Dg(),nv=jg(),il=zg(),ov=Vg(),Zt=Yg(),kP=Zg(),av=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];RP&&av.splice(3,0,"PS256","PS384","PS512");var NP={expiresIn:{isValid:function(r){return nv(r)||Zt(r)&&r},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(r){return nv(r)||Zt(r)&&r},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(r){return Zt(r)||Array.isArray(r)},message:'"audience" must be a string or array'},algorithm:{isValid:OP.bind(null,av),message:'"algorithm" must be a valid string enum value'},header:{isValid:ov,message:'"header" must be an object'},encoding:{isValid:Zt,message:'"encoding" must be a string'},issuer:{isValid:Zt,message:'"issuer" must be a string'},subject:{isValid:Zt,message:'"subject" must be a string'},jwtid:{isValid:Zt,message:'"jwtid" must be a string'},noTimestamp:{isValid:rv,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Zt,message:'"keyid" must be a string'},mutatePayload:{isValid:rv,message:'"mutatePayload" must be a boolean'}},MP={iat:{isValid:il,message:'"iat" should be a number of seconds'},exp:{isValid:il,message:'"exp" should be a number of seconds'},nbf:{isValid:il,message:'"nbf" should be a number of seconds'}};function sv(r,e,t,n){if(!ov(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(i){var o=r[i];if(!o){if(!e)throw new Error('"'+i+'" is not allowed in "'+n+'"');return}if(!o.isValid(t[i]))throw new Error(o.message)})}function DP(r){return sv(NP,!1,r,"options")}function UP(r){return sv(MP,!0,r,"payload")}var iv={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},LP=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];cv.exports=function(r,e,t,n){typeof t=="function"?(n=t,t={}):t=t||{};var i=typeof r=="object"&&!Buffer.isBuffer(r),o=Object.assign({alg:t.algorithm||"HS256",typ:i?"JWT":void 0,kid:t.keyid},t.header);function a(l){if(n)return n(l);throw l}if(!e&&t.algorithm!=="none")return a(new Error("secretOrPrivateKey must have a value"));if(typeof r>"u")return a(new Error("payload is required"));if(i){try{UP(r)}catch(l){return a(l)}t.mutatePayload||(r=Object.assign({},r))}else{var s=LP.filter(function(l){return typeof t[l]<"u"});if(s.length>0)return a(new Error("invalid "+s.join(",")+" option for "+typeof r+" payload"))}if(typeof r.exp<"u"&&typeof t.expiresIn<"u")return a(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof r.nbf<"u"&&typeof t.notBefore<"u")return a(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{DP(t)}catch(l){return a(l)}var c=r.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete r.iat:i&&(r.iat=c),typeof t.notBefore<"u"){try{r.nbf=ev(t.notBefore,c)}catch(l){return a(l)}if(typeof r.nbf>"u")return a(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof r=="object"){try{r.exp=ev(t.expiresIn,c)}catch(l){return a(l)}if(typeof r.exp>"u")return a(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(iv).forEach(function(l){var p=iv[l];if(typeof t[l]<"u"){if(typeof r[p]<"u")return a(new Error('Bad "options.'+l+'" option. The payload already has an "'+p+'" property.'));r[p]=t[l]}});var u=t.encoding||"utf8";if(typeof n=="function")n=n&&kP(n),tv.createSign({header:o,privateKey:e,payload:r,encoding:u}).once("error",n).once("done",function(l){n(null,l)});else return tv.sign({header:o,payload:r,secret:e,encoding:u})}});var ol=g((xB,lv)=>{lv.exports={decode:ku(),verify:Sg(),sign:uv(),JsonWebTokenError:mi(),NotBeforeError:Nu(),TokenExpiredError:Mu()}});var mv=g(ie=>{"use strict";function ll(r){return r&&typeof r=="object"&&"default"in r?r.default:r}Object.defineProperty(ie,"__esModule",{value:!0});var Ca,b=su(),pv=ll(_o()),dv=ll(Mo()),BP=pi(),fv=ll(require("crypto")),qP=ol();(function(r){r.GET="get",r.POST="post"})(Ca||(Ca={}));var al="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",er;(function(r){r[r.acquireTokenSilent=62]="acquireTokenSilent",r[r.acquireTokenByUsernamePassword=371]="acquireTokenByUsernamePassword",r[r.acquireTokenByDeviceCode=671]="acquireTokenByDeviceCode",r[r.acquireTokenByClientCredential=771]="acquireTokenByClientCredential",r[r.acquireTokenByCode=871]="acquireTokenByCode",r[r.acquireTokenByRefreshToken=872]="acquireTokenByRefreshToken"})(er||(er={}));var sl=class{async sendGetRequestAsync(e,t){let n={method:Ca.GET,url:e,headers:t&&t.headers,validateStatus:()=>!0};t&&t.proxyUrl&&(n.proxy=!1,n.httpsAgent=dv(t.proxyUrl));let i=await pv(n);return{headers:i.headers,body:i.data,status:i.status}}async sendPostRequestAsync(e,t,n){let i={method:Ca.POST,url:e,data:t&&t.body||b.Constants.EMPTY_STRING,timeout:n,headers:t&&t.headers,validateStatus:()=>!0};t&&t.proxyUrl&&(i.proxy=!1,i.httpsAgent=dv(t.proxyUrl));let o=await pv(i);return{headers:o.headers,body:o.data,status:o.status}}},jP={clientId:b.Constants.EMPTY_STRING,authority:b.Constants.DEFAULT_AUTHORITY,clientSecret:b.Constants.EMPTY_STRING,clientAssertion:b.Constants.EMPTY_STRING,clientCertificate:{thumbprint:b.Constants.EMPTY_STRING,privateKey:b.Constants.EMPTY_STRING,x5c:b.Constants.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:b.Constants.EMPTY_STRING,authorityMetadata:b.Constants.EMPTY_STRING,clientCapabilities:[],protocolMode:b.ProtocolMode.AAD,azureCloudOptions:{azureCloudInstance:b.AzureCloudInstance.None,tenant:b.Constants.EMPTY_STRING}},FP={},zP={loggerOptions:{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:b.LogLevel.Info},networkClient:class{static getNetworkClient(){return new sl}}.getNetworkClient(),proxyUrl:b.Constants.EMPTY_STRING},HP={application:{appName:b.Constants.EMPTY_STRING,appVersion:b.Constants.EMPTY_STRING}};function hv({auth:r,cache:e,system:t,telemetry:n}){return{auth:{...jP,...r},cache:{...FP,...e},system:{...zP,...t},telemetry:{...HP,...n}}}var cl=class{generateGuid(){return BP.v4()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},ct=class{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return ct.base64Encode(e,t).replace(/=/g,b.Constants.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return ct.base64Decode(t)}},Ta=class{sha256(e){return fv.createHash("sha256").update(e).digest()}},ul=class{constructor(){this.hashUtils=new Ta}async generatePkceCodes(){let e=this.generateCodeVerifier();return{verifier:e,challenge:this.generateCodeChallengeFromVerifier(e)}}generateCodeVerifier(){let e=[],t=256-256%al.length;for(;e.length<=32;){let i=fv.randomBytes(1)[0];i>=t||e.push(al[i%al.length])}let n=e.join(b.Constants.EMPTY_STRING);return ct.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return ct.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},ba=class{constructor(){this.pkceGenerator=new ul,this.guidGenerator=new cl,this.hashUtils=new Ta}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return ct.base64Encode(e)}base64Decode(e){return ct.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return ct.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},Ti=class{static deserializeJSONBlob(e){return b.StringUtils.isEmpty(e)?{}:JSON.parse(e)}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app},a=new b.AccountEntity;b.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm},a=new b.IdTokenEntity;b.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash},a=new b.AccessTokenEntity;b.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm},a=new b.RefreshTokenEntity;b.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={clientId:i.client_id,environment:i.environment,familyId:i.family_id},a=new b.AppMetadataEntity;b.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}},wa=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}},xa=class extends b.CacheManager{constructor(e,t,n){super(t,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e)if(e[n]instanceof b.AccountEntity)t.accounts[n]=e[n];else if(e[n]instanceof b.IdTokenEntity)t.idTokens[n]=e[n];else if(e[n]instanceof b.AccessTokenEntity)t.accessTokens[n]=e[n];else if(e[n]instanceof b.RefreshTokenEntity)t.refreshTokens[n]=e[n];else{if(!(e[n]instanceof b.AppMetadataEntity))continue;t.appMetadata[n]=e[n]}return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii("Item key: "+e),this.getCache()[e]}setItem(e,t){this.logger.tracePii("Item key: "+e);let n=this.getCache();n[e]=t,this.setCache(n)}getAccount(e){let t=this.getItem(e);return b.AccountEntity.isAccountEntity(t)?t:null}setAccount(e){let t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return b.IdTokenEntity.isIdTokenEntity(t)?t:null}setIdTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return b.AccessTokenEntity.isAccessTokenEntity(t)?t:null}setAccessTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return b.RefreshTokenEntity.isRefreshTokenEntity(t)?t:null}setRefreshTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return b.AppMetadataEntity.isAppMetadataEntity(e,t)?t:null}setAppMetadata(e){let t=e.generateAppMetadataKey();this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&b.ServerTelemetryEntity.isServerTelemetryEntity(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&b.AuthorityMetadataEntity.isAuthorityMetadataEntity(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t=this.getItem(e);return t&&b.ThrottlingEntity.isThrottlingEntity(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii("Item key: "+e);let t=!1,n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(e=>{this.removeItem(e)}),this.emitChange()}static generateInMemoryCache(e){return Ti.deserializeAllCache(Ti.deserializeJSONBlob(e))}static generateJsonCache(e){return wa.serializeAllCache(e)}updateCredentialCacheKey(e,t){let n=t.generateCredentialKey();if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}},GP={},$P={},VP={},KP={},YP={},Ia=class{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=wa.serializeAllCache(this.storage.getInMemoryCache());return b.StringUtils.isEmpty(this.cacheSnapshot)?this.logger.trace("No cache snapshot to merge"):(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,b.StringUtils.isEmpty(this.cacheSnapshot))this.logger.trace("No cache snapshot to deserialize");else{this.logger.trace("Reading cache snapshot from disk");let t=Ti.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}}getKVStore(){return this.storage.getCache()}async getAllAccounts(){let e;this.logger.trace("getAllAccounts called");try{return this.persistence&&(e=new b.TokenCacheContext(this,!1),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return!b.StringUtils.isEmpty(e)&&t&&t.length&&t.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return!b.StringUtils.isEmpty(e)&&t&&t.length&&t.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e){let t;this.logger.trace("removeAccount called");try{this.persistence&&(t=new b.TokenCacheContext(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(b.AccountEntity.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach(n=>{let i=t[n];if(e.hasOwnProperty(n)){let o=i!==null,a=typeof i=="object",s=!Array.isArray(i),c=e[n]!=null;o&&a&&s&&c?this.mergeUpdates(e[n],i):e[n]=i}else i!==null&&(e[n]=i)}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:s}}mergeRemovalsDict(e,t){let n={...e};return Object.keys(e).forEach(i=>{t&&t.hasOwnProperty(i)||delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...GP,...e.Account},IdToken:{...$P,...e.IdToken},AccessToken:{...VP,...e.AccessToken},RefreshToken:{...KP,...e.RefreshToken},AppMetadata:{...YP,...e.AppMetadata}}}},Ci=class{constructor(e){this.config=hv(e),this.cryptoProvider=new ba,this.logger=new b.Logger(this.config.system.loggerOptions,"@azure/msal-node","1.9.0"),this.storage=new xa(this.logger,this.config.auth.clientId,this.cryptoProvider),this.tokenCache=new Ia(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||b.ResponseMode.QUERY,authenticationScheme:b.AuthenticationScheme.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new b.AuthorizationCodeClient(n);return this.logger.verbose("Auth code client created",t.correlationId),i.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called",e.correlationId);let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:b.AuthenticationScheme.BEARER},i=this.initializeServerTelemetryManager(er.acquireTokenByCode,n.correlationId);try{let o=await this.buildOauthClientConfiguration(n.authority,n.correlationId,i,void 0,e.azureCloudOptions),a=new b.AuthorizationCodeClient(o);return this.logger.verbose("Auth code client created",n.correlationId),a.acquireToken(n,t)}catch(o){throw o instanceof b.AuthError&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:b.AuthenticationScheme.BEARER},n=this.initializeServerTelemetryManager(er.acquireTokenByRefreshToken,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new b.RefreshTokenClient(i);return this.logger.verbose("Refresh token client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof b.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(er.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new b.SilentFlowClient(i);return this.logger.verbose("Silent flow client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof b.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(er.acquireTokenByUsernamePassword,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new b.UsernamePasswordClient(i);return this.logger.verbose("Username password client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof b.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,i,o){this.logger.verbose("buildOauthClientConfiguration called",t);let a=o||this.config.auth.azureCloudOptions;this.logger.verbose("building oauth client configuration with the authority: "+e,t);let s=await this.createAuthority(e,i,t,a);return n?.updateRegionDiscoveryMetadata(s.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{proxyUrl:this.config.system.proxyUrl},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:this.clientAssertion?this.getClientAssertion(s):void 0},libraryInfo:{sku:"msal.js.node",version:"1.9.0",cpu:process.arch||b.Constants.EMPTY_STRING,os:process.platform||b.Constants.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}getClientAssertion(e){return{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===b.AuthenticationScheme.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=b.AuthenticationScheme.BEARER,e.claims&&!b.StringUtils.isEmpty(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...b.OIDC_DEFAULT_SCOPES],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){return new b.ServerTelemetryManager({clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1},this.storage)}async createAuthority(e,t,n,i){this.logger.verbose("createAuthority called",n);let o=b.Authority.generateAuthority(e,i),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:t};return await b.AuthorityFactory.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a)}clearCache(){this.storage.clear()}},tr=class{static fromAssertion(e){let t=new tr;return t.jwt=e,t}static fromCertificate(e,t,n){let i=new tr;return i.privateKey=t,i.thumbprint=e,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw b.ClientAuthError.createInvalidAssertionError()}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;let i=b.TimeUtils.nowSeconds();this.expirationTime=i+600;let o={alg:"RS256",x5t:ct.base64EncodeUrl(this.thumbprint,"hex")};this.publicCertificate&&Object.assign(o,{x5c:this.publicCertificate});let a={aud:this.jwtAudience,exp:this.expirationTime,iss:this.issuer,sub:this.issuer,nbf:i,jti:e.createNewGuid()};return this.jwt=qP.sign(a,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<b.TimeUtils.nowSeconds()}static parseCertificate(e){let t=/-----BEGIN CERTIFICATE-----\n(.+?)\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=t.exec(e))!==null;)n.push(i[1].replace(/\n/,b.Constants.EMPTY_STRING));return n}};Object.defineProperty(ie,"AuthError",{enumerable:!0,get:function(){return b.AuthError}}),Object.defineProperty(ie,"AuthErrorMessage",{enumerable:!0,get:function(){return b.AuthErrorMessage}}),Object.defineProperty(ie,"AzureCloudInstance",{enumerable:!0,get:function(){return b.AzureCloudInstance}}),Object.defineProperty(ie,"ClientAuthError",{enumerable:!0,get:function(){return b.ClientAuthError}}),Object.defineProperty(ie,"ClientAuthErrorMessage",{enumerable:!0,get:function(){return b.ClientAuthErrorMessage}}),Object.defineProperty(ie,"ClientConfigurationError",{enumerable:!0,get:function(){return b.ClientConfigurationError}}),Object.defineProperty(ie,"ClientConfigurationErrorMessage",{enumerable:!0,get:function(){return b.ClientConfigurationErrorMessage}}),Object.defineProperty(ie,"InteractionRequiredAuthError",{enumerable:!0,get:function(){return b.InteractionRequiredAuthError}}),Object.defineProperty(ie,"InteractionRequiredAuthErrorMessage",{enumerable:!0,get:function(){return b.InteractionRequiredAuthErrorMessage}}),Object.defineProperty(ie,"LogLevel",{enumerable:!0,get:function(){return b.LogLevel}}),Object.defineProperty(ie,"Logger",{enumerable:!0,get:function(){return b.Logger}}),Object.defineProperty(ie,"PromptValue",{enumerable:!0,get:function(){return b.PromptValue}}),Object.defineProperty(ie,"ProtocolMode",{enumerable:!0,get:function(){return b.ProtocolMode}}),Object.defineProperty(ie,"ResponseMode",{enumerable:!0,get:function(){return b.ResponseMode}}),Object.defineProperty(ie,"ServerError",{enumerable:!0,get:function(){return b.ServerError}}),Object.defineProperty(ie,"TokenCacheContext",{enumerable:!0,get:function(){return b.TokenCacheContext}}),ie.ClientApplication=Ci,ie.ClientAssertion=tr,ie.ConfidentialClientApplication=class extends Ci{constructor(r){super(r),this.setClientCredential(this.config)}async acquireTokenByClientCredential(r){this.logger.info("acquireTokenByClientCredential called",r.correlationId);let e={...r,...await this.initializeBaseRequest(r)},t={azureRegion:e.azureRegion,environmentRegion:process.env.REGION_NAME},n=this.initializeServerTelemetryManager(er.acquireTokenByClientCredential,e.correlationId,e.skipCache);try{let i=await this.buildOauthClientConfiguration(e.authority,e.correlationId,n,t,r.azureCloudOptions),o=new b.ClientCredentialClient(i);return this.logger.verbose("Client credential client created",e.correlationId),o.acquireToken(e)}catch(i){throw i instanceof b.AuthError&&i.setCorrelationId(e.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenOnBehalfOf(r){this.logger.info("acquireTokenOnBehalfOf called",r.correlationId);let e={...r,...await this.initializeBaseRequest(r)};try{let t=await this.buildOauthClientConfiguration(e.authority,e.correlationId,void 0,void 0,r.azureCloudOptions),n=new b.OnBehalfOfClient(t);return this.logger.verbose("On behalf of client created",e.correlationId),n.acquireToken(e)}catch(t){throw t instanceof b.AuthError&&t.setCorrelationId(e.correlationId),t}}setClientCredential(r){let e=!b.StringUtils.isEmpty(r.auth.clientSecret),t=!b.StringUtils.isEmpty(r.auth.clientAssertion),n=r.auth.clientCertificate||{thumbprint:b.Constants.EMPTY_STRING,privateKey:b.Constants.EMPTY_STRING},i=!b.StringUtils.isEmpty(n.thumbprint)||!b.StringUtils.isEmpty(n.privateKey);if(e&&t||t&&i||e&&i)throw b.ClientAuthError.createInvalidCredentialError();if(r.auth.clientSecret)this.clientSecret=r.auth.clientSecret;else if(r.auth.clientAssertion)this.clientAssertion=tr.fromAssertion(r.auth.clientAssertion);else{if(!i)throw b.ClientAuthError.createInvalidCredentialError();var o;this.clientAssertion=tr.fromCertificate(n.thumbprint,n.privateKey,(o=r.auth.clientCertificate)==null?void 0:o.x5c)}}},ie.CryptoProvider=ba,ie.DistributedCachePlugin=class{constructor(r,e){this.client=r,this.partitionManager=e}async beforeCacheAccess(r){let e=await this.partitionManager.getKey(),t=await this.client.get(e);r.tokenCache.deserialize(t)}async afterCacheAccess(r){if(r.cacheHasChanged){let e=r.tokenCache.getKVStore(),t=Object.values(e).filter(n=>b.AccountEntity.isAccountEntity(n));if(t.length>0){let n=t[0],i=await this.partitionManager.extractKey(n);await this.client.set(i,r.tokenCache.serialize())}}}},ie.NodeStorage=xa,ie.PublicClientApplication=class extends Ci{constructor(r){super(r)}async acquireTokenByDeviceCode(r){this.logger.info("acquireTokenByDeviceCode called",r.correlationId);let e=Object.assign(r,await this.initializeBaseRequest(r)),t=this.initializeServerTelemetryManager(er.acquireTokenByDeviceCode,e.correlationId);try{let n=await this.buildOauthClientConfiguration(e.authority,e.correlationId,t,void 0,r.azureCloudOptions),i=new b.DeviceCodeClient(n);return this.logger.verbose("Device code client created",e.correlationId),i.acquireToken(e)}catch(n){throw n instanceof b.AuthError&&n.setCorrelationId(e.correlationId),t.cacheFailedRequest(n),n}}},ie.TokenCache=Ia,ie.buildAppConfiguration=hv,ie.version="1.9.0"});var Tv=g(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});function Cl(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var w=su(),gv=Cl(_o()),vv=Cl(Mo()),WP=pi(),Ev=Cl(require("crypto")),JP=ol(),_a;(function(r){r.GET="get",r.POST="post"})(_a||(_a={}));var QP="REGION_NAME",XP=32,ZP={SHA256:"sha256"},pl={CV_CHARSET:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~"},yv={MSAL_SKU:"msal.js.node",JWT_BEARER_ASSERTION_TYPE:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"},rr;(function(r){r[r.acquireTokenSilent=62]="acquireTokenSilent",r[r.acquireTokenByUsernamePassword=371]="acquireTokenByUsernamePassword",r[r.acquireTokenByDeviceCode=671]="acquireTokenByDeviceCode",r[r.acquireTokenByClientCredential=771]="acquireTokenByClientCredential",r[r.acquireTokenByCode=871]="acquireTokenByCode",r[r.acquireTokenByRefreshToken=872]="acquireTokenByRefreshToken"})(rr||(rr={}));var Ur={ALGORITHM:"alg",RSA_256:"RS256",X5T:"x5t",X5C:"x5c",AUDIENCE:"aud",EXPIRATION_TIME:"exp",ISSUER:"iss",SUBJECT:"sub",NOT_BEFORE:"nbf",JWT_ID:"jti"},dl=class{async sendGetRequestAsync(e,t){let n={method:_a.GET,url:e,headers:t&&t.headers,validateStatus:()=>!0};t&&t.proxyUrl&&(n.proxy=!1,n.httpsAgent=vv(t.proxyUrl));let i=await gv(n);return{headers:i.headers,body:i.data,status:i.status}}async sendPostRequestAsync(e,t,n){let i={method:_a.POST,url:e,data:t&&t.body||w.Constants.EMPTY_STRING,timeout:n,headers:t&&t.headers,validateStatus:()=>!0};t&&t.proxyUrl&&(i.proxy=!1,i.httpsAgent=vv(t.proxyUrl));let o=await gv(i);return{headers:o.headers,body:o.data,status:o.status}}},fl=class{static getNetworkClient(){return new dl}},eR={clientId:w.Constants.EMPTY_STRING,authority:w.Constants.DEFAULT_AUTHORITY,clientSecret:w.Constants.EMPTY_STRING,clientAssertion:w.Constants.EMPTY_STRING,clientCertificate:{thumbprint:w.Constants.EMPTY_STRING,privateKey:w.Constants.EMPTY_STRING,x5c:w.Constants.EMPTY_STRING},knownAuthorities:[],cloudDiscoveryMetadata:w.Constants.EMPTY_STRING,authorityMetadata:w.Constants.EMPTY_STRING,clientCapabilities:[],protocolMode:w.ProtocolMode.AAD,azureCloudOptions:{azureCloudInstance:w.AzureCloudInstance.None,tenant:w.Constants.EMPTY_STRING}},tR={},rR={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:w.LogLevel.Info},nR={loggerOptions:rR,networkClient:fl.getNetworkClient(),proxyUrl:w.Constants.EMPTY_STRING},iR={application:{appName:w.Constants.EMPTY_STRING,appVersion:w.Constants.EMPTY_STRING}};function Cv({auth:r,cache:e,system:t,telemetry:n}){return{auth:{...eR,...r},cache:{...tR,...e},system:{...nR,...t},telemetry:{...iR,...n}}}var hl=class{generateGuid(){return WP.v4()}isGuid(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},ut=class{static base64Encode(e,t){return Buffer.from(e,t).toString("base64")}static base64EncodeUrl(e,t){return ut.base64Encode(e,t).replace(/=/g,w.Constants.EMPTY_STRING).replace(/\+/g,"-").replace(/\//g,"_")}static base64Decode(e){return Buffer.from(e,"base64").toString("utf8")}static base64DecodeUrl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");for(;t.length%4;)t+="=";return ut.base64Decode(t)}},Sa=class{sha256(e){return Ev.createHash(ZP.SHA256).update(e).digest()}},ml=class{constructor(){this.hashUtils=new Sa}async generatePkceCodes(){let e=this.generateCodeVerifier(),t=this.generateCodeChallengeFromVerifier(e);return{verifier:e,challenge:t}}generateCodeVerifier(){let e=[],t=256-256%pl.CV_CHARSET.length;for(;e.length<=XP;){let i=Ev.randomBytes(1)[0];if(i>=t)continue;let o=i%pl.CV_CHARSET.length;e.push(pl.CV_CHARSET[o])}let n=e.join(w.Constants.EMPTY_STRING);return ut.base64EncodeUrl(n)}generateCodeChallengeFromVerifier(e){return ut.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},Aa=class{constructor(){this.pkceGenerator=new ml,this.guidGenerator=new hl,this.hashUtils=new Sa}createNewGuid(){return this.guidGenerator.generateGuid()}base64Encode(e){return ut.base64Encode(e)}base64Decode(e){return ut.base64Decode(e)}generatePkceCodes(){return this.pkceGenerator.generatePkceCodes()}getPublicKeyThumbprint(){throw new Error("Method not implemented.")}removeTokenBindingKey(){throw new Error("Method not implemented.")}clearKeystore(){throw new Error("Method not implemented.")}signJwt(){throw new Error("Method not implemented.")}async hashString(e){return ut.base64EncodeUrl(this.hashUtils.sha256(e).toString("base64"),"base64")}},wi=class{static deserializeJSONBlob(e){return w.StringUtils.isEmpty(e)?{}:JSON.parse(e)}static deserializeAccounts(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,realm:i.realm,localAccountId:i.local_account_id,username:i.username,authorityType:i.authority_type,name:i.name,clientInfo:i.client_info,lastModificationTime:i.last_modification_time,lastModificationApp:i.last_modification_app},a=new w.AccountEntity;w.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeIdTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm},a=new w.IdTokenEntity;w.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAccessTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,realm:i.realm,target:i.target,cachedAt:i.cached_at,expiresOn:i.expires_on,extendedExpiresOn:i.extended_expires_on,refreshOn:i.refresh_on,keyId:i.key_id,tokenType:i.token_type,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash},a=new w.AccessTokenEntity;w.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeRefreshTokens(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={homeAccountId:i.home_account_id,environment:i.environment,credentialType:i.credential_type,clientId:i.client_id,secret:i.secret,familyId:i.family_id,target:i.target,realm:i.realm},a=new w.RefreshTokenEntity;w.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAppMetadata(e){let t={};return e&&Object.keys(e).map(function(n){let i=e[n],o={clientId:i.client_id,environment:i.environment,familyId:i.family_id},a=new w.AppMetadataEntity;w.CacheManager.toObject(a,o),t[n]=a}),t}static deserializeAllCache(e){return{accounts:e.Account?this.deserializeAccounts(e.Account):{},idTokens:e.IdToken?this.deserializeIdTokens(e.IdToken):{},accessTokens:e.AccessToken?this.deserializeAccessTokens(e.AccessToken):{},refreshTokens:e.RefreshToken?this.deserializeRefreshTokens(e.RefreshToken):{},appMetadata:e.AppMetadata?this.deserializeAppMetadata(e.AppMetadata):{}}}},Pa=class{static serializeJSONBlob(e){return JSON.stringify(e)}static serializeAccounts(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,realm:i.realm,local_account_id:i.localAccountId,username:i.username,authority_type:i.authorityType,name:i.name,client_info:i.clientInfo,last_modification_time:i.lastModificationTime,last_modification_app:i.lastModificationApp}}),t}static serializeIdTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm}}),t}static serializeAccessTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,realm:i.realm,target:i.target,cached_at:i.cachedAt,expires_on:i.expiresOn,extended_expires_on:i.extendedExpiresOn,refresh_on:i.refreshOn,key_id:i.keyId,token_type:i.tokenType,requestedClaims:i.requestedClaims,requestedClaimsHash:i.requestedClaimsHash}}),t}static serializeRefreshTokens(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={home_account_id:i.homeAccountId,environment:i.environment,credential_type:i.credentialType,client_id:i.clientId,secret:i.secret,family_id:i.familyId,target:i.target,realm:i.realm}}),t}static serializeAppMetadata(e){let t={};return Object.keys(e).map(function(n){let i=e[n];t[n]={client_id:i.clientId,environment:i.environment,family_id:i.familyId}}),t}static serializeAllCache(e){return{Account:this.serializeAccounts(e.accounts),IdToken:this.serializeIdTokens(e.idTokens),AccessToken:this.serializeAccessTokens(e.accessTokens),RefreshToken:this.serializeRefreshTokens(e.refreshTokens),AppMetadata:this.serializeAppMetadata(e.appMetadata)}}},Ra=class extends w.CacheManager{constructor(e,t,n){super(t,n),this.cache={},this.changeEmitters=[],this.logger=e}registerChangeEmitter(e){this.changeEmitters.push(e)}emitChange(){this.changeEmitters.forEach(e=>e.call(null))}cacheToInMemoryCache(e){let t={accounts:{},idTokens:{},accessTokens:{},refreshTokens:{},appMetadata:{}};for(let n in e)if(e[n]instanceof w.AccountEntity)t.accounts[n]=e[n];else if(e[n]instanceof w.IdTokenEntity)t.idTokens[n]=e[n];else if(e[n]instanceof w.AccessTokenEntity)t.accessTokens[n]=e[n];else if(e[n]instanceof w.RefreshTokenEntity)t.refreshTokens[n]=e[n];else if(e[n]instanceof w.AppMetadataEntity)t.appMetadata[n]=e[n];else continue;return t}inMemoryCacheToCache(e){let t=this.getCache();return t={...t,...e.accounts,...e.idTokens,...e.accessTokens,...e.refreshTokens,...e.appMetadata},t}getInMemoryCache(){return this.logger.trace("Getting in-memory cache"),this.cacheToInMemoryCache(this.getCache())}setInMemoryCache(e){this.logger.trace("Setting in-memory cache");let t=this.inMemoryCacheToCache(e);this.setCache(t),this.emitChange()}getCache(){return this.logger.trace("Getting cache key-value store"),this.cache}setCache(e){this.logger.trace("Setting cache key value store"),this.cache=e,this.emitChange()}getItem(e){return this.logger.tracePii(`Item key: ${e}`),this.getCache()[e]}setItem(e,t){this.logger.tracePii(`Item key: ${e}`);let n=this.getCache();n[e]=t,this.setCache(n)}getAccount(e){let t=this.getItem(e);return w.AccountEntity.isAccountEntity(t)?t:null}setAccount(e){let t=e.generateAccountKey();this.setItem(t,e)}getIdTokenCredential(e){let t=this.getItem(e);return w.IdTokenEntity.isIdTokenEntity(t)?t:null}setIdTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getAccessTokenCredential(e){let t=this.getItem(e);return w.AccessTokenEntity.isAccessTokenEntity(t)?t:null}setAccessTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getRefreshTokenCredential(e){let t=this.getItem(e);return w.RefreshTokenEntity.isRefreshTokenEntity(t)?t:null}setRefreshTokenCredential(e){let t=e.generateCredentialKey();this.setItem(t,e)}getAppMetadata(e){let t=this.getItem(e);return w.AppMetadataEntity.isAppMetadataEntity(e,t)?t:null}setAppMetadata(e){let t=e.generateAppMetadataKey();this.setItem(t,e)}getServerTelemetry(e){let t=this.getItem(e);return t&&w.ServerTelemetryEntity.isServerTelemetryEntity(e,t)?t:null}setServerTelemetry(e,t){this.setItem(e,t)}getAuthorityMetadata(e){let t=this.getItem(e);return t&&w.AuthorityMetadataEntity.isAuthorityMetadataEntity(e,t)?t:null}getAuthorityMetadataKeys(){return this.getKeys().filter(e=>this.isAuthorityMetadata(e))}setAuthorityMetadata(e,t){this.setItem(e,t)}getThrottlingCache(e){let t=this.getItem(e);return t&&w.ThrottlingEntity.isThrottlingEntity(e,t)?t:null}setThrottlingCache(e,t){this.setItem(e,t)}removeItem(e){this.logger.tracePii(`Item key: ${e}`);let t=!1,n=this.getCache();return n[e]&&(delete n[e],t=!0),t&&(this.setCache(n),this.emitChange()),t}containsKey(e){return this.getKeys().includes(e)}getKeys(){this.logger.trace("Retrieving all cache keys");let e=this.getCache();return[...Object.keys(e)]}async clear(){this.logger.trace("Clearing cache entries created by MSAL"),this.getKeys().forEach(t=>{this.removeItem(t)}),this.emitChange()}static generateInMemoryCache(e){return wi.deserializeAllCache(wi.deserializeJSONBlob(e))}static generateJsonCache(e){return Pa.serializeAllCache(e)}updateCredentialCacheKey(e,t){let n=t.generateCredentialKey();if(e!==n){let i=this.getItem(e);if(i)return this.removeItem(e),this.setItem(n,i),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),n;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}},bi={Account:{},IdToken:{},AccessToken:{},RefreshToken:{},AppMetadata:{}},Oa=class{constructor(e,t,n){this.cacheHasChanged=!1,this.storage=e,this.storage.registerChangeEmitter(this.handleChangeEvent.bind(this)),n&&(this.persistence=n),this.logger=t}hasChanged(){return this.cacheHasChanged}serialize(){this.logger.trace("Serializing in-memory cache");let e=Pa.serializeAllCache(this.storage.getInMemoryCache());return w.StringUtils.isEmpty(this.cacheSnapshot)?this.logger.trace("No cache snapshot to merge"):(this.logger.trace("Reading cache snapshot from disk"),e=this.mergeState(JSON.parse(this.cacheSnapshot),e)),this.cacheHasChanged=!1,JSON.stringify(e)}deserialize(e){if(this.logger.trace("Deserializing JSON to in-memory cache"),this.cacheSnapshot=e,w.StringUtils.isEmpty(this.cacheSnapshot))this.logger.trace("No cache snapshot to deserialize");else{this.logger.trace("Reading cache snapshot from disk");let t=wi.deserializeAllCache(this.overlayDefaults(JSON.parse(this.cacheSnapshot)));this.storage.setInMemoryCache(t)}}getKVStore(){return this.storage.getCache()}async getAllAccounts(){this.logger.trace("getAllAccounts called");let e;try{return this.persistence&&(e=new w.TokenCacheContext(this,!1),await this.persistence.beforeCacheAccess(e)),this.storage.getAllAccounts()}finally{this.persistence&&e&&await this.persistence.afterCacheAccess(e)}}async getAccountByHomeId(e){let t=await this.getAllAccounts();return!w.StringUtils.isEmpty(e)&&t&&t.length&&t.filter(n=>n.homeAccountId===e)[0]||null}async getAccountByLocalId(e){let t=await this.getAllAccounts();return!w.StringUtils.isEmpty(e)&&t&&t.length&&t.filter(n=>n.localAccountId===e)[0]||null}async removeAccount(e){this.logger.trace("removeAccount called");let t;try{this.persistence&&(t=new w.TokenCacheContext(this,!0),await this.persistence.beforeCacheAccess(t)),await this.storage.removeAccount(w.AccountEntity.generateAccountCacheKey(e))}finally{this.persistence&&t&&await this.persistence.afterCacheAccess(t)}}handleChangeEvent(){this.cacheHasChanged=!0}mergeState(e,t){this.logger.trace("Merging in-memory cache with cache snapshot");let n=this.mergeRemovals(e,t);return this.mergeUpdates(n,t)}mergeUpdates(e,t){return Object.keys(t).forEach(n=>{let i=t[n];if(!e.hasOwnProperty(n))i!==null&&(e[n]=i);else{let o=i!==null,a=typeof i=="object",s=!Array.isArray(i),c=typeof e[n]<"u"&&e[n]!==null;o&&a&&s&&c?this.mergeUpdates(e[n],i):e[n]=i}}),e}mergeRemovals(e,t){this.logger.trace("Remove updated entries in cache");let n=e.Account?this.mergeRemovalsDict(e.Account,t.Account):e.Account,i=e.AccessToken?this.mergeRemovalsDict(e.AccessToken,t.AccessToken):e.AccessToken,o=e.RefreshToken?this.mergeRemovalsDict(e.RefreshToken,t.RefreshToken):e.RefreshToken,a=e.IdToken?this.mergeRemovalsDict(e.IdToken,t.IdToken):e.IdToken,s=e.AppMetadata?this.mergeRemovalsDict(e.AppMetadata,t.AppMetadata):e.AppMetadata;return{...e,Account:n,AccessToken:i,RefreshToken:o,IdToken:a,AppMetadata:s}}mergeRemovalsDict(e,t){let n={...e};return Object.keys(e).forEach(i=>{(!t||!t.hasOwnProperty(i))&&delete n[i]}),n}overlayDefaults(e){return this.logger.trace("Overlaying input cache with the default cache"),{Account:{...bi.Account,...e.Account},IdToken:{...bi.IdToken,...e.IdToken},AccessToken:{...bi.AccessToken,...e.AccessToken},RefreshToken:{...bi.RefreshToken,...e.RefreshToken},AppMetadata:{...bi.AppMetadata,...e.AppMetadata}}}},oR="@azure/msal-node",gl="1.9.0",xi=class{constructor(e){this.config=Cv(e),this.cryptoProvider=new Aa,this.logger=new w.Logger(this.config.system.loggerOptions,oR,gl),this.storage=new Ra(this.logger,this.config.auth.clientId,this.cryptoProvider),this.tokenCache=new Oa(this.storage,this.logger,this.config.cache.cachePlugin)}async getAuthCodeUrl(e){this.logger.info("getAuthCodeUrl called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),responseMode:e.responseMode||w.ResponseMode.QUERY,authenticationScheme:w.AuthenticationScheme.BEARER},n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new w.AuthorizationCodeClient(n);return this.logger.verbose("Auth code client created",t.correlationId),i.getAuthCodeUrl(t)}async acquireTokenByCode(e,t){this.logger.info("acquireTokenByCode called",e.correlationId);let n={...e,...await this.initializeBaseRequest(e),authenticationScheme:w.AuthenticationScheme.BEARER},i=this.initializeServerTelemetryManager(rr.acquireTokenByCode,n.correlationId);try{let o=await this.buildOauthClientConfiguration(n.authority,n.correlationId,i,void 0,e.azureCloudOptions),a=new w.AuthorizationCodeClient(o);return this.logger.verbose("Auth code client created",n.correlationId),a.acquireToken(n,t)}catch(o){throw o instanceof w.AuthError&&o.setCorrelationId(n.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenByRefreshToken(e){this.logger.info("acquireTokenByRefreshToken called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e),authenticationScheme:w.AuthenticationScheme.BEARER},n=this.initializeServerTelemetryManager(rr.acquireTokenByRefreshToken,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new w.RefreshTokenClient(i);return this.logger.verbose("Refresh token client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof w.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenSilent(e){let t={...e,...await this.initializeBaseRequest(e),forceRefresh:e.forceRefresh||!1},n=this.initializeServerTelemetryManager(rr.acquireTokenSilent,t.correlationId,t.forceRefresh);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new w.SilentFlowClient(i);return this.logger.verbose("Silent flow client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof w.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}async acquireTokenByUsernamePassword(e){this.logger.info("acquireTokenByUsernamePassword called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},n=this.initializeServerTelemetryManager(rr.acquireTokenByUsernamePassword,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new w.UsernamePasswordClient(i);return this.logger.verbose("Username password client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof w.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}getTokenCache(){return this.logger.info("getTokenCache called"),this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}async buildOauthClientConfiguration(e,t,n,i,o){this.logger.verbose("buildOauthClientConfiguration called",t);let a=o||this.config.auth.azureCloudOptions;this.logger.verbose(`building oauth client configuration with the authority: ${e}`,t);let s=await this.createAuthority(e,i,t,a);return n?.updateRegionDiscoveryMetadata(s.regionDiscoveryMetadata),{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{proxyUrl:this.config.system.proxyUrl},loggerOptions:{logLevel:this.config.system.loggerOptions.logLevel,loggerCallback:this.config.system.loggerOptions.loggerCallback,piiLoggingEnabled:this.config.system.loggerOptions.piiLoggingEnabled,correlationId:t},cryptoInterface:this.cryptoProvider,networkInterface:this.config.system.networkClient,storageInterface:this.storage,serverTelemetryManager:n,clientCredentials:{clientSecret:this.clientSecret,clientAssertion:this.clientAssertion?this.getClientAssertion(s):void 0},libraryInfo:{sku:yv.MSAL_SKU,version:gl,cpu:process.arch||w.Constants.EMPTY_STRING,os:process.platform||w.Constants.EMPTY_STRING},telemetry:this.config.telemetry,persistencePlugin:this.config.cache.cachePlugin,serializableCache:this.tokenCache}}getClientAssertion(e){return{assertion:this.clientAssertion.getJwt(this.cryptoProvider,this.config.auth.clientId,e.tokenEndpoint),assertionType:yv.JWT_BEARER_ASSERTION_TYPE}}async initializeBaseRequest(e){return this.logger.verbose("initializeRequestScopes called",e.correlationId),e.authenticationScheme&&e.authenticationScheme===w.AuthenticationScheme.POP&&this.logger.verbose("Authentication Scheme 'pop' is not supported yet, setting Authentication Scheme to 'Bearer' for request",e.correlationId),e.authenticationScheme=w.AuthenticationScheme.BEARER,e.claims&&!w.StringUtils.isEmpty(e.claims)&&(e.requestedClaimsHash=await this.cryptoProvider.hashString(e.claims)),{...e,scopes:[...e&&e.scopes||[],...w.OIDC_DEFAULT_SCOPES],correlationId:e&&e.correlationId||this.cryptoProvider.createNewGuid(),authority:e.authority||this.config.auth.authority}}initializeServerTelemetryManager(e,t,n){let i={clientId:this.config.auth.clientId,correlationId:t,apiId:e,forceRefresh:n||!1};return new w.ServerTelemetryManager(i,this.storage)}async createAuthority(e,t,n,i){this.logger.verbose("createAuthority called",n);let o=w.Authority.generateAuthority(e,i),a={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,azureRegionConfiguration:t};return await w.AuthorityFactory.createDiscoveredInstance(o,this.config.system.networkClient,this.storage,a)}clearCache(){this.storage.clear()}},vl=class extends xi{constructor(e){super(e)}async acquireTokenByDeviceCode(e){this.logger.info("acquireTokenByDeviceCode called",e.correlationId);let t=Object.assign(e,await this.initializeBaseRequest(e)),n=this.initializeServerTelemetryManager(rr.acquireTokenByDeviceCode,t.correlationId);try{let i=await this.buildOauthClientConfiguration(t.authority,t.correlationId,n,void 0,e.azureCloudOptions),o=new w.DeviceCodeClient(i);return this.logger.verbose("Device code client created",t.correlationId),o.acquireToken(t)}catch(i){throw i instanceof w.AuthError&&i.setCorrelationId(t.correlationId),n.cacheFailedRequest(i),i}}},nr=class{static fromAssertion(e){let t=new nr;return t.jwt=e,t}static fromCertificate(e,t,n){let i=new nr;return i.privateKey=t,i.thumbprint=e,n&&(i.publicCertificate=this.parseCertificate(n)),i}getJwt(e,t,n){if(this.privateKey&&this.thumbprint)return this.jwt&&!this.isExpired()&&t===this.issuer&&n===this.jwtAudience?this.jwt:this.createJwt(e,t,n);if(this.jwt)return this.jwt;throw w.ClientAuthError.createInvalidAssertionError()}createJwt(e,t,n){this.issuer=t,this.jwtAudience=n;let i=w.TimeUtils.nowSeconds();this.expirationTime=i+600;let o={alg:Ur.RSA_256,x5t:ut.base64EncodeUrl(this.thumbprint,"hex")};this.publicCertificate&&Object.assign(o,{x5c:this.publicCertificate});let a={[Ur.AUDIENCE]:this.jwtAudience,[Ur.EXPIRATION_TIME]:this.expirationTime,[Ur.ISSUER]:this.issuer,[Ur.SUBJECT]:this.issuer,[Ur.NOT_BEFORE]:i,[Ur.JWT_ID]:e.createNewGuid()};return this.jwt=JP.sign(a,this.privateKey,{header:o}),this.jwt}isExpired(){return this.expirationTime<w.TimeUtils.nowSeconds()}static parseCertificate(e){let t=/-----BEGIN CERTIFICATE-----\n(.+?)\n-----END CERTIFICATE-----/gs,n=[],i;for(;(i=t.exec(e))!==null;)n.push(i[1].replace(/\n/,w.Constants.EMPTY_STRING));return n}},yl=class extends xi{constructor(e){super(e),this.setClientCredential(this.config)}async acquireTokenByClientCredential(e){this.logger.info("acquireTokenByClientCredential called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)},n={azureRegion:t.azureRegion,environmentRegion:process.env[QP]},i=this.initializeServerTelemetryManager(rr.acquireTokenByClientCredential,t.correlationId,t.skipCache);try{let o=await this.buildOauthClientConfiguration(t.authority,t.correlationId,i,n,e.azureCloudOptions),a=new w.ClientCredentialClient(o);return this.logger.verbose("Client credential client created",t.correlationId),a.acquireToken(t)}catch(o){throw o instanceof w.AuthError&&o.setCorrelationId(t.correlationId),i.cacheFailedRequest(o),o}}async acquireTokenOnBehalfOf(e){this.logger.info("acquireTokenOnBehalfOf called",e.correlationId);let t={...e,...await this.initializeBaseRequest(e)};try{let n=await this.buildOauthClientConfiguration(t.authority,t.correlationId,void 0,void 0,e.azureCloudOptions),i=new w.OnBehalfOfClient(n);return this.logger.verbose("On behalf of client created",t.correlationId),i.acquireToken(t)}catch(n){throw n instanceof w.AuthError&&n.setCorrelationId(t.correlationId),n}}setClientCredential(e){let t=!w.StringUtils.isEmpty(e.auth.clientSecret),n=!w.StringUtils.isEmpty(e.auth.clientAssertion),i=e.auth.clientCertificate||{thumbprint:w.Constants.EMPTY_STRING,privateKey:w.Constants.EMPTY_STRING},o=!w.StringUtils.isEmpty(i.thumbprint)||!w.StringUtils.isEmpty(i.privateKey);if(t&&n||n&&o||t&&o)throw w.ClientAuthError.createInvalidCredentialError();if(e.auth.clientSecret){this.clientSecret=e.auth.clientSecret;return}if(e.auth.clientAssertion){this.clientAssertion=nr.fromAssertion(e.auth.clientAssertion);return}if(o){var a;this.clientAssertion=nr.fromCertificate(i.thumbprint,i.privateKey,(a=e.auth.clientCertificate)==null?void 0:a.x5c)}else throw w.ClientAuthError.createInvalidCredentialError()}},El=class{constructor(e,t){this.client=e,this.partitionManager=t}async beforeCacheAccess(e){let t=await this.partitionManager.getKey(),n=await this.client.get(t);e.tokenCache.deserialize(n)}async afterCacheAccess(e){if(e.cacheHasChanged){let t=e.tokenCache.getKVStore(),n=Object.values(t).filter(i=>w.AccountEntity.isAccountEntity(i));if(n.length>0){let i=n[0],o=await this.partitionManager.extractKey(i);await this.client.set(o,e.tokenCache.serialize())}}}};Object.defineProperty(oe,"AuthError",{enumerable:!0,get:function(){return w.AuthError}});Object.defineProperty(oe,"AuthErrorMessage",{enumerable:!0,get:function(){return w.AuthErrorMessage}});Object.defineProperty(oe,"AzureCloudInstance",{enumerable:!0,get:function(){return w.AzureCloudInstance}});Object.defineProperty(oe,"ClientAuthError",{enumerable:!0,get:function(){return w.ClientAuthError}});Object.defineProperty(oe,"ClientAuthErrorMessage",{enumerable:!0,get:function(){return w.ClientAuthErrorMessage}});Object.defineProperty(oe,"ClientConfigurationError",{enumerable:!0,get:function(){return w.ClientConfigurationError}});Object.defineProperty(oe,"ClientConfigurationErrorMessage",{enumerable:!0,get:function(){return w.ClientConfigurationErrorMessage}});Object.defineProperty(oe,"InteractionRequiredAuthError",{enumerable:!0,get:function(){return w.InteractionRequiredAuthError}});Object.defineProperty(oe,"InteractionRequiredAuthErrorMessage",{enumerable:!0,get:function(){return w.InteractionRequiredAuthErrorMessage}});Object.defineProperty(oe,"LogLevel",{enumerable:!0,get:function(){return w.LogLevel}});Object.defineProperty(oe,"Logger",{enumerable:!0,get:function(){return w.Logger}});Object.defineProperty(oe,"PromptValue",{enumerable:!0,get:function(){return w.PromptValue}});Object.defineProperty(oe,"ProtocolMode",{enumerable:!0,get:function(){return w.ProtocolMode}});Object.defineProperty(oe,"ResponseMode",{enumerable:!0,get:function(){return w.ResponseMode}});Object.defineProperty(oe,"ServerError",{enumerable:!0,get:function(){return w.ServerError}});Object.defineProperty(oe,"TokenCacheContext",{enumerable:!0,get:function(){return w.TokenCacheContext}});oe.ClientApplication=xi;oe.ClientAssertion=nr;oe.ConfidentialClientApplication=yl;oe.CryptoProvider=Aa;oe.DistributedCachePlugin=El;oe.NodeStorage=Ra;oe.PublicClientApplication=vl;oe.TokenCache=Oa;oe.buildAppConfiguration=Cv;oe.version=gl});var bv=g((OB,Tl)=>{"use strict";process.env.NODE_ENV==="production"?Tl.exports=mv():Tl.exports=Tv()});var xv=g(wv=>{"use strict";Object.defineProperty(wv,"__esModule",{value:!0})});var Iv=g(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka._globalThis=void 0;ka._globalThis=typeof globalThis=="object"?globalThis:global});var _v=g(Lr=>{"use strict";var aR=Lr&&Lr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),sR=Lr&&Lr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&aR(e,r,t)};Object.defineProperty(Lr,"__esModule",{value:!0});sR(Iv(),Lr)});var Sv=g(Br=>{"use strict";var cR=Br&&Br.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),uR=Br&&Br.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&cR(e,r,t)};Object.defineProperty(Br,"__esModule",{value:!0});uR(_v(),Br)});var bl=g(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.VERSION=void 0;Na.VERSION="1.1.0"});var Rv=g(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.isCompatible=bn._makeCompatibilityCheck=void 0;var lR=bl(),Av=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Pv(r){var e=new Set([r]),t=new Set,n=r.match(Av);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(c){return c===r};function o(s){return t.add(s),!1}function a(s){return e.add(s),!0}return function(c){if(e.has(c))return!0;if(t.has(c))return!1;var u=c.match(Av);if(!u)return o(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||i.major!==l.major?o(c):i.major===0?i.minor===l.minor&&i.patch<=l.patch?a(c):o(c):i.minor<=l.minor?a(c):o(c)}}bn._makeCompatibilityCheck=Pv;bn.isCompatible=Pv(lR.VERSION)});var wn=g(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.unregisterGlobal=ir.getGlobal=ir.registerGlobal=void 0;var pR=Sv(),Ii=bl(),dR=Rv(),fR=Ii.VERSION.split(".")[0],_i=Symbol.for("opentelemetry.js.api."+fR),Si=pR._globalThis;function hR(r,e,t,n){var i;n===void 0&&(n=!1);var o=Si[_i]=(i=Si[_i])!==null&&i!==void 0?i:{version:Ii.VERSION};if(!n&&o[r]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(a.stack||a.message),!1}if(o.version!==Ii.VERSION){var a=new Error("@opentelemetry/api: All API registration versions must match");return t.error(a.stack||a.message),!1}return o[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+Ii.VERSION+"."),!0}ir.registerGlobal=hR;function mR(r){var e,t,n=(e=Si[_i])===null||e===void 0?void 0:e.version;if(!(!n||!dR.isCompatible(n)))return(t=Si[_i])===null||t===void 0?void 0:t[r]}ir.getGlobal=mR;function gR(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+Ii.VERSION+".");var t=Si[_i];t&&delete t[r]}ir.unregisterGlobal=gR});var Ov=g(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});Ma.DiagComponentLogger=void 0;var vR=wn(),yR=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ai("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ai("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ai("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ai("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ai("verbose",this._namespace,e)},r}();Ma.DiagComponentLogger=yR;function Ai(r,e,t){var n=vR.getGlobal("diag");if(!!n)return t.unshift(e),n[r].apply(n,t)}});var Da=g(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.DiagLogLevel=void 0;var ER;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(ER=Pi.DiagLogLevel||(Pi.DiagLogLevel={}))});var kv=g(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});Ua.createLogLevelDiagLogger=void 0;var Ft=Da();function CR(r,e){r<Ft.DiagLogLevel.NONE?r=Ft.DiagLogLevel.NONE:r>Ft.DiagLogLevel.ALL&&(r=Ft.DiagLogLevel.ALL),e=e||{};function t(n,i){var o=e[n];return typeof o=="function"&&r>=i?o.bind(e):function(){}}return{error:t("error",Ft.DiagLogLevel.ERROR),warn:t("warn",Ft.DiagLogLevel.WARN),info:t("info",Ft.DiagLogLevel.INFO),debug:t("debug",Ft.DiagLogLevel.DEBUG),verbose:t("verbose",Ft.DiagLogLevel.VERBOSE)}}Ua.createLogLevelDiagLogger=CR});var xn=g(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.DiagAPI=void 0;var TR=Ov(),bR=kv(),wR=Da(),La=wn(),xR="diag",IR=function(){function r(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=La.getGlobal("diag");if(!!a)return a[n].apply(a,i)}}var t=this;t.setLogger=function(n,i){var o,a;if(i===void 0&&(i=wR.DiagLogLevel.INFO),n===t){var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((o=s.stack)!==null&&o!==void 0?o:s.message),!1}var c=La.getGlobal("diag"),u=bR.createLogLevelDiagLogger(i,n);if(c){var l=(a=new Error().stack)!==null&&a!==void 0?a:"<failed to generate stacktrace>";c.warn("Current logger will be overwritten from "+l),u.warn("Current logger will overwrite one already registered from "+l)}return La.registerGlobal("diag",u,t,!0)},t.disable=function(){La.unregisterGlobal(xR,t)},t.createComponentLogger=function(n){return new TR.DiagComponentLogger(n)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}();Ba.DiagAPI=IR});var Nv=g(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.BaggageImpl=void 0;var _R=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(!!t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=e[0],n=e[1];return[t,n]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new r(this._entries),i=0,o=e;i<o.length;i++){var a=o[i];n._entries.delete(a)}return n},r.prototype.clear=function(){return new r},r}();qa.BaggageImpl=_R});var Mv=g(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.baggageEntryMetadataSymbol=void 0;ja.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var wl=g(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.baggageEntryMetadataFromString=In.createBaggage=void 0;var SR=xn(),AR=Nv(),PR=Mv(),RR=SR.DiagAPI.instance();function OR(r){return r===void 0&&(r={}),new AR.BaggageImpl(new Map(Object.entries(r)))}In.createBaggage=OR;function kR(r){return typeof r!="string"&&(RR.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:PR.baggageEntryMetadataSymbol,toString:function(){return r}}}In.baggageEntryMetadataFromString=kR});var Uv=g(Dv=>{"use strict";Object.defineProperty(Dv,"__esModule",{value:!0})});var Bv=g(Lv=>{"use strict";Object.defineProperty(Lv,"__esModule",{value:!0})});var jv=g(qv=>{"use strict";Object.defineProperty(qv,"__esModule",{value:!0})});var Fv=g(Fa=>{"use strict";Object.defineProperty(Fa,"__esModule",{value:!0});Fa.DiagConsoleLogger=void 0;var xl=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],NR=function(){function r(){function e(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,i)}}}for(var t=0;t<xl.length;t++)this[xl[t].n]=e(xl[t].c)}return r}();Fa.DiagConsoleLogger=NR});var Hv=g(or=>{"use strict";var MR=or&&or.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zv=or&&or.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&MR(e,r,t)};Object.defineProperty(or,"__esModule",{value:!0});zv(Fv(),or);zv(Da(),or)});var Il=g(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.defaultTextMapSetter=_n.defaultTextMapGetter=void 0;_n.defaultTextMapGetter={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}};_n.defaultTextMapSetter={set:function(r,e,t){r!=null&&(r[e]=t)}}});var $v=g(Gv=>{"use strict";Object.defineProperty(Gv,"__esModule",{value:!0})});var Kv=g(Vv=>{"use strict";Object.defineProperty(Vv,"__esModule",{value:!0})});var Ri=g(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.ROOT_CONTEXT=Sn.createContextKey=void 0;function DR(r){return Symbol.for(r)}Sn.createContextKey=DR;var UR=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,i){var o=new r(t._currentContext);return o._currentContext.set(n,i),o},t.deleteValue=function(n){var i=new r(t._currentContext);return i._currentContext.delete(n),i}}return r}();Sn.ROOT_CONTEXT=new UR});var Yv=g(An=>{"use strict";var LR=An&&An.__spreadArray||function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r};Object.defineProperty(An,"__esModule",{value:!0});An.NoopContextManager=void 0;var BR=Ri(),qR=function(){function r(){}return r.prototype.active=function(){return BR.ROOT_CONTEXT},r.prototype.with=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return t.call.apply(t,LR([n],i))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}();An.NoopContextManager=qR});var Al=g(Pn=>{"use strict";var jR=Pn&&Pn.__spreadArray||function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.ContextAPI=void 0;var FR=Yv(),_l=wn(),Wv=xn(),Sl="context",zR=new FR.NoopContextManager,HR=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return _l.registerGlobal(Sl,e,Wv.DiagAPI.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return(i=this._getContextManager()).with.apply(i,jR([e,t,n],o))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return _l.getGlobal(Sl)||zR},r.prototype.disable=function(){this._getContextManager().disable(),_l.unregisterGlobal(Sl,Wv.DiagAPI.instance())},r}();Pn.ContextAPI=HR});var Pl=g(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.TraceFlags=void 0;var GR;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(GR=Oi.TraceFlags||(Oi.TraceFlags={}))});var za=g(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.INVALID_SPAN_CONTEXT=St.INVALID_TRACEID=St.INVALID_SPANID=void 0;var $R=Pl();St.INVALID_SPANID="0000000000000000";St.INVALID_TRACEID="00000000000000000000000000000000";St.INVALID_SPAN_CONTEXT={traceId:St.INVALID_TRACEID,spanId:St.INVALID_SPANID,traceFlags:$R.TraceFlags.NONE}});var Ga=g(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});Ha.NonRecordingSpan=void 0;var VR=za(),KR=function(){function r(e){e===void 0&&(e=VR.INVALID_SPAN_CONTEXT),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}();Ha.NonRecordingSpan=KR});var Ol=g(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.getSpanContext=rt.setSpanContext=rt.deleteSpan=rt.setSpan=rt.getSpan=void 0;var YR=Ri(),WR=Ga(),Rl=YR.createContextKey("OpenTelemetry Context Key SPAN");function Jv(r){return r.getValue(Rl)||void 0}rt.getSpan=Jv;function Qv(r,e){return r.setValue(Rl,e)}rt.setSpan=Qv;function JR(r){return r.deleteValue(Rl)}rt.deleteSpan=JR;function QR(r,e){return Qv(r,new WR.NonRecordingSpan(e))}rt.setSpanContext=QR;function XR(r){var e;return(e=Jv(r))===null||e===void 0?void 0:e.spanContext()}rt.getSpanContext=XR});var $a=g(At=>{"use strict";Object.defineProperty(At,"__esModule",{value:!0});At.wrapSpanContext=At.isSpanContextValid=At.isValidSpanId=At.isValidTraceId=void 0;var Xv=za(),ZR=Ga(),eO=/^([0-9a-f]{32})$/i,tO=/^[0-9a-f]{16}$/i;function Zv(r){return eO.test(r)&&r!==Xv.INVALID_TRACEID}At.isValidTraceId=Zv;function ey(r){return tO.test(r)&&r!==Xv.INVALID_SPANID}At.isValidSpanId=ey;function rO(r){return Zv(r.traceId)&&ey(r.spanId)}At.isSpanContextValid=rO;function nO(r){return new ZR.NonRecordingSpan(r)}At.wrapSpanContext=nO});var Nl=g(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.NoopTracer=void 0;var iO=Al(),ty=Ol(),kl=Ga(),oO=$a(),ry=iO.ContextAPI.getInstance(),aO=function(){function r(){}return r.prototype.startSpan=function(e,t,n){var i=Boolean(t?.root);if(i)return new kl.NonRecordingSpan;var o=n&&ty.getSpanContext(n);return sO(o)&&oO.isSpanContextValid(o)?new kl.NonRecordingSpan(o):new kl.NonRecordingSpan},r.prototype.startActiveSpan=function(e,t,n,i){var o,a,s;if(!(arguments.length<2)){arguments.length===2?s=t:arguments.length===3?(o=t,s=n):(o=t,a=n,s=i);var c=a??ry.active(),u=this.startSpan(e,o,c),l=ty.setSpan(c,u);return ry.with(l,s,void 0,u)}},r}();Va.NoopTracer=aO;function sO(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}});var Ml=g(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.ProxyTracer=void 0;var cO=Nl(),uO=new cO.NoopTracer,lO=function(){function r(e,t,n,i){this._provider=e,this.name=t,this.version=n,this.options=i}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,i){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):uO},r}();Ka.ProxyTracer=lO});var ny=g(Ya=>{"use strict";Object.defineProperty(Ya,"__esModule",{value:!0});Ya.NoopTracerProvider=void 0;var pO=Nl(),dO=function(){function r(){}return r.prototype.getTracer=function(e,t,n){return new pO.NoopTracer},r}();Ya.NoopTracerProvider=dO});var Dl=g(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.ProxyTracerProvider=void 0;var fO=Ml(),hO=ny(),mO=new hO.NoopTracerProvider,gO=function(){function r(){}return r.prototype.getTracer=function(e,t,n){var i;return(i=this.getDelegateTracer(e,t,n))!==null&&i!==void 0?i:new fO.ProxyTracer(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:mO},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t,n){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getTracer(e,t,n)},r}();Wa.ProxyTracerProvider=gO});var oy=g(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0})});var ay=g(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.SamplingDecision=void 0;var vO;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(vO=ki.SamplingDecision||(ki.SamplingDecision={}))});var cy=g(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0})});var uy=g(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.SpanKind=void 0;var yO;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(yO=Ni.SpanKind||(Ni.SpanKind={}))});var py=g(ly=>{"use strict";Object.defineProperty(ly,"__esModule",{value:!0})});var fy=g(dy=>{"use strict";Object.defineProperty(dy,"__esModule",{value:!0})});var hy=g(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.SpanStatusCode=void 0;var EO;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(EO=Mi.SpanStatusCode||(Mi.SpanStatusCode={}))});var gy=g(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0})});var vy=g(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.validateValue=Rn.validateKey=void 0;var Ul="[_0-9a-z-*/]",CO="[a-z]"+Ul+"{0,255}",TO="[a-z0-9]"+Ul+"{0,240}@[a-z]"+Ul+"{0,13}",bO=new RegExp("^(?:"+CO+"|"+TO+")$"),wO=/^[ -~]{0,255}[!-~]$/,xO=/,|=/;function IO(r){return bO.test(r)}Rn.validateKey=IO;function _O(r){return wO.test(r)&&!xO.test(r)}Rn.validateValue=_O});var by=g(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.TraceStateImpl=void 0;var yy=vy(),Ey=32,SO=512,Cy=",",Ty="=",AO=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+Ty+e.get(n)),t},[]).join(Cy)},r.prototype._parse=function(e){e.length>SO||(this._internalState=e.split(Cy).reverse().reduce(function(t,n){var i=n.trim(),o=i.indexOf(Ty);if(o!==-1){var a=i.slice(0,o),s=i.slice(o+1,n.length);yy.validateKey(a)&&yy.validateValue(s)&&t.set(a,s)}return t},new Map),this._internalState.size>Ey&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Ey))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}();Ja.TraceStateImpl=AO});var wy=g(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});Qa.createTraceState=void 0;var PO=by();function RO(r){return new PO.TraceStateImpl(r)}Qa.createTraceState=RO});var Iy=g(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0})});var Sy=g(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0})});var Py=g(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0})});var Oy=g(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0})});var Dy=g(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.TraceAPI=void 0;var Ll=wn(),ky=Dl(),Ny=$a(),Di=Ol(),My=xn(),Bl="trace",OO=function(){function r(){this._proxyTracerProvider=new ky.ProxyTracerProvider,this.wrapSpanContext=Ny.wrapSpanContext,this.isSpanContextValid=Ny.isSpanContextValid,this.deleteSpan=Di.deleteSpan,this.getSpan=Di.getSpan,this.getSpanContext=Di.getSpanContext,this.setSpan=Di.setSpan,this.setSpanContext=Di.setSpanContext}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=Ll.registerGlobal(Bl,this._proxyTracerProvider,My.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return Ll.getGlobal(Bl)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){Ll.unregisterGlobal(Bl,My.DiagAPI.instance()),this._proxyTracerProvider=new ky.ProxyTracerProvider},r}();Xa.TraceAPI=OO});var Uy=g(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.NoopTextMapPropagator=void 0;var kO=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}();Za.NoopTextMapPropagator=kO});var Ly=g(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.deleteBaggage=ar.setBaggage=ar.getBaggage=void 0;var NO=Ri(),ql=NO.createContextKey("OpenTelemetry Baggage Key");function MO(r){return r.getValue(ql)||void 0}ar.getBaggage=MO;function DO(r,e){return r.setValue(ql,e)}ar.setBaggage=DO;function UO(r){return r.deleteValue(ql)}ar.deleteBaggage=UO});var jy=g(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.PropagationAPI=void 0;var jl=wn(),LO=Uy(),By=Il(),Fl=Ly(),BO=wl(),qy=xn(),zl="propagation",qO=new LO.NoopTextMapPropagator,jO=function(){function r(){this.createBaggage=BO.createBaggage,this.getBaggage=Fl.getBaggage,this.setBaggage=Fl.setBaggage,this.deleteBaggage=Fl.deleteBaggage}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return jl.registerGlobal(zl,e,qy.DiagAPI.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=By.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=By.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){jl.unregisterGlobal(zl,qy.DiagAPI.instance())},r.prototype._getGlobalPropagator=function(){return jl.getGlobal(zl)||qO},r}();es.PropagationAPI=jO});var Fy=g(k=>{"use strict";var FO=k&&k.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pe=k&&k.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&FO(e,r,t)};Object.defineProperty(k,"__esModule",{value:!0});k.diag=k.propagation=k.trace=k.context=k.INVALID_SPAN_CONTEXT=k.INVALID_TRACEID=k.INVALID_SPANID=k.isValidSpanId=k.isValidTraceId=k.isSpanContextValid=k.createTraceState=k.baggageEntryMetadataFromString=void 0;pe(xv(),k);var zO=wl();Object.defineProperty(k,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return zO.baggageEntryMetadataFromString}});pe(Uv(),k);pe(Bv(),k);pe(jv(),k);pe(Hv(),k);pe(Il(),k);pe($v(),k);pe(Kv(),k);pe(Ml(),k);pe(Dl(),k);pe(oy(),k);pe(ay(),k);pe(cy(),k);pe(uy(),k);pe(py(),k);pe(fy(),k);pe(hy(),k);pe(Pl(),k);pe(gy(),k);var HO=wy();Object.defineProperty(k,"createTraceState",{enumerable:!0,get:function(){return HO.createTraceState}});pe(Iy(),k);pe(Sy(),k);pe(Py(),k);var Hl=$a();Object.defineProperty(k,"isSpanContextValid",{enumerable:!0,get:function(){return Hl.isSpanContextValid}});Object.defineProperty(k,"isValidTraceId",{enumerable:!0,get:function(){return Hl.isValidTraceId}});Object.defineProperty(k,"isValidSpanId",{enumerable:!0,get:function(){return Hl.isValidSpanId}});var Gl=za();Object.defineProperty(k,"INVALID_SPANID",{enumerable:!0,get:function(){return Gl.INVALID_SPANID}});Object.defineProperty(k,"INVALID_TRACEID",{enumerable:!0,get:function(){return Gl.INVALID_TRACEID}});Object.defineProperty(k,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return Gl.INVALID_SPAN_CONTEXT}});pe(Ri(),k);pe(Oy(),k);var GO=Al();k.context=GO.ContextAPI.getInstance();var $O=Dy();k.trace=$O.TraceAPI.getInstance();var VO=jy();k.propagation=VO.PropagationAPI.getInstance();var KO=xn();k.diag=KO.DiagAPI.instance();k.default={trace:k.trace,context:k.context,propagation:k.propagation,diag:k.diag}});var Vy=g(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});var zt=Fy();(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(ke.SpanKind||(ke.SpanKind={}));function YO(r){return zt.trace.getSpan(r)}function zy(r,e){return zt.trace.setSpan(r,e)}function WO(r,e){return zt.trace.setSpanContext(r,e)}function JO(r){return zt.trace.getSpanContext(r)}function QO(r){return zt.trace.isSpanContextValid(r)}function Hy(r,e){return zt.trace.getTracer(r||"azure/core-tracing",e)}var Gy=zt.context;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(ke.SpanStatusCode||(ke.SpanStatusCode={}));function XO(){var r;if(typeof process>"u")return!1;let e=(r=process.env.AZURE_TRACING_DISABLED)===null||r===void 0?void 0:r.toLowerCase();return e==="false"||e==="0"?!1:Boolean(e)}function ZO(r){return function(e,t){let n=Hy(),i=t?.tracingOptions||{},o=Object.assign({kind:ke.SpanKind.INTERNAL},i.spanOptions),a=r.packagePrefix?`${r.packagePrefix}.${e}`:e,s;XO()?s=zt.trace.wrapSpanContext(zt.INVALID_SPAN_CONTEXT):s=n.startSpan(a,o,i.tracingContext),r.namespace&&s.setAttribute("az.namespace",r.namespace);let c=i.spanOptions||{};s.isRecording()&&r.namespace&&(c=Object.assign(Object.assign({},i.spanOptions),{attributes:Object.assign(Object.assign({},o.attributes),{"az.namespace":r.namespace})}));let u=Object.assign(Object.assign({},i),{spanOptions:c,tracingContext:zy(i.tracingContext||Gy.active(),s)}),l=Object.assign(Object.assign({},t),{tracingOptions:u});return{span:s,updatedOptions:l}}}var $y="00";function ek(r){let e=r.split("-");if(e.length!==4)return;let[t,n,i,o]=e;if(t!==$y)return;let a=parseInt(o,16);return{spanId:i,traceId:n,traceFlags:a}}function tk(r){let e=[];if(r.traceId||e.push("traceId"),r.spanId||e.push("spanId"),e.length)return;let n=(r.traceFlags||0).toString(16),i=n.length===1?`0${n}`:n;return`${$y}-${r.traceId}-${r.spanId}-${i}`}ke.context=Gy;ke.createSpanFunction=ZO;ke.extractSpanContextFromTraceParentHeader=ek;ke.getSpan=YO;ke.getSpanContext=JO;ke.getTraceParentHeader=tk;ke.getTracer=Hy;ke.isSpanContextValid=QO;ke.setSpan=zy;ke.setSpanContext=WO});var Wy=g((Nq,Yy)=>{var Ky=require("stream").Stream,rk=require("util");Yy.exports=lt;function lt(){this.source=null,this.dataSize=0,this.maxDataSize=1024*1024,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}rk.inherits(lt,Ky);lt.create=function(r,e){var t=new this;e=e||{};for(var n in e)t[n]=e[n];t.source=r;var i=r.emit;return r.emit=function(){return t._handleEmit(arguments),i.apply(r,arguments)},r.on("error",function(){}),t.pauseStream&&r.pause(),t};Object.defineProperty(lt.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});lt.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};lt.prototype.resume=function(){this._released||this.release(),this.source.resume()};lt.prototype.pause=function(){this.source.pause()};lt.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(r){this.emit.apply(this,r)}.bind(this)),this._bufferedEvents=[]};lt.prototype.pipe=function(){var r=Ky.prototype.pipe.apply(this,arguments);return this.resume(),r};lt.prototype._handleEmit=function(r){if(this._released){this.emit.apply(this,r);return}r[0]==="data"&&(this.dataSize+=r[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(r)};lt.prototype._checkIfMaxDataSizeExceeded=function(){if(!this._maxDataSizeExceeded&&!(this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var r="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(r))}}});var Zy=g((Mq,Xy)=>{var nk=require("util"),Qy=require("stream").Stream,Jy=Wy();Xy.exports=ve;function ve(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2*1024*1024,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null,this._insideLoop=!1,this._pendingNext=!1}nk.inherits(ve,Qy);ve.create=function(r){var e=new this;r=r||{};for(var t in r)e[t]=r[t];return e};ve.isStreamLike=function(r){return typeof r!="function"&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"&&!Buffer.isBuffer(r)};ve.prototype.append=function(r){var e=ve.isStreamLike(r);if(e){if(!(r instanceof Jy)){var t=Jy.create(r,{maxDataSize:1/0,pauseStream:this.pauseStreams});r.on("data",this._checkDataSize.bind(this)),r=t}this._handleErrors(r),this.pauseStreams&&r.pause()}return this._streams.push(r),this};ve.prototype.pipe=function(r,e){return Qy.prototype.pipe.call(this,r,e),this.resume(),r};ve.prototype._getNext=function(){if(this._currentStream=null,this._insideLoop){this._pendingNext=!0;return}this._insideLoop=!0;try{do this._pendingNext=!1,this._realGetNext();while(this._pendingNext)}finally{this._insideLoop=!1}};ve.prototype._realGetNext=function(){var r=this._streams.shift();if(typeof r>"u"){this.end();return}if(typeof r!="function"){this._pipeNext(r);return}var e=r;e(function(t){var n=ve.isStreamLike(t);n&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this))};ve.prototype._pipeNext=function(r){this._currentStream=r;var e=ve.isStreamLike(r);if(e){r.on("end",this._getNext.bind(this)),r.pipe(this,{end:!1});return}var t=r;this.write(t),this._getNext()};ve.prototype._handleErrors=function(r){var e=this;r.on("error",function(t){e._emitError(t)})};ve.prototype.write=function(r){this.emit("data",r)};ve.prototype.pause=function(){!this.pauseStreams||(this.pauseStreams&&this._currentStream&&typeof this._currentStream.pause=="function"&&this._currentStream.pause(),this.emit("pause"))};ve.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&typeof this._currentStream.resume=="function"&&this._currentStream.resume(),this.emit("resume")};ve.prototype.end=function(){this._reset(),this.emit("end")};ve.prototype.destroy=function(){this._reset(),this.emit("close")};ve.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null};ve.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var r="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(r))}};ve.prototype._updateDataSize=function(){this.dataSize=0;var r=this;this._streams.forEach(function(e){!e.dataSize||(r.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)};ve.prototype._emitError=function(r){this._reset(),this.emit("error",r)}});var eE=g((Dq,ik)=>{ik.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var rE=g((Uq,tE)=>{tE.exports=eE()});var oE=g(je=>{"use strict";var ts=rE(),ok=require("path").extname,nE=/^\s*([^;\s]*)(?:;|\s|$)/,ak=/^text\//i;je.charset=iE;je.charsets={lookup:iE};je.contentType=sk;je.extension=ck;je.extensions=Object.create(null);je.lookup=uk;je.types=Object.create(null);lk(je.extensions,je.types);function iE(r){if(!r||typeof r!="string")return!1;var e=nE.exec(r),t=e&&ts[e[1].toLowerCase()];return t&&t.charset?t.charset:e&&ak.test(e[1])?"UTF-8":!1}function sk(r){if(!r||typeof r!="string")return!1;var e=r.indexOf("/")===-1?je.lookup(r):r;if(!e)return!1;if(e.indexOf("charset")===-1){var t=je.charset(e);t&&(e+="; charset="+t.toLowerCase())}return e}function ck(r){if(!r||typeof r!="string")return!1;var e=nE.exec(r),t=e&&je.extensions[e[1].toLowerCase()];return!t||!t.length?!1:t[0]}function uk(r){if(!r||typeof r!="string")return!1;var e=ok("x."+r).toLowerCase().substr(1);return e&&je.types[e]||!1}function lk(r,e){var t=["nginx","apache",void 0,"iana"];Object.keys(ts).forEach(function(i){var o=ts[i],a=o.extensions;if(!(!a||!a.length)){r[i]=a;for(var s=0;s<a.length;s++){var c=a[s];if(e[c]){var u=t.indexOf(ts[e[c]].source),l=t.indexOf(o.source);if(e[c]!=="application/octet-stream"&&(u>l||u===l&&e[c].substr(0,12)==="application/"))continue}e[c]=i}}})}});var sE=g((Bq,aE)=>{aE.exports=pk;function pk(r){var e=typeof setImmediate=="function"?setImmediate:typeof process=="object"&&typeof process.nextTick=="function"?process.nextTick:null;e?e(r):setTimeout(r,0)}});var $l=g((qq,uE)=>{var cE=sE();uE.exports=dk;function dk(r){var e=!1;return cE(function(){e=!0}),function(n,i){e?r(n,i):cE(function(){r(n,i)})}}});var Vl=g((jq,lE)=>{lE.exports=fk;function fk(r){Object.keys(r.jobs).forEach(hk.bind(r)),r.jobs={}}function hk(r){typeof this.jobs[r]=="function"&&this.jobs[r]()}});var Kl=g((Fq,dE)=>{var pE=$l(),mk=Vl();dE.exports=gk;function gk(r,e,t,n){var i=t.keyedList?t.keyedList[t.index]:t.index;t.jobs[i]=vk(e,i,r[i],function(o,a){i in t.jobs&&(delete t.jobs[i],o?mk(t):t.results[i]=a,n(o,t.results))})}function vk(r,e,t,n){var i;return r.length==2?i=r(t,pE(n)):i=r(t,e,pE(n)),i}});var Yl=g((zq,fE)=>{fE.exports=yk;function yk(r,e){var t=!Array.isArray(r),n={index:0,keyedList:t||e?Object.keys(r):null,jobs:{},results:t?{}:[],size:t?Object.keys(r).length:r.length};return e&&n.keyedList.sort(t?e:function(i,o){return e(r[i],r[o])}),n}});var Wl=g((Hq,hE)=>{var Ek=Vl(),Ck=$l();hE.exports=Tk;function Tk(r){!Object.keys(this.jobs).length||(this.index=this.size,Ek(this),Ck(r)(null,this.results))}});var gE=g((Gq,mE)=>{var bk=Kl(),wk=Yl(),xk=Wl();mE.exports=Ik;function Ik(r,e,t){for(var n=wk(r);n.index<(n.keyedList||r).length;)bk(r,e,n,function(i,o){if(i){t(i,o);return}if(Object.keys(n.jobs).length===0){t(null,n.results);return}}),n.index++;return xk.bind(n,t)}});var Jl=g(($q,rs)=>{var vE=Kl(),_k=Yl(),Sk=Wl();rs.exports=Ak;rs.exports.ascending=yE;rs.exports.descending=Pk;function Ak(r,e,t,n){var i=_k(r,t);return vE(r,e,i,function o(a,s){if(a){n(a,s);return}if(i.index++,i.index<(i.keyedList||r).length){vE(r,e,i,o);return}n(null,i.results)}),Sk.bind(i,n)}function yE(r,e){return r<e?-1:r>e?1:0}function Pk(r,e){return-1*yE(r,e)}});var CE=g((Vq,EE)=>{var Rk=Jl();EE.exports=Ok;function Ok(r,e,t){return Rk(r,e,null,t)}});var bE=g((Kq,TE)=>{TE.exports={parallel:gE(),serial:CE(),serialOrdered:Jl()}});var xE=g((Yq,wE)=>{wE.exports=function(r,e){return Object.keys(e).forEach(function(t){r[t]=r[t]||e[t]}),r}});var SE=g((Wq,_E)=>{var ep=Zy(),IE=require("util"),Ql=require("path"),kk=require("http"),Nk=require("https"),Mk=require("url").parse,Dk=require("fs"),Uk=require("stream").Stream,Xl=oE(),Lk=bE(),Zl=xE();_E.exports=te;IE.inherits(te,ep);function te(r){if(!(this instanceof te))return new te(r);this._overheadLength=0,this._valueLength=0,this._valuesToMeasure=[],ep.call(this),r=r||{};for(var e in r)this[e]=r[e]}te.LINE_BREAK=`\r
`;te.DEFAULT_CONTENT_TYPE="application/octet-stream";te.prototype.append=function(r,e,t){t=t||{},typeof t=="string"&&(t={filename:t});var n=ep.prototype.append.bind(this);if(typeof e=="number"&&(e=""+e),IE.isArray(e)){this._error(new Error("Arrays are not supported."));return}var i=this._multiPartHeader(r,e,t),o=this._multiPartFooter();n(i),n(e),n(o),this._trackLength(i,e,t)};te.prototype._trackLength=function(r,e,t){var n=0;t.knownLength!=null?n+=+t.knownLength:Buffer.isBuffer(e)?n=e.length:typeof e=="string"&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(r)+te.LINE_BREAK.length,!(!e||!e.path&&!(e.readable&&e.hasOwnProperty("httpVersion"))&&!(e instanceof Uk))&&(t.knownLength||this._valuesToMeasure.push(e))};te.prototype._lengthRetriever=function(r,e){r.hasOwnProperty("fd")?r.end!=null&&r.end!=1/0&&r.start!=null?e(null,r.end+1-(r.start?r.start:0)):Dk.stat(r.path,function(t,n){var i;if(t){e(t);return}i=n.size-(r.start?r.start:0),e(null,i)}):r.hasOwnProperty("httpVersion")?e(null,+r.headers["content-length"]):r.hasOwnProperty("httpModule")?(r.on("response",function(t){r.pause(),e(null,+t.headers["content-length"])}),r.resume()):e("Unknown stream")};te.prototype._multiPartHeader=function(r,e,t){if(typeof t.header=="string")return t.header;var n=this._getContentDisposition(e,t),i=this._getContentType(e,t),o="",a={"Content-Disposition":["form-data",'name="'+r+'"'].concat(n||[]),"Content-Type":[].concat(i||[])};typeof t.header=="object"&&Zl(a,t.header);var s;for(var c in a)!a.hasOwnProperty(c)||(s=a[c],s!=null&&(Array.isArray(s)||(s=[s]),s.length&&(o+=c+": "+s.join("; ")+te.LINE_BREAK)));return"--"+this.getBoundary()+te.LINE_BREAK+o+te.LINE_BREAK};te.prototype._getContentDisposition=function(r,e){var t,n;return typeof e.filepath=="string"?t=Ql.normalize(e.filepath).replace(/\\/g,"/"):e.filename||r.name||r.path?t=Ql.basename(e.filename||r.name||r.path):r.readable&&r.hasOwnProperty("httpVersion")&&(t=Ql.basename(r.client._httpMessage.path||"")),t&&(n='filename="'+t+'"'),n};te.prototype._getContentType=function(r,e){var t=e.contentType;return!t&&r.name&&(t=Xl.lookup(r.name)),!t&&r.path&&(t=Xl.lookup(r.path)),!t&&r.readable&&r.hasOwnProperty("httpVersion")&&(t=r.headers["content-type"]),!t&&(e.filepath||e.filename)&&(t=Xl.lookup(e.filepath||e.filename)),!t&&typeof r=="object"&&(t=te.DEFAULT_CONTENT_TYPE),t};te.prototype._multiPartFooter=function(){return function(r){var e=te.LINE_BREAK,t=this._streams.length===0;t&&(e+=this._lastBoundary()),r(e)}.bind(this)};te.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"+te.LINE_BREAK};te.prototype.getHeaders=function(r){var e,t={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(e in r)r.hasOwnProperty(e)&&(t[e.toLowerCase()]=r[e]);return t};te.prototype.setBoundary=function(r){this._boundary=r};te.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary};te.prototype.getBuffer=function(){for(var r=new Buffer.alloc(0),e=this.getBoundary(),t=0,n=this._streams.length;t<n;t++)typeof this._streams[t]!="function"&&(Buffer.isBuffer(this._streams[t])?r=Buffer.concat([r,this._streams[t]]):r=Buffer.concat([r,Buffer.from(this._streams[t])]),(typeof this._streams[t]!="string"||this._streams[t].substring(2,e.length+2)!==e)&&(r=Buffer.concat([r,Buffer.from(te.LINE_BREAK)])));return Buffer.concat([r,Buffer.from(this._lastBoundary())])};te.prototype._generateBoundary=function(){for(var r="--------------------------",e=0;e<24;e++)r+=Math.floor(Math.random()*10).toString(16);this._boundary=r};te.prototype.getLengthSync=function(){var r=this._overheadLength+this._valueLength;return this._streams.length&&(r+=this._lastBoundary().length),this.hasKnownLength()||this._error(new Error("Cannot calculate proper length in synchronous way.")),r};te.prototype.hasKnownLength=function(){var r=!0;return this._valuesToMeasure.length&&(r=!1),r};te.prototype.getLength=function(r){var e=this._overheadLength+this._valueLength;if(this._streams.length&&(e+=this._lastBoundary().length),!this._valuesToMeasure.length){process.nextTick(r.bind(this,null,e));return}Lk.parallel(this._valuesToMeasure,this._lengthRetriever,function(t,n){if(t){r(t);return}n.forEach(function(i){e+=i}),r(null,e)})};te.prototype.submit=function(r,e){var t,n,i={method:"post"};return typeof r=="string"?(r=Mk(r),n=Zl({port:r.port,path:r.pathname,host:r.hostname,protocol:r.protocol},i)):(n=Zl(r,i),n.port||(n.port=n.protocol=="https:"?443:80)),n.headers=this.getHeaders(r.headers),n.protocol=="https:"?t=Nk.request(n):t=kk.request(n),this.getLength(function(o,a){if(o&&o!=="Unknown stream"){this._error(o);return}if(a&&t.setHeader("Content-Length",a),this.pipe(t),e){var s,c=function(u,l){return t.removeListener("error",c),t.removeListener("response",s),e.call(this,u,l)};s=c.bind(this,null),t.on("error",c),t.on("response",s)}}.bind(this)),t};te.prototype._error=function(r){this.error||(this.error=r,this.pause(),this.emit("error",r))};te.prototype.toString=function(){return"[object FormData]"}});var cs=g(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});function Bk(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var qk=Bk(require("util")),jk=require("os");function Fk(r,...e){process.stderr.write(`${qk.format(r,...e)}${jk.EOL}`)}var AE=typeof process<"u"&&process.env&&process.env.DEBUG||void 0,RE,tp=[],rp=[],os=[];AE&&np(AE);var On=Object.assign(r=>OE(r),{enable:np,enabled:ip,disable:zk,log:Fk});function np(r){RE=r,tp=[],rp=[];let e=/\*/g,t=r.split(",").map(n=>n.trim().replace(e,".*?"));for(let n of t)n.startsWith("-")?rp.push(new RegExp(`^${n.substr(1)}$`)):tp.push(new RegExp(`^${n}$`));for(let n of os)n.enabled=ip(n.namespace)}function ip(r){if(r.endsWith("*"))return!0;for(let e of rp)if(e.test(r))return!1;for(let e of tp)if(e.test(r))return!0;return!1}function zk(){let r=RE||"";return np(""),r}function OE(r){let e=Object.assign(t,{enabled:ip(r),destroy:Hk,log:On.log,namespace:r,extend:Gk});function t(...n){!e.enabled||(n.length>0&&(n[0]=`${r} ${n[0]}`),e.log(...n))}return os.push(e),e}function Hk(){let r=os.indexOf(this);return r>=0?(os.splice(r,1),!0):!1}function Gk(r){let e=OE(`${this.namespace}:${r}`);return e.log=this.log,e}var kE=new Set,ns=typeof process<"u"&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,as,ss=On("azure");ss.log=(...r)=>{On.log(...r)};var op=["verbose","info","warning","error"];ns&&(UE(ns)?NE(ns):console.error(`AZURE_LOG_LEVEL set to unknown log level '${ns}'; logging is not enabled. Acceptable values: ${op.join(", ")}.`));function NE(r){if(r&&!UE(r))throw new Error(`Unknown log level '${r}'. Acceptable values: ${op.join(",")}`);as=r;let e=[];for(let t of kE)DE(t)&&e.push(t.namespace);On.enable(e.join(","))}function $k(){return as}var PE={verbose:400,info:300,warning:200,error:100};function Vk(r){let e=ss.extend(r);return ME(ss,e),{error:is(e,"error"),warning:is(e,"warning"),info:is(e,"info"),verbose:is(e,"verbose")}}function ME(r,e){e.log=(...t)=>{r.log(...t)}}function is(r,e){let t=Object.assign(r.extend(e),{level:e});if(ME(r,t),DE(t)){let n=On.disable();On.enable(n+","+t.namespace)}return kE.add(t),t}function DE(r){return!!(as&&PE[r.level]<=PE[as])}function UE(r){return op.includes(r)}kn.AzureLogger=ss;kn.createClientLogger=Vk;kn.getLogLevel=$k;kn.setLogLevel=NE});var sp=g(Pt=>{"use strict";Object.defineProperty(Pt,"__esModule",{value:!0});var LE=require("crypto"),ap,Kk=typeof process<"u"&&Boolean(process.version)&&Boolean((ap=process.versions)===null||ap===void 0?void 0:ap.node);function Yk(r){return new Promise(e=>setTimeout(()=>e(),r))}function Wk(r,e){return r=Math.ceil(r),e=Math.floor(e),Math.floor(Math.random()*(e-r+1))+r}function BE(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function qE(r){if(BE(r)){let e=typeof r.name=="string",t=typeof r.message=="string";return e&&t}return!1}function Jk(r){if(qE(r))return r.message;{let e;try{typeof r=="object"&&r?e=JSON.stringify(r):e=String(r)}catch{e="[unable to stringify input]"}return`Unknown error ${e}`}}async function Qk(r,e,t){let n=Buffer.from(r,"base64");return LE.createHmac("sha256",n).update(e).digest(t)}async function Xk(r,e){return LE.createHash("sha256").update(r).digest(e)}Pt.computeSha256Hash=Xk;Pt.computeSha256Hmac=Qk;Pt.delay=Yk;Pt.getErrorMessage=Jk;Pt.getRandomIntegerInclusive=Wk;Pt.isError=qE;Pt.isNode=Kk;Pt.isObject=BE});var FE=g((Xq,jE)=>{"use strict";function Zk(){}function us(r,e){let t=us.spread(r,e),n=t.then(i=>i[0]);return n.cancel=t.cancel,n}(function(r){function e(t,n){let i=null,o=new Promise((a,s)=>{function c(){t.removeListener(n,u),t.removeListener("error",l),o.cancel=Zk}function u(...p){c(),a(p)}function l(p){c(),s(p)}i=c,t.on(n,u),t.on("error",l)});if(!i)throw new TypeError("Could not get `cancel()` function");return o.cancel=i,o}r.spread=e})(us||(us={}));jE.exports=us});var zE=g(qr=>{"use strict";var e0=qr&&qr.__awaiter||function(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(p){a(p)}}function c(l){try{u(n.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Ui=qr&&qr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qr,"__esModule",{value:!0});var t0=Ui(require("net")),r0=Ui(require("tls")),cp=Ui(require("url")),n0=Ui(on()),i0=Ui(FE()),o0=pu(),sr=n0.default("http-proxy-agent");function a0(r){return typeof r=="string"?/^https:?$/i.test(r):!1}var up=class extends o0.Agent{constructor(e){let t;if(typeof e=="string"?t=cp.default.parse(e):t=e,!t)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");sr("Creating new HttpProxyAgent instance: %o",t),super(t);let n=Object.assign({},t);this.secureProxy=t.secureProxy||a0(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,t){return e0(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,o=cp.default.parse(e.path);o.protocol||(o.protocol="http:"),o.hostname||(o.hostname=t.hostname||t.host||null),o.port==null&&typeof t.port&&(o.port=String(t.port)),o.port==="80"&&delete o.port,e.path=cp.default.format(o),n.auth&&e.setHeader("Proxy-Authorization",`Basic ${Buffer.from(n.auth).toString("base64")}`);let a;if(i?(sr("Creating `tls.Socket`: %o",n),a=r0.default.connect(n)):(sr("Creating `net.Socket`: %o",n),a=t0.default.connect(n)),e._header){let s,c;sr("Regenerating stored HTTP header string for request"),e._header=null,e._implicitHeader(),e.output&&e.output.length>0?(sr("Patching connection write() output buffer with updated header"),s=e.output[0],c=s.indexOf(`\r
\r
`)+4,e.output[0]=e._header+s.substring(c),sr("Output buffer: %o",e.output)):e.outputData&&e.outputData.length>0&&(sr("Patching connection write() output buffer with updated header"),s=e.outputData[0].data,c=s.indexOf(`\r
\r
`)+4,e.outputData[0].data=e._header+s.substring(c),sr("Output buffer: %o",e.outputData[0].data))}return yield i0.default(a,"connect"),a})}};qr.default=up});var GE=g((dp,HE)=>{"use strict";var s0=dp&&dp.__importDefault||function(r){return r&&r.__esModule?r:{default:r}},lp=s0(zE());function pp(r){return new lp.default(r)}(function(r){r.HttpProxyAgent=lp.default,r.prototype=lp.default.prototype})(pp||(pp={}));HE.exports=pp});var $E=g(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});var Li={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function c0(r={}){let e=new jr(r.parentContext);return r.span&&(e=e.setValue(Li.span,r.span)),r.namespace&&(e=e.setValue(Li.namespace,r.namespace)),e}var jr=class{constructor(e){this._contextMap=e instanceof jr?new Map(e._contextMap):new Map}setValue(e,t){let n=new jr(this);return n._contextMap.set(e,t),n}getValue(e){return this._contextMap.get(e)}deleteValue(e){let t=new jr(this);return t._contextMap.delete(e),t}};function u0(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{}}}function l0(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,e)=>({span:u0(),tracingContext:c0({parentContext:e.tracingContext})}),withContext(r,e,...t){return e(...t)}}}var ps;function p0(r){ps=r}function ls(){return ps||(ps=l0()),ps}function d0(r){let{namespace:e,packageName:t,packageVersion:n}=r;function i(u,l,p){var d;let f=ls().startSpan(u,Object.assign(Object.assign({},p),{packageName:t,packageVersion:n,tracingContext:(d=l?.tracingOptions)===null||d===void 0?void 0:d.tracingContext})),m=f.tracingContext,y=f.span;m.getValue(Li.namespace)||(m=m.setValue(Li.namespace,e)),y.setAttribute("az.namespace",m.getValue(Li.namespace));let E=Object.assign({},l,{tracingOptions:Object.assign(Object.assign({},l?.tracingOptions),{tracingContext:m})});return{span:y,updatedOptions:E}}async function o(u,l,p,d){let{span:f,updatedOptions:m}=i(u,l,d);try{let y=await a(m.tracingOptions.tracingContext,()=>Promise.resolve(p(m,f)));return f.setStatus({status:"success"}),y}catch(y){throw f.setStatus({status:"error",error:y}),y}finally{f.end()}}function a(u,l,...p){return ls().withContext(u,l,...p)}function s(u){return ls().parseTraceparentHeader(u)}function c(u){return ls().createRequestHeaders(u)}return{startSpan:i,withSpan:o,withContext:a,parseTraceparentHeader:s,createRequestHeaders:c}}ds.createTracingClient=d0;ds.useInstrumenter=p0});var mp=g(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});var Nn=new WeakMap,fs=new WeakMap,Fr=class{constructor(){this.onabort=null,Nn.set(this,[]),fs.set(this,!1)}get aborted(){if(!fs.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return fs.get(this)}static get none(){return new Fr}addEventListener(e,t){if(!Nn.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");Nn.get(this).push(t)}removeEventListener(e,t){if(!Nn.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");let n=Nn.get(this),i=n.indexOf(t);i>-1&&n.splice(i,1)}dispatchEvent(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")}};function VE(r){if(r.aborted)return;r.onabort&&r.onabort.call(r);let e=Nn.get(r);e&&e.slice().forEach(t=>{t.call(r,{type:"abort"})}),fs.set(r,!0)}var fp=class extends Error{constructor(e){super(e),this.name="AbortError"}},hp=class{constructor(e){if(this._signal=new Fr,!!e){Array.isArray(e)||(e=arguments);for(let t of e)t.aborted?this.abort():t.addEventListener("abort",()=>{this.abort()})}}get signal(){return this._signal}abort(){VE(this._signal)}static timeout(e){let t=new Fr,n=setTimeout(VE,e,t);return typeof n.unref=="function"&&n.unref(),t}};Bi.AbortController=hp;Bi.AbortError=fp;Bi.AbortSignal=Fr});var _p=g(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var f0=SE(),tC=cs(),Rt=sp(),h0=Mo(),m0=GE(),g0=$E(),v0=require("os"),y0=require("util"),ji=mp(),E0=require("http"),C0=require("https"),T0=require("zlib"),b0=require("stream"),w0=pi();function x0(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function ys(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var I0=x0(f0),gp=ys(v0),vp=ys(E0),yp=ys(C0),KE=ys(T0),YE=new Set(["Deserialize","Serialize","Retry","Sign"]),Mn=class{constructor(e=[]){this._policies=[],this._policies=e,this._orderedPolicies=void 0}addPolicy(e,t={}){if(t.phase&&t.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(t.phase&&!YE.has(t.phase))throw new Error(`Invalid phase name: ${t.phase}`);if(t.afterPhase&&!YE.has(t.afterPhase))throw new Error(`Invalid afterPhase name: ${t.afterPhase}`);this._policies.push({policy:e,options:t}),this._orderedPolicies=void 0}removePolicy(e){let t=[];return this._policies=this._policies.filter(n=>e.name&&n.policy.name===e.name||e.phase&&n.options.phase===e.phase?(t.push(n.policy),!1):!0),this._orderedPolicies=void 0,t}sendRequest(e,t){return this.getOrderedPolicies().reduceRight((o,a)=>s=>a.sendRequest(s,o),o=>e.sendRequest(o))(t)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Mn(this._policies)}static create(){return new Mn}orderPolicies(){let e=[],t=new Map;function n(m){return{name:m,policies:new Set,hasRun:!1}}let i=n("Serialize"),o=n("None"),a=n("Deserialize"),s=n("Retry"),c=n("Sign"),u=[i,o,a,s,c];function l(m){return m==="Retry"?s:m==="Serialize"?i:m==="Deserialize"?a:m==="Sign"?c:o}for(let m of this._policies){let y=m.policy,E=m.options,S=y.name;if(t.has(S))throw new Error("Duplicate policy names not allowed in pipeline");let P={policy:y,dependsOn:new Set,dependants:new Set};E.afterPhase&&(P.afterPhase=l(E.afterPhase)),t.set(S,P),l(E.phase).policies.add(P)}for(let m of this._policies){let{policy:y,options:E}=m,S=y.name,P=t.get(S);if(!P)throw new Error(`Missing node for policy ${S}`);if(E.afterPolicies)for(let A of E.afterPolicies){let j=t.get(A);j&&(P.dependsOn.add(j),j.dependants.add(P))}if(E.beforePolicies)for(let A of E.beforePolicies){let j=t.get(A);j&&(j.dependsOn.add(P),P.dependants.add(j))}}function p(m){m.hasRun=!0;for(let y of m.policies)if(!(y.afterPhase&&(!y.afterPhase.hasRun||y.afterPhase.policies.size))&&y.dependsOn.size===0){e.push(y.policy);for(let E of y.dependants)E.dependsOn.delete(y);t.delete(y.policy.name),m.policies.delete(y)}}function d(){for(let m of u)if(p(m),m.policies.size>0&&m!==o){o.hasRun||p(o);return}}let f=0;for(;t.size>0;){f++;let m=e.length;if(d(),e.length<=m&&f>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return e}};function rC(){return Mn.create()}var nC="decompressResponsePolicy";function iC(){return{name:nC,async sendRequest(r,e){return r.method!=="HEAD"&&r.headers.set("Accept-Encoding","gzip,deflate"),e(r)}}}var oC="formDataPolicy";function aC(){return{name:oC,async sendRequest(r,e){if(r.formData){let t=r.headers.get("Content-Type");t&&t.indexOf("application/x-www-form-urlencoded")!==-1?(r.body=_0(r.formData),r.formData=void 0):S0(r.formData,r)}return e(r)}}}function _0(r){let e=new URLSearchParams;for(let[t,n]of Object.entries(r))if(Array.isArray(n))for(let i of n)e.append(t,i.toString());else e.append(t,n.toString());return e.toString()}async function S0(r,e){let t=new I0.default;for(let i of Object.keys(r)){let o=r[i];if(Array.isArray(o))for(let a of o)t.append(i,a);else t.append(i,o)}e.body=t,e.formData=void 0;let n=e.headers.get("Content-Type");n&&n.indexOf("multipart/form-data")!==-1&&e.headers.set("Content-Type",`multipart/form-data; boundary=${t.getBoundary()}`);try{let i=await new Promise((o,a)=>{t.getLength((s,c)=>{s?a(s):o(c)})});e.headers.set("Content-Length",i)}catch{}}var pt=tC.createClientLogger("core-rest-pipeline"),Ep="REDACTED",A0=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],P0=["api-version"],gs=class{constructor({additionalAllowedHeaderNames:e=[],additionalAllowedQueryParameters:t=[]}={}){e=A0.concat(e),t=P0.concat(t),this.allowedHeaderNames=new Set(e.map(n=>n.toLowerCase())),this.allowedQueryParameters=new Set(t.map(n=>n.toLowerCase()))}sanitize(e){let t=new Set;return JSON.stringify(e,(n,i)=>{if(i instanceof Error)return Object.assign(Object.assign({},i),{name:i.name,message:i.message});if(n==="headers")return this.sanitizeHeaders(i);if(n==="url")return this.sanitizeUrl(i);if(n==="query")return this.sanitizeQuery(i);if(n==="body")return;if(n==="response")return;if(n==="operationSpec")return;if(Array.isArray(i)||Rt.isObject(i)){if(t.has(i))return"[Circular]";t.add(i)}return i},2)}sanitizeHeaders(e){let t={};for(let n of Object.keys(e))this.allowedHeaderNames.has(n.toLowerCase())?t[n]=e[n]:t[n]=Ep;return t}sanitizeQuery(e){if(typeof e!="object"||e===null)return e;let t={};for(let n of Object.keys(e))this.allowedQueryParameters.has(n.toLowerCase())?t[n]=e[n]:t[n]=Ep;return t}sanitizeUrl(e){if(typeof e!="string"||e===null)return e;let t=new URL(e);if(!t.search)return e;for(let[n]of t.searchParams)this.allowedQueryParameters.has(n.toLowerCase())||t.searchParams.set(n,Ep);return t.toString()}},sC="logPolicy";function cC(r={}){var e;let t=(e=r.logger)!==null&&e!==void 0?e:pt.info,n=new gs({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:sC,async sendRequest(i,o){if(!t.enabled)return o(i);t(`Request: ${n.sanitize(i)}`);let a=await o(i);return t(`Response status code: ${a.status}`),t(`Headers: ${n.sanitize(a.headers)}`),a}}}var R0="HTTPS_PROXY",O0="HTTP_PROXY",k0="ALL_PROXY",N0="NO_PROXY",uC="proxyPolicy",WE=[],lC=!1,M0=new Map;function ms(r){if(process.env[r])return process.env[r];if(process.env[r.toLowerCase()])return process.env[r.toLowerCase()]}function D0(){if(!process)return;let r=ms(R0),e=ms(k0),t=ms(O0);return r||e||t}function U0(r,e,t){if(e.length===0)return!1;let n=new URL(r).hostname;if(t?.has(n))return t.get(n);let i=!1;for(let o of e)o[0]==="."?(n.endsWith(o)||n.length===o.length-1&&n===o.slice(1))&&(i=!0):n===o&&(i=!0);return t?.set(n,i),i}function L0(){let r=ms(N0);return lC=!0,r?r.split(",").map(e=>e.trim()).filter(e=>e.length):[]}function pC(r){if(!r&&(r=D0(),!r))return;let e=new URL(r);return{host:(e.protocol?e.protocol+"//":"")+e.hostname,port:Number.parseInt(e.port||"80"),username:e.username,password:e.password}}function JE(r,{headers:e,tlsSettings:t}){let n;try{n=new URL(r.host)}catch{throw new Error(`Expecting a valid host string in proxy settings, but found "${r.host}".`)}t&&pt.warning("TLS settings are not supported in combination with custom Proxy, certificates provided to the client will be ignored.");let i={hostname:n.hostname,port:r.port,protocol:n.protocol,headers:e.toJSON()};return r.username&&r.password?i.auth=`${r.username}:${r.password}`:r.username&&(i.auth=`${r.username}`),i}function B0(r,e){if(r.agent)return;let n=new URL(r.url).protocol!=="https:",i=r.proxySettings;if(i)if(n){if(!e.httpProxyAgent){let o=JE(i,r);e.httpProxyAgent=new m0.HttpProxyAgent(o)}r.agent=e.httpProxyAgent}else{if(!e.httpsProxyAgent){let o=JE(i,r);e.httpsProxyAgent=new h0.HttpsProxyAgent(o)}r.agent=e.httpsProxyAgent}}function dC(r=pC(),e){lC||WE.push(...L0());let t={};return{name:uC,async sendRequest(n,i){var o;return!n.proxySettings&&!U0(n.url,(o=e?.customNoProxyList)!==null&&o!==void 0?o:WE,e?.customNoProxyList?void 0:M0)&&(n.proxySettings=r),n.proxySettings&&B0(n,t),i(n)}}}var fC="redirectPolicy",QE=["GET","HEAD"];function hC(r={}){let{maxRetries:e=20}=r;return{name:fC,async sendRequest(t,n){let i=await n(t);return mC(n,i,e)}}}async function mC(r,e,t,n=0){let{request:i,status:o,headers:a}=e,s=a.get("location");if(s&&(o===300||o===301&&QE.includes(i.method)||o===302&&QE.includes(i.method)||o===303&&i.method==="POST"||o===307)&&n<t){let c=new URL(s,i.url);i.url=c.toString(),o===303&&(i.method="GET",i.headers.delete("Content-Length"),delete i.body),i.headers.delete("Authorization");let u=await r(i);return mC(r,u,t,n+1)}return e}var gC="setClientRequestIdPolicy";function vC(r="x-ms-client-request-id"){return{name:gC,async sendRequest(e,t){return e.headers.has(r)||e.headers.set(r,e.requestId),t(e)}}}var yC="1.8.1",Dn=3;function q0(){return"User-Agent"}function j0(r){r.set("Node",process.version),r.set("OS",`(${gp.arch()}-${gp.type()}-${gp.release()})`)}function F0(r){let e=[];for(let[t,n]of r){let i=n?`${t}/${n}`:t;e.push(i)}return e.join(" ")}function z0(){return q0()}function EC(r){let e=new Map;e.set("core-rest-pipeline",yC),j0(e);let t=F0(e);return r?`${r} ${t}`:t}var H0=y0.inspect.custom,G0=new gs,Ye=class extends Error{constructor(e,t={}){super(e),this.name="RestError",this.code=t.code,this.statusCode=t.statusCode,this.request=t.request,this.response=t.response,Object.setPrototypeOf(this,Ye.prototype)}[H0](){return`RestError: ${this.message} 
 ${G0.sanitize(this)}`}};Ye.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";Ye.PARSE_ERROR="PARSE_ERROR";function CC(r){return r instanceof Ye?!0:Rt.isError(r)&&r.name==="RestError"}var TC="tracingPolicy";function bC(r={}){let e=EC(r.userAgentPrefix),t=$0();return{name:TC,async sendRequest(n,i){var o,a;if(!t||!(!((o=n.tracingOptions)===null||o===void 0)&&o.tracingContext))return i(n);let{span:s,tracingContext:c}=(a=V0(t,n,e))!==null&&a!==void 0?a:{};if(!s||!c)return i(n);try{let u=await t.withContext(c,i,n);return Y0(s,u),u}catch(u){throw K0(s,u),u}}}}function $0(){try{return g0.createTracingClient({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:yC})}catch(r){pt.warning(`Error when creating the TracingClient: ${Rt.getErrorMessage(r)}`);return}}function V0(r,e,t){try{let{span:n,updatedOptions:i}=r.startSpan(`HTTP ${e.method}`,{tracingOptions:e.tracingOptions},{spanKind:"client",spanAttributes:{"http.method":e.method,"http.url":e.url,requestId:e.requestId}});if(!n.isRecording()){n.end();return}t&&n.setAttribute("http.user_agent",t);let o=r.createRequestHeaders(i.tracingOptions.tracingContext);for(let[a,s]of Object.entries(o))e.headers.set(a,s);return{span:n,tracingContext:i.tracingOptions.tracingContext}}catch(n){pt.warning(`Skipping creating a tracing span due to an error: ${Rt.getErrorMessage(n)}`);return}}function K0(r,e){try{r.setStatus({status:"error",error:Rt.isError(e)?e:void 0}),CC(e)&&e.statusCode&&r.setAttribute("http.status_code",e.statusCode),r.end()}catch(t){pt.warning(`Skipping tracing span processing due to an error: ${Rt.getErrorMessage(t)}`)}}function Y0(r,e){try{r.setAttribute("http.status_code",e.status);let t=e.headers.get("x-ms-request-id");t&&r.setAttribute("serviceRequestId",t),r.setStatus({status:"success"}),r.end()}catch(t){pt.warning(`Skipping tracing span processing due to an error: ${Rt.getErrorMessage(t)}`)}}var XE=z0(),wC="userAgentPolicy";function xC(r={}){let e=EC(r.userAgentPrefix);return{name:wC,async sendRequest(t,n){return t.headers.has(XE)||t.headers.set(XE,e),n(t)}}}var W0="The operation was aborted.";function IC(r,e,t){return new Promise((n,i)=>{let o,a,s=()=>i(new ji.AbortError(t?.abortErrorMsg?t?.abortErrorMsg:W0)),c=()=>{t?.abortSignal&&a&&t.abortSignal.removeEventListener("abort",a)};if(a=()=>(o&&clearTimeout(o),c(),s()),t?.abortSignal&&t.abortSignal.aborted)return s();o=setTimeout(()=>{c(),n(e)},r),t?.abortSignal&&t.abortSignal.addEventListener("abort",a)})}function J0(r,e){let t=r.headers.get(e);if(!t)return;let n=Number(t);if(!Number.isNaN(n))return n}var Cp="Retry-After",Q0=["retry-after-ms","x-ms-retry-after-ms",Cp];function _C(r){if(!!(r&&[429,503].includes(r.status)))try{for(let i of Q0){let o=J0(r,i);if(o===0||o)return o*(i===Cp?1e3:1)}let e=r.headers.get(Cp);if(!e)return;let n=Date.parse(e)-Date.now();return Number.isFinite(n)?Math.max(0,n):void 0}catch{return}}function X0(r){return Number.isFinite(_C(r))}function SC(){return{name:"throttlingRetryStrategy",retry({response:r}){let e=_C(r);return Number.isFinite(e)?{retryAfterInMs:e}:{skipStrategy:!0}}}}var Z0=1e3,eN=1e3*64;function xp(r={}){var e,t;let n=(e=r.retryDelayInMs)!==null&&e!==void 0?e:Z0,i=(t=r.maxRetryDelayInMs)!==null&&t!==void 0?t:eN,o=n;return{name:"exponentialRetryStrategy",retry({retryCount:a,response:s,responseError:c}){let u=rN(c),l=u&&r.ignoreSystemErrors,p=tN(s),d=p&&r.ignoreHttpStatusCodes;if(s&&(X0(s)||!p)||d||l)return{skipStrategy:!0};if(c&&!u&&!p)return{errorToThrow:c};let m=o*Math.pow(2,a),y=Math.min(i,m);return o=y/2+Rt.getRandomIntegerInclusive(0,y/2),{retryAfterInMs:o}}}}function tN(r){return Boolean(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function rN(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT":!1}var ZE=tC.createClientLogger("core-rest-pipeline retryPolicy"),nN="retryPolicy";function Fi(r,e={maxRetries:Dn}){let t=e.logger||ZE;return{name:nN,async sendRequest(n,i){var o,a;let s,c,u=-1;e:for(;;){u+=1,s=void 0,c=void 0;try{t.info(`Retry ${u}: Attempting to send request`,n.requestId),s=await i(n),t.info(`Retry ${u}: Received a response from request`,n.requestId)}catch(l){if(t.error(`Retry ${u}: Received an error from request`,n.requestId),c=l,!l||c.name!=="RestError")throw l;s=c.response}if(!((o=n.abortSignal)===null||o===void 0)&&o.aborted)throw t.error(`Retry ${u}: Request aborted.`),new ji.AbortError;if(u>=((a=e.maxRetries)!==null&&a!==void 0?a:Dn)){if(t.info(`Retry ${u}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),c)throw c;if(s)return s;throw new Error("Maximum retries reached with no response or error to throw")}t.info(`Retry ${u}: Processing ${r.length} retry strategies.`);t:for(let l of r){let p=l.logger||ZE;p.info(`Retry ${u}: Processing retry strategy ${l.name}.`);let d=l.retry({retryCount:u,response:s,responseError:c});if(d.skipStrategy){p.info(`Retry ${u}: Skipped.`);continue t}let{errorToThrow:f,retryAfterInMs:m,redirectTo:y}=d;if(f)throw p.error(`Retry ${u}: Retry strategy ${l.name} throws error:`,f),f;if(m||m===0){p.info(`Retry ${u}: Retry strategy ${l.name} retries after ${m}`),await IC(m,void 0,{abortSignal:n.abortSignal});continue e}if(y){p.info(`Retry ${u}: Retry strategy ${l.name} redirects to ${y}`),n.url=y;continue e}}if(c)throw t.info("None of the retry strategies could work with the received error. Throwing it."),c;if(s)return t.info("None of the retry strategies could work with the received response. Returning it."),s}}}}var iN="defaultRetryPolicy";function AC(r={}){var e;return{name:iN,sendRequest:Fi([SC(),xp(r)],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Dn}).sendRequest}}function oN(r){let e=rC();return Rt.isNode&&(e.addPolicy(dC(r.proxyOptions)),e.addPolicy(iC())),e.addPolicy(aC()),e.addPolicy(xC(r.userAgentOptions)),e.addPolicy(vC()),e.addPolicy(AC(r.retryOptions),{phase:"Retry"}),e.addPolicy(bC(r.userAgentOptions),{afterPhase:"Retry"}),Rt.isNode&&e.addPolicy(hC(r.redirectOptions),{afterPhase:"Retry"}),e.addPolicy(cC(r.loggingOptions),{afterPhase:"Retry"}),e}function hs(r){return r.toLowerCase()}function*aN(r){for(let e of r.values())yield[e.name,e.value]}var Tp=class{constructor(e){if(this._headersMap=new Map,e)for(let t of Object.keys(e))this.set(t,e[t])}set(e,t){this._headersMap.set(hs(e),{name:e,value:String(t)})}get(e){var t;return(t=this._headersMap.get(hs(e)))===null||t===void 0?void 0:t.value}has(e){return this._headersMap.has(hs(e))}delete(e){this._headersMap.delete(hs(e))}toJSON(e={}){let t={};if(e.preserveCase)for(let n of this._headersMap.values())t[n.name]=n.value;else for(let[n,i]of this._headersMap)t[n]=i.value;return t}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return aN(this._headersMap)}};function Ip(r){return new Tp(r)}var sN={};function qi(r){return r&&typeof r.pipe=="function"}function eC(r){return new Promise(e=>{r.on("close",e),r.on("end",e),r.on("error",e)})}function PC(r){return r&&typeof r.byteLength=="number"}var vs=class extends b0.Transform{constructor(e){super(),this.loadedBytes=0,this.progressCallback=e}_transform(e,t,n){this.push(e),this.loadedBytes+=e.length;try{this.progressCallback({loadedBytes:this.loadedBytes}),n()}catch(i){n(i)}}},bp=class{constructor(){this.cachedHttpsAgents=new WeakMap}async sendRequest(e){var t,n,i;let o=new ji.AbortController,a;if(e.abortSignal){if(e.abortSignal.aborted)throw new ji.AbortError("The operation was aborted.");a=p=>{p.type==="abort"&&o.abort()},e.abortSignal.addEventListener("abort",a)}e.timeout>0&&setTimeout(()=>{o.abort()},e.timeout);let s=e.headers.get("Accept-Encoding"),c=s?.includes("gzip")||s?.includes("deflate"),u=typeof e.body=="function"?e.body():e.body;if(u&&!e.headers.has("Content-Length")){let p=pN(u);p!==null&&e.headers.set("Content-Length",p)}let l;try{if(u&&e.onUploadProgress){let E=e.onUploadProgress,S=new vs(E);S.on("error",P=>{pt.error("Error in upload progress",P)}),qi(u)?u.pipe(S):S.end(u),u=S}let p=await this.makeRequest(e,o,u),d=cN(p),m={status:(t=p.statusCode)!==null&&t!==void 0?t:0,headers:d,request:e};if(e.method==="HEAD")return p.destroy(),m;l=c?uN(p,d):p;let y=e.onDownloadProgress;if(y){let E=new vs(y);E.on("error",S=>{pt.error("Error in download progress",S)}),l.pipe(E),l=E}return((n=e.streamResponseStatusCodes)===null||n===void 0?void 0:n.has(Number.POSITIVE_INFINITY))||((i=e.streamResponseStatusCodes)===null||i===void 0?void 0:i.has(m.status))?m.readableStreamBody=l:m.bodyAsText=await lN(l),m}finally{if(e.abortSignal&&a){let p=Promise.resolve();qi(u)&&(p=eC(u));let d=Promise.resolve();qi(l)&&(d=eC(l)),Promise.all([p,d]).then(()=>{var f;a&&((f=e.abortSignal)===null||f===void 0||f.removeEventListener("abort",a))}).catch(f=>{pt.warning("Error when cleaning up abortListener on httpRequest",f)})}}}makeRequest(e,t,n){var i;let o=new URL(e.url),a=o.protocol!=="https:";if(a&&!e.allowInsecureConnection)throw new Error(`Cannot connect to ${e.url} while allowInsecureConnection is false.`);let c={agent:(i=e.agent)!==null&&i!==void 0?i:this.getOrCreateAgent(e,a),hostname:o.hostname,path:`${o.pathname}${o.search}`,port:o.port,method:e.method,headers:e.headers.toJSON({preserveCase:!0})};return new Promise((u,l)=>{let p=a?vp.request(c,u):yp.request(c,u);p.once("error",d=>{var f;l(new Ye(d.message,{code:(f=d.code)!==null&&f!==void 0?f:Ye.REQUEST_SEND_ERROR,request:e}))}),t.signal.addEventListener("abort",()=>{let d=new ji.AbortError("The operation was aborted.");p.destroy(d),l(d)}),n&&qi(n)?n.pipe(p):n?typeof n=="string"||Buffer.isBuffer(n)?p.end(n):PC(n)?p.end(ArrayBuffer.isView(n)?Buffer.from(n.buffer):Buffer.from(n)):(pt.error("Unrecognized body type",n),l(new Ye("Unrecognized body type"))):p.end()})}getOrCreateAgent(e,t){var n;let i=e.disableKeepAlive;if(t)return i?vp.globalAgent:(this.cachedHttpAgent||(this.cachedHttpAgent=new vp.Agent({keepAlive:!0})),this.cachedHttpAgent);{if(i&&!e.tlsSettings)return yp.globalAgent;let o=(n=e.tlsSettings)!==null&&n!==void 0?n:sN,a=this.cachedHttpsAgents.get(o);return a&&a.options.keepAlive===!i||(pt.info("No cached TLS Agent exist, creating a new Agent"),a=new yp.Agent(Object.assign({keepAlive:!i},o)),this.cachedHttpsAgents.set(o,a)),a}}};function cN(r){let e=Ip();for(let t of Object.keys(r.headers)){let n=r.headers[t];Array.isArray(n)?n.length>0&&e.set(t,n[0]):n&&e.set(t,n)}return e}function uN(r,e){let t=e.get("Content-Encoding");if(t==="gzip"){let n=KE.createGunzip();return r.pipe(n),n}else if(t==="deflate"){let n=KE.createInflate();return r.pipe(n),n}return r}function lN(r){return new Promise((e,t)=>{let n=[];r.on("data",i=>{Buffer.isBuffer(i)?n.push(i):n.push(Buffer.from(i))}),r.on("end",()=>{e(Buffer.concat(n).toString("utf8"))}),r.on("error",i=>{i&&i?.name==="AbortError"?t(i):t(new Ye(`Error reading response as text: ${i.message}`,{code:Ye.PARSE_ERROR}))})})}function pN(r){return r?Buffer.isBuffer(r)?r.length:qi(r)?null:PC(r)?r.byteLength:typeof r=="string"?Buffer.from(r).length:null:0}function dN(){return new bp}function fN(){return dN()}function hN(){return w0.v4()}var wp=class{constructor(e){var t,n,i,o,a,s,c;this.url=e.url,this.body=e.body,this.headers=(t=e.headers)!==null&&t!==void 0?t:Ip(),this.method=(n=e.method)!==null&&n!==void 0?n:"GET",this.timeout=(i=e.timeout)!==null&&i!==void 0?i:0,this.formData=e.formData,this.disableKeepAlive=(o=e.disableKeepAlive)!==null&&o!==void 0?o:!1,this.proxySettings=e.proxySettings,this.streamResponseStatusCodes=e.streamResponseStatusCodes,this.withCredentials=(a=e.withCredentials)!==null&&a!==void 0?a:!1,this.abortSignal=e.abortSignal,this.tracingOptions=e.tracingOptions,this.onUploadProgress=e.onUploadProgress,this.onDownloadProgress=e.onDownloadProgress,this.requestId=e.requestId||hN(),this.allowInsecureConnection=(s=e.allowInsecureConnection)!==null&&s!==void 0?s:!1,this.enableBrowserStreams=(c=e.enableBrowserStreams)!==null&&c!==void 0?c:!1}};function mN(r){return new wp(r)}var gN="exponentialRetryPolicy";function vN(r={}){var e;return Fi([xp(Object.assign(Object.assign({},r),{ignoreSystemErrors:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Dn})}var RC="systemErrorRetryPolicy";function yN(r={}){var e;return{name:RC,sendRequest:Fi([xp(Object.assign(Object.assign({},r),{ignoreHttpStatusCodes:!0}))],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Dn}).sendRequest}}var OC="throttlingRetryPolicy";function EN(r={}){var e;return{name:OC,sendRequest:Fi([SC()],{maxRetries:(e=r.maxRetries)!==null&&e!==void 0?e:Dn}).sendRequest}}var CN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function TN(r,e,t){async function n(){if(Date.now()<t)try{return await r()}catch{return null}else{let o=await r();if(o===null)throw new Error("Failed to refresh access token.");return o}}let i=await n();for(;i===null;)await IC(e),i=await n();return i}function bN(r,e){let t=null,n=null,i,o=Object.assign(Object.assign({},CN),e),a={get isRefreshing(){return t!==null},get shouldRefresh(){var c;return!a.isRefreshing&&((c=n?.expiresOnTimestamp)!==null&&c!==void 0?c:0)-o.refreshWindowInMs<Date.now()},get mustRefresh(){return n===null||n.expiresOnTimestamp-o.forcedRefreshWindowInMs<Date.now()}};function s(c,u){var l;return a.isRefreshing||(t=TN(()=>r.getToken(c,u),o.retryIntervalInMs,(l=n?.expiresOnTimestamp)!==null&&l!==void 0?l:Date.now()).then(d=>(t=null,n=d,i=u.tenantId,n)).catch(d=>{throw t=null,n=null,i=void 0,d})),t}return async(c,u)=>i!==u.tenantId||a.mustRefresh?s(c,u):(a.shouldRefresh&&s(c,u),n)}var kC="bearerTokenAuthenticationPolicy";async function wN(r){let{scopes:e,getAccessToken:t,request:n}=r,i={abortSignal:n.abortSignal,tracingOptions:n.tracingOptions},o=await t(e,i);o&&r.request.headers.set("Authorization",`Bearer ${o.token}`)}function xN(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function IN(r){var e;let{credential:t,scopes:n,challengeCallbacks:i,logger:o}=r,a=Object.assign({authorizeRequest:(e=i?.authorizeRequest)!==null&&e!==void 0?e:wN,authorizeRequestOnChallenge:i?.authorizeRequestOnChallenge},i),s=t?bN(t):()=>Promise.resolve(null);return{name:kC,async sendRequest(c,u){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await a.authorizeRequest({scopes:Array.isArray(n)?n:[n],request:c,getAccessToken:s,logger:o});let l,p;try{l=await u(c)}catch(d){p=d,l=d.response}if(a.authorizeRequestOnChallenge&&l?.status===401&&xN(l)&&await a.authorizeRequestOnChallenge({scopes:Array.isArray(n)?n:[n],request:c,response:l,getAccessToken:s,logger:o}))return u(c);if(p)throw p;return l}}}var NC="ndJsonPolicy";function _N(){return{name:NC,async sendRequest(r,e){if(typeof r.body=="string"&&r.body.startsWith("[")){let t=JSON.parse(r.body);Array.isArray(t)&&(r.body=t.map(n=>JSON.stringify(n)+`
`).join(""))}return e(r)}}}K.RestError=Ye;K.bearerTokenAuthenticationPolicy=IN;K.bearerTokenAuthenticationPolicyName=kC;K.createDefaultHttpClient=fN;K.createEmptyPipeline=rC;K.createHttpHeaders=Ip;K.createPipelineFromOptions=oN;K.createPipelineRequest=mN;K.decompressResponsePolicy=iC;K.decompressResponsePolicyName=nC;K.defaultRetryPolicy=AC;K.exponentialRetryPolicy=vN;K.exponentialRetryPolicyName=gN;K.formDataPolicy=aC;K.formDataPolicyName=oC;K.getDefaultProxySettings=pC;K.isRestError=CC;K.logPolicy=cC;K.logPolicyName=sC;K.ndJsonPolicy=_N;K.ndJsonPolicyName=NC;K.proxyPolicy=dC;K.proxyPolicyName=uC;K.redirectPolicy=hC;K.redirectPolicyName=fC;K.retryPolicy=Fi;K.setClientRequestIdPolicy=vC;K.setClientRequestIdPolicyName=gC;K.systemErrorRetryPolicy=yN;K.systemErrorRetryPolicyName=RC;K.throttlingRetryPolicy=EN;K.throttlingRetryPolicyName=OC;K.tracingPolicy=bC;K.tracingPolicyName=TC;K.userAgentPolicy=xC;K.userAgentPolicyName=wC});var XC=g(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});var ur=_p(),SN=cs();function qC(r){return(r instanceof Buffer?r:Buffer.from(r.buffer)).toString("base64")}function jC(r){return Buffer.from(r,"base64")}function AN(r){return Buffer.from(r,"base64").toString()}var Ie="$",zi="_";function PN(r,e){return e!=="Composite"&&e!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||e?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}var RN=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ON(r){return RN.test(r)}var kN=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function NN(r){return kN.test(r)}function MN(r){let e=Object.assign(Object.assign({},r.headers),r.body);return r.hasNullableType&&Object.getOwnPropertyNames(e).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?Object.assign(Object.assign({},r.headers),{body:r.body}):e}function MC(r,e){var t,n;let i=r.parsedHeaders;if(r.request.method==="HEAD")return Object.assign(Object.assign({},i),{body:r.parsedBody});let o=e&&e.bodyMapper,a=Boolean(o?.nullable),s=o?.type.name;if(s==="Stream")return Object.assign(Object.assign({},i),{blobBody:r.blobBody,readableStreamBody:r.readableStreamBody});let c=s==="Composite"&&o.type.modelProperties||{},u=Object.keys(c).some(l=>c[l].serializedName==="");if(s==="Sequence"||u){let l=(t=r.parsedBody)!==null&&t!==void 0?t:[];for(let p of Object.keys(c))c[p].serializedName&&(l[p]=(n=r.parsedBody)===null||n===void 0?void 0:n[p]);if(i)for(let p of Object.keys(i))l[p]=i[p];return a&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(c).length===0?null:l}return MN({body:r.parsedBody,headers:i,hasNullableType:a,shouldWrapBody:PN(r.parsedBody,s)})}var Ap=class{constructor(e={},t=!1){this.modelMappers=e,this.isXML=t}validateConstraints(e,t,n){let i=(o,a)=>{throw new Error(`"${n}" with value "${t}" should satisfy the constraint "${o}": ${a}.`)};if(e.constraints&&t!==void 0&&t!==null){let{ExclusiveMaximum:o,ExclusiveMinimum:a,InclusiveMaximum:s,InclusiveMinimum:c,MaxItems:u,MaxLength:l,MinItems:p,MinLength:d,MultipleOf:f,Pattern:m,UniqueItems:y}=e.constraints;if(o!==void 0&&t>=o&&i("ExclusiveMaximum",o),a!==void 0&&t<=a&&i("ExclusiveMinimum",a),s!==void 0&&t>s&&i("InclusiveMaximum",s),c!==void 0&&t<c&&i("InclusiveMinimum",c),u!==void 0&&t.length>u&&i("MaxItems",u),l!==void 0&&t.length>l&&i("MaxLength",l),p!==void 0&&t.length<p&&i("MinItems",p),d!==void 0&&t.length<d&&i("MinLength",d),f!==void 0&&t%f!==0&&i("MultipleOf",f),m){let E=typeof m=="string"?new RegExp(m):m;(typeof t!="string"||t.match(E)===null)&&i("Pattern",m)}y&&t.some((E,S,P)=>P.indexOf(E)!==S)&&i("UniqueItems",y)}}serialize(e,t,n,i={xml:{}}){var o,a,s;let c={xml:{rootName:(o=i.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=i.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(s=i.xml.xmlCharKey)!==null&&s!==void 0?s:zi}},u={},l=e.type.name;n||(n=e.serializedName),l.match(/^Sequence$/i)!==null&&(u=[]),e.isConstant&&(t=e.defaultValue);let{required:p,nullable:d}=e;if(p&&d&&t===void 0)throw new Error(`${n} cannot be undefined.`);if(p&&!d&&t==null)throw new Error(`${n} cannot be null or undefined.`);if(!p&&d===!1&&t===null)throw new Error(`${n} cannot be null.`);return t==null?u=t:(this.validateConstraints(e,t,n),l.match(/^any$/i)!==null?u=t:l.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?u=FN(l,n,t):l.match(/^Enum$/i)!==null?u=zN(n,e.type.allowedValues,t):l.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?u=$N(l,t,n):l.match(/^ByteArray$/i)!==null?u=HN(n,t):l.match(/^Base64Url$/i)!==null?u=GN(n,t):l.match(/^Sequence$/i)!==null?u=VN(this,e,t,n,Boolean(this.isXML),c):l.match(/^Dictionary$/i)!==null?u=KN(this,e,t,n,Boolean(this.isXML),c):l.match(/^Composite$/i)!==null&&(u=WN(this,e,t,n,Boolean(this.isXML),c))),u}deserialize(e,t,n,i={xml:{}}){var o,a,s;let c={xml:{rootName:(o=i.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=i.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(s=i.xml.xmlCharKey)!==null&&s!==void 0?s:zi}};if(t==null)return this.isXML&&e.type.name==="Sequence"&&!e.xmlIsWrapped&&(t=[]),e.defaultValue!==void 0&&(t=e.defaultValue),t;let u,l=e.type.name;if(n||(n=e.serializedName),l.match(/^Composite$/i)!==null)u=QN(this,e,t,n,c);else{if(this.isXML){let p=c.xml.xmlCharKey;t[Ie]!==void 0&&t[p]!==void 0&&(t=t[p])}l.match(/^Number$/i)!==null?(u=parseFloat(t),isNaN(u)&&(u=t)):l.match(/^Boolean$/i)!==null?t==="true"?u=!0:t==="false"?u=!1:u=t:l.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?u=t:l.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?u=new Date(t):l.match(/^UnixTime$/i)!==null?u=jN(t):l.match(/^ByteArray$/i)!==null?u=jC(t):l.match(/^Base64Url$/i)!==null?u=BN(t):l.match(/^Sequence$/i)!==null?u=ZN(this,e,t,n,c):l.match(/^Dictionary$/i)!==null&&(u=XN(this,e,t,n,c))}return e.isConstant&&(u=e.defaultValue),u}};function DN(r={},e=!1){return new Ap(r,e)}function UN(r,e){let t=r.length;for(;t-1>=0&&r[t-1]===e;)--t;return r.substr(0,t)}function LN(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");let e=qC(r);return UN(e,"=").replace(/\+/g,"-").replace(/\//g,"_")}function BN(r){if(!!r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),jC(r)}}function Pp(r){let e=[],t="";if(r){let n=r.split(".");for(let i of n)i.charAt(i.length-1)==="\\"?t+=i.substr(0,i.length-1)+".":(t+=i,e.push(t),t="")}return e}function qN(r){if(!!r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function jN(r){if(!!r)return new Date(r*1e3)}function FN(r,e,t){if(t!=null){if(r.match(/^Number$/i)!==null){if(typeof t!="number")throw new Error(`${e} with value ${t} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof t.valueOf()!="string")throw new Error(`${e} with value "${t}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof t.valueOf()=="string"&&NN(t)))throw new Error(`${e} with value "${t}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof t!="boolean")throw new Error(`${e} with value ${t} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null&&typeof t!=="string"&&typeof t.pipe!="function"&&!(t instanceof ArrayBuffer)&&!ArrayBuffer.isView(t)&&!((typeof Blob=="function"||typeof Blob=="object")&&t instanceof Blob))throw new Error(`${e} must be a string, Blob, ArrayBuffer, ArrayBufferView, or NodeJS.ReadableStream.`)}return t}function zN(r,e,t){if(!e)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!e.some(i=>typeof i.valueOf()=="string"?i.toLowerCase()===t.toLowerCase():i===t))throw new Error(`${t} is not a valid value for ${r}. The valid values are: ${JSON.stringify(e)}.`);return t}function HN(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=qC(e)}return e}function GN(r,e){if(e!=null){if(!(e instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);e=LN(e)}return e}function $N(r,e,t){if(e!=null){if(r.match(/^Date$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString().substring(0,10):new Date(e).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in ISO8601 format.`);e=e instanceof Date?e.toISOString():new Date(e).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123 format.`);e=e instanceof Date?e.toUTCString():new Date(e).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(e instanceof Date||typeof e.valueOf()=="string"&&!isNaN(Date.parse(e))))throw new Error(`${t} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);e=qN(e)}else if(r.match(/^TimeSpan$/i)!==null&&!ON(e))throw new Error(`${t} must be a string in ISO 8601 format. Instead was "${e}".`)}return e}function VN(r,e,t,n,i,o){var a;if(!Array.isArray(t))throw new Error(`${n} must be of type Array.`);let s=e.type.element;if(!s||typeof s!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}.`);s.type.name==="Composite"&&s.type.className&&(s=(a=r.modelMappers[s.type.className])!==null&&a!==void 0?a:s);let c=[];for(let u=0;u<t.length;u++){let l=r.serialize(s,t[u],n,o);if(i&&s.xmlNamespace){let p=s.xmlNamespacePrefix?`xmlns:${s.xmlNamespacePrefix}`:"xmlns";s.type.name==="Composite"?(c[u]=Object.assign({},l),c[u][Ie]={[p]:s.xmlNamespace}):(c[u]={},c[u][o.xml.xmlCharKey]=l,c[u][Ie]={[p]:s.xmlNamespace})}else c[u]=l}return c}function KN(r,e,t,n,i,o){if(typeof t!="object")throw new Error(`${n} must be of type object.`);let a=e.type.value;if(!a||typeof a!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}.`);let s={};for(let c of Object.keys(t)){let u=r.serialize(a,t[c],n,o);s[c]=HC(a,u,i,o)}if(i&&e.xmlNamespace){let c=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns",u=s;return u[Ie]={[c]:e.xmlNamespace},u}return s}function YN(r,e,t){let n=e.type.additionalProperties;if(!n&&e.type.className){let i=FC(r,e,t);return i?.type.additionalProperties}return n}function FC(r,e,t){let n=e.type.className;if(!n)throw new Error(`Class name for model "${t}" is not provided in the mapper "${JSON.stringify(e,void 0,2)}".`);return r.modelMappers[n]}function zC(r,e,t){let n=e.type.modelProperties;if(!n){let i=FC(r,e,t);if(!i)throw new Error(`mapper() cannot be null or undefined for model "${e.type.className}".`);if(n=i?.type.modelProperties,!n)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(i)}" of type "${e.type.className}" for object "${t}".`)}return n}function WN(r,e,t,n,i,o){if(Es(r,e)&&(e=GC(r,e,t,"clientName")),t!=null){let a={},s=zC(r,e,n);for(let u of Object.keys(s)){let l=s[u];if(l.readOnly)continue;let p,d=a;if(r.isXML)l.xmlIsWrapped?p=l.xmlName:p=l.xmlElementName||l.xmlName;else{let f=Pp(l.serializedName);p=f.pop();for(let m of f){let y=d[m];y==null&&(t[u]!==void 0&&t[u]!==null||l.defaultValue!==void 0)&&(d[m]={}),d=d[m]}}if(d!=null){if(i&&e.xmlNamespace){let S=e.xmlNamespacePrefix?`xmlns:${e.xmlNamespacePrefix}`:"xmlns";d[Ie]=Object.assign(Object.assign({},d[Ie]),{[S]:e.xmlNamespace})}let f=l.serializedName!==""?n+"."+l.serializedName:n,m=t[u],y=Es(r,e);y&&y.clientName===u&&m==null&&(m=e.serializedName);let E=r.serialize(l,m,f,o);if(E!==void 0&&p!==void 0&&p!==null){let S=HC(l,E,i,o);i&&l.xmlIsAttribute?(d[Ie]=d[Ie]||{},d[Ie][p]=E):i&&l.xmlIsWrapped?d[p]={[l.xmlElementName]:S}:d[p]=S}}}let c=YN(r,e,n);if(c){let u=Object.keys(s);for(let l in t)u.every(d=>d!==l)&&(a[l]=r.serialize(c,t[l],n+'["'+l+'"]',o))}return a}return t}function HC(r,e,t,n){if(!t||!r.xmlNamespace)return e;let o={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(e[Ie])return e;{let s=Object.assign({},e);return s[Ie]=o,s}}let a={};return a[n.xml.xmlCharKey]=e,a[Ie]=o,a}function JN(r,e){return[Ie,e.xml.xmlCharKey].includes(r)}function QN(r,e,t,n,i){var o;Es(r,e)&&(e=GC(r,e,t,"serializedName"));let a=zC(r,e,n),s={},c=[];for(let l of Object.keys(a)){let p=a[l],d=Pp(a[l].serializedName);c.push(d[0]);let{serializedName:f,xmlName:m,xmlElementName:y}=p,E=n;f!==""&&f!==void 0&&(E=n+"."+f);let S=p.headerCollectionPrefix;if(S){let P={};for(let A of Object.keys(t))A.startsWith(S)&&(P[A.substring(S.length)]=r.deserialize(p.type.value,t[A],E,i)),c.push(A);s[l]=P}else if(r.isXML)if(p.xmlIsAttribute&&t[Ie])s[l]=r.deserialize(p,t[Ie][m],E,i);else{let P=y||m||f;if(p.xmlIsWrapped){let A=t[m],j=(o=A?.[y])!==null&&o!==void 0?o:[];s[l]=r.deserialize(p,j,E,i)}else{let A=t[P];s[l]=r.deserialize(p,A,E,i)}}else{let P,A=t;for(let we of d){if(!A)break;A=A[we]}P=A;let j=e.type.polymorphicDiscriminator;j&&l===j.clientName&&P==null&&(P=e.serializedName);let ce;if(Array.isArray(t[l])&&a[l].serializedName===""){P=t[l];let we=r.deserialize(p,P,E,i);for(let[Et,ze]of Object.entries(s))Object.prototype.hasOwnProperty.call(we,Et)||(we[Et]=ze);s=we}else(P!==void 0||p.defaultValue!==void 0)&&(ce=r.deserialize(p,P,E,i),s[l]=ce)}}let u=e.type.additionalProperties;if(u){let l=p=>{for(let d in a)if(Pp(a[d].serializedName)[0]===p)return!1;return!0};for(let p in t)l(p)&&(s[p]=r.deserialize(u,t[p],n+'["'+p+'"]',i))}else if(t)for(let l of Object.keys(t))s[l]===void 0&&!c.includes(l)&&!JN(l,i)&&(s[l]=t[l]);return s}function XN(r,e,t,n,i){let o=e.type.value;if(!o||typeof o!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${n}`);if(t){let a={};for(let s of Object.keys(t))a[s]=r.deserialize(o,t[s],n,i);return a}return t}function ZN(r,e,t,n,i){var o;let a=e.type.element;if(!a||typeof a!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${n}`);if(t){Array.isArray(t)||(t=[t]),a.type.name==="Composite"&&a.type.className&&(a=(o=r.modelMappers[a.type.className])!==null&&o!==void 0?o:a);let s=[];for(let c=0;c<t.length;c++)s[c]=r.deserialize(a,t[c],`${n}[${c}]`,i);return s}return t}function GC(r,e,t,n){let i=Es(r,e);if(i){let o=i[n];if(o){n==="serializedName"&&(o=o.replace(/\\/gi,""));let a=t[o];if(a!=null){let s=e.type.uberParent||e.type.className,c=a===s?a:s+"."+a,u=r.modelMappers.discriminators[c];u&&(e=u)}}}return e}function Es(r,e){return e.type.polymorphicDiscriminator||DC(r,e.type.uberParent)||DC(r,e.type.className)}function DC(r,e){return e&&r.modelMappers[e]&&r.modelMappers[e].type.polymorphicDiscriminator}var zr={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};function Un(r,e,t){let n=e.parameterPath,i=e.mapper,o;if(typeof n=="string"&&(n=[n]),Array.isArray(n)){if(n.length>0)if(i.isConstant)o=i.defaultValue;else{let a=UC(r,n);!a.propertyFound&&t&&(a=UC(t,n));let s=!1;a.propertyFound||(s=i.required||n[0]==="options"&&n.length===2),o=s?i.defaultValue:a.propertyValue}}else{i.required&&(o={});for(let a in n){let s=i.type.modelProperties[a],c=n[a],u=Un(r,{parameterPath:c,mapper:s},t);u!==void 0&&(o||(o={}),o[a]=u)}}return o}function UC(r,e){let t={propertyFound:!1},n=0;for(;n<e.length;++n){let i=e[n];if(r&&i in r)r=r[i];else break}return n===e.length&&(t.propertyValue=r,t.propertyFound=!0),t}var LC=new WeakMap;function Hi(r){let e=LC.get(r);return e||(e={},LC.set(r,e)),e}var eM=["application/json","text/json"],tM=["application/xml","application/atom+xml"],$C="deserializationPolicy";function VC(r={}){var e,t,n,i,o,a,s;let c=(t=(e=r.expectedContentTypes)===null||e===void 0?void 0:e.json)!==null&&t!==void 0?t:eM,u=(i=(n=r.expectedContentTypes)===null||n===void 0?void 0:n.xml)!==null&&i!==void 0?i:tM,l=r.parseXML,p=r.serializerOptions,d={xml:{rootName:(o=p?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=p?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(s=p?.xml.xmlCharKey)!==null&&s!==void 0?s:zi}};return{name:$C,async sendRequest(f,m){let y=await m(f);return iM(c,u,y,d,l)}}}function rM(r){let e,t=r.request,n=Hi(t),i=n?.operationSpec;return i&&(n?.operationResponseGetter?e=n?.operationResponseGetter(i,r):e=i.responses[r.status]),e}function nM(r){let e=r.request,t=Hi(e),n=t?.shouldDeserialize,i;return n===void 0?i=!0:typeof n=="boolean"?i=n:i=n(r),i}async function iM(r,e,t,n,i){let o=await sM(r,e,t,n,i);if(!nM(o))return o;let a=Hi(o.request),s=a?.operationSpec;if(!s||!s.responses)return o;let c=rM(o),{error:u,shouldReturnResponse:l}=aM(o,s,c);if(u)throw u;if(l)return o;if(c){if(c.bodyMapper){let p=o.parsedBody;s.isXML&&c.bodyMapper.type.name===zr.Sequence&&(p=typeof p=="object"?p[c.bodyMapper.xmlElementName]:[]);try{o.parsedBody=s.serializer.deserialize(c.bodyMapper,p,"operationRes.parsedBody")}catch(d){throw new ur.RestError(`Error ${d} occurred in deserializing the responseBody - ${o.bodyAsText}`,{statusCode:o.status,request:o.request,response:o})}}else s.httpMethod==="HEAD"&&(o.parsedBody=t.status>=200&&t.status<300);c.headersMapper&&(o.parsedHeaders=s.serializer.deserialize(c.headersMapper,o.headers.toJSON(),"operationRes.parsedHeaders"))}return o}function oM(r){let e=Object.keys(r.responses);return e.length===0||e.length===1&&e[0]==="default"}function aM(r,e,t){var n;let i=200<=r.status&&r.status<300;if(oM(e)?i:!!t)if(t){if(!t.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};let a=t??e.responses.default,s=!((n=r.request.streamResponseStatusCodes)===null||n===void 0)&&n.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,c=new ur.RestError(s,{statusCode:r.status,request:r.request,response:r});if(!a)throw c;let u=a.bodyMapper,l=a.headersMapper;try{if(r.parsedBody){let p=r.parsedBody,d;if(u){let m=p;if(e.isXML&&u.type.name===zr.Sequence){m=[];let y=u.xmlElementName;typeof p=="object"&&y&&(m=p[y])}d=e.serializer.deserialize(u,m,"error.response.parsedBody")}let f=p.error||d||p;c.code=f.code,f.message&&(c.message=f.message),u&&(c.response.parsedBody=d)}r.headers&&l&&(c.response.parsedHeaders=e.serializer.deserialize(l,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(p){c.message=`Error "${p.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:c,shouldReturnResponse:!1}}async function sM(r,e,t,n,i){var o;if(!(!((o=t.request.streamResponseStatusCodes)===null||o===void 0)&&o.has(t.status))&&t.bodyAsText){let a=t.bodyAsText,s=t.headers.get("Content-Type")||"",c=s?s.split(";").map(u=>u.toLowerCase()):[];try{if(c.length===0||c.some(u=>r.indexOf(u)!==-1))return t.parsedBody=JSON.parse(a),t;if(c.some(u=>e.indexOf(u)!==-1)){if(!i)throw new Error("Parsing XML not supported.");let u=await i(a,n.xml);return t.parsedBody=u,t}}catch(u){let l=`Error "${u}" occurred while parsing the response body - ${t.bodyAsText}.`,p=u.code||ur.RestError.PARSE_ERROR;throw new ur.RestError(l,{code:p,statusCode:t.status,request:t.request,response:t})}}return t}function cM(r){let e=new Set;for(let t in r.responses){let n=r.responses[t];n.bodyMapper&&n.bodyMapper.type.name===zr.Stream&&e.add(Number(t))}return e}function cr(r){let{parameterPath:e,mapper:t}=r,n;return typeof e=="string"?n=e:Array.isArray(e)?n=e.join("."):n=t.serializedName,n}var KC="serializationPolicy";function YC(r={}){let e=r.stringifyXML;return{name:KC,async sendRequest(t,n){let i=Hi(t),o=i?.operationSpec,a=i?.operationArguments;return o&&a&&(uM(t,a,o),lM(t,a,o,e)),n(t)}}}function uM(r,e,t){var n,i;if(t.headerParameters)for(let a of t.headerParameters){let s=Un(e,a);if(s!=null||a.mapper.required){s=t.serializer.serialize(a.mapper,s,cr(a));let c=a.mapper.headerCollectionPrefix;if(c)for(let u of Object.keys(s))r.headers.set(c+u,s[u]);else r.headers.set(a.mapper.serializedName||cr(a),s)}}let o=(i=(n=e.options)===null||n===void 0?void 0:n.requestOptions)===null||i===void 0?void 0:i.customHeaders;if(o)for(let a of Object.keys(o))r.headers.set(a,o[a])}function lM(r,e,t,n=function(){throw new Error("XML serialization unsupported!")}){var i,o,a,s,c;let u=(i=e.options)===null||i===void 0?void 0:i.serializerOptions,l={xml:{rootName:(o=u?.xml.rootName)!==null&&o!==void 0?o:"",includeRoot:(a=u?.xml.includeRoot)!==null&&a!==void 0?a:!1,xmlCharKey:(s=u?.xml.xmlCharKey)!==null&&s!==void 0?s:zi}},p=l.xml.xmlCharKey;if(t.requestBody&&t.requestBody.mapper){r.body=Un(e,t.requestBody);let d=t.requestBody.mapper,{required:f,serializedName:m,xmlName:y,xmlElementName:E,xmlNamespace:S,xmlNamespacePrefix:P,nullable:A}=d,j=d.type.name;try{if(r.body!==void 0&&r.body!==null||A&&r.body===null||f){let ce=cr(t.requestBody);r.body=t.serializer.serialize(d,r.body,ce,l);let we=j===zr.Stream;if(t.isXML){let Et=P?`xmlns:${P}`:"xmlns",ze=pM(S,Et,j,r.body,l);j===zr.Sequence?r.body=n(dM(ze,E||y||m,Et,S),{rootName:y||m,xmlCharKey:p}):we||(r.body=n(ze,{rootName:y||m,xmlCharKey:p}))}else{if(j===zr.String&&(((c=t.contentType)===null||c===void 0?void 0:c.match("text/plain"))||t.mediaType==="text"))return;we||(r.body=JSON.stringify(r.body))}}}catch(ce){throw new Error(`Error "${ce.message}" occurred in serializing the payload - ${JSON.stringify(m,void 0,"  ")}.`)}}else if(t.formDataParameters&&t.formDataParameters.length>0){r.formData={};for(let d of t.formDataParameters){let f=Un(e,d);if(f!=null){let m=d.mapper.serializedName||cr(d);r.formData[m]=t.serializer.serialize(d.mapper,f,cr(d),l)}}}}function pM(r,e,t,n,i){if(r&&!["Composite","Sequence","Dictionary"].includes(t)){let o={};return o[i.xml.xmlCharKey]=n,o[Ie]={[e]:r},o}return n}function dM(r,e,t,n){if(Array.isArray(r)||(r=[r]),!t||!n)return{[e]:r};let i={[e]:r};return i[Ie]={[t]:n},i}function WC(r={}){let e=ur.createPipelineFromOptions(r??{});return r.credentialOptions&&e.addPolicy(ur.bearerTokenAuthenticationPolicy({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),e.addPolicy(YC(r.serializationOptions),{phase:"Serialize"}),e.addPolicy(VC(r.deserializationOptions),{phase:"Deserialize"}),e}var Sp;function fM(){return Sp||(Sp=ur.createDefaultHttpClient()),Sp}var hM={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function mM(r,e,t,n){let i=gM(e,t,n),o=!1,a=BC(r,i);if(e.path){let u=BC(e.path,i);e.path==="/{nextLink}"&&u.startsWith("/")&&(u=u.substring(1)),vM(u)?(a=u,o=!0):a=yM(a,u)}let{queryParams:s,sequenceParams:c}=EM(e,t,n);return a=TM(a,s,c,o),a}function BC(r,e){let t=r;for(let[n,i]of e)t=t.split(n).join(i);return t}function gM(r,e,t){var n;let i=new Map;if(!((n=r.urlParameters)===null||n===void 0)&&n.length)for(let o of r.urlParameters){let a=Un(e,o,t),s=cr(o);a=r.serializer.serialize(o.mapper,a,s),o.skipEncoding||(a=encodeURIComponent(a)),i.set(`{${o.mapper.serializedName||s}}`,a)}return i}function vM(r){return r.includes("://")}function yM(r,e){if(!e)return r;let t=new URL(r),n=t.pathname;n.endsWith("/")||(n=`${n}/`),e.startsWith("/")&&(e=e.substring(1));let i=e.indexOf("?");if(i!==-1){let o=e.substring(0,i),a=e.substring(i+1);n=n+o,a&&(t.search=t.search?`${t.search}&${a}`:a)}else n=n+e;return t.pathname=n,t.toString()}function EM(r,e,t){var n;let i=new Map,o=new Set;if(!((n=r.queryParameters)===null||n===void 0)&&n.length)for(let a of r.queryParameters){a.mapper.type.name==="Sequence"&&a.mapper.serializedName&&o.add(a.mapper.serializedName);let s=Un(e,a,t);if(s!=null||a.mapper.required){s=r.serializer.serialize(a.mapper,s,cr(a));let c=a.collectionFormat?hM[a.collectionFormat]:"";if(Array.isArray(s)&&(s=s.map(u=>u??"")),a.collectionFormat==="Multi"&&s.length===0)continue;Array.isArray(s)&&(a.collectionFormat==="SSV"||a.collectionFormat==="TSV")&&(s=s.join(c)),a.skipEncoding||(Array.isArray(s)?s=s.map(u=>encodeURIComponent(u)):s=encodeURIComponent(s)),Array.isArray(s)&&(a.collectionFormat==="CSV"||a.collectionFormat==="Pipes")&&(s=s.join(c)),i.set(a.mapper.serializedName||cr(a),s)}}return{queryParams:i,sequenceParams:o}}function CM(r){let e=new Map;if(!r||r[0]!=="?")return e;r=r.slice(1);let t=r.split("&");for(let n of t){let[i,o]=n.split("=",2),a=e.get(i);a?Array.isArray(a)?a.push(o):e.set(i,[a,o]):e.set(i,o)}return e}function TM(r,e,t,n=!1){if(e.size===0)return r;let i=new URL(r),o=CM(i.search);for(let[s,c]of e){let u=o.get(s);if(Array.isArray(u))if(Array.isArray(c)){u.push(...c);let l=new Set(u);o.set(s,Array.from(l))}else u.push(c);else u?(Array.isArray(c)?c.unshift(u):t.has(s)&&o.set(s,[u,c]),n||o.set(s,c)):o.set(s,c)}let a=[];for(let[s,c]of o)if(typeof c=="string")a.push(`${s}=${c}`);else if(Array.isArray(c))for(let u of c)a.push(`${s}=${u}`);else a.push(`${s}=${c}`);return i.search=a.length?`?${a.join("&")}`:"",i.toString()}var JC=SN.createClientLogger("core-client"),Rp=class{constructor(e={}){var t,n;if(this._requestContentType=e.requestContentType,this._endpoint=(t=e.endpoint)!==null&&t!==void 0?t:e.baseUri,e.baseUri&&JC.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=e.allowInsecureConnection,this._httpClient=e.httpClient||fM(),this.pipeline=e.pipeline||bM(e),!((n=e.additionalPolicies)===null||n===void 0)&&n.length)for(let{policy:i,position:o}of e.additionalPolicies){let a=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:a})}}async sendRequest(e){return this.pipeline.sendRequest(this._httpClient,e)}async sendOperationRequest(e,t){let n=t.baseUrl||this._endpoint;if(!n)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");let i=mM(n,t,e,this),o=ur.createPipelineRequest({url:i});o.method=t.httpMethod;let a=Hi(o);a.operationSpec=t,a.operationArguments=e;let s=t.contentType||this._requestContentType;s&&t.requestBody&&o.headers.set("Content-Type",s);let c=e.options;if(c){let u=c.requestOptions;u&&(u.timeout&&(o.timeout=u.timeout),u.onUploadProgress&&(o.onUploadProgress=u.onUploadProgress),u.onDownloadProgress&&(o.onDownloadProgress=u.onDownloadProgress),u.shouldDeserialize!==void 0&&(a.shouldDeserialize=u.shouldDeserialize),u.allowInsecureConnection&&(o.allowInsecureConnection=!0)),c.abortSignal&&(o.abortSignal=c.abortSignal),c.tracingOptions&&(o.tracingOptions=c.tracingOptions)}this._allowInsecureConnection&&(o.allowInsecureConnection=!0),o.streamResponseStatusCodes===void 0&&(o.streamResponseStatusCodes=cM(t));try{let u=await this.sendRequest(o),l=MC(u,t.responses[u.status]);return c?.onResponse&&c.onResponse(u,l),l}catch(u){if(typeof u=="object"&&u?.response){let l=u.response,p=MC(l,t.responses[u.statusCode]||t.responses.default);u.details=p,c?.onResponse&&c.onResponse(l,p,u)}throw u}}};function bM(r){let e=wM(r),t=r.credential&&e?{credentialScopes:e,credential:r.credential}:void 0;return WC(Object.assign(Object.assign({},r),{credentialOptions:t}))}function wM(r){if(r.credentialScopes){let e=r.credentialScopes;return Array.isArray(e)?e.map(t=>new URL(t).toString()):new URL(e).toString()}if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function xM(r){return`, ${r.trim()}`.split(", Bearer ").filter(t=>t).map(t=>`${t.trim()}, `.split('", ').filter(o=>o).map(o=>(([a,s])=>({[a]:s}))(o.trim().split('="'))).reduce((o,a)=>Object.assign(Object.assign({},o),a),{}))}async function IM(r){let{scopes:e,response:t}=r,n=r.logger||JC,i=t.headers.get("WWW-Authenticate");if(!i)return n.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;let a=(xM(i)||[]).find(c=>c.claims);if(!a)return n.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;let s=await r.getAccessToken(a.scope?[a.scope]:e,{claims:AN(a.claims)});return s?(r.request.headers.set("Authorization",`Bearer ${s.token}`),!0):!1}var QC={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}},_M=async r=>{let e=OM(r.request),t=PM(r.response);if(t){let n=RM(t),i=AM(r,n),o=SM(n),a=await r.getAccessToken(i,Object.assign(Object.assign({},e),{tenantId:o}));return a?(r.request.headers.set(QC.HeaderConstants.AUTHORIZATION,`Bearer ${a.token}`),!0):!1}return!1};function SM(r){return new URL(r.authorization_uri).pathname.split("/")[1]}function AM(r,e){if(!e.resource_uri)return r.scopes;let t=new URL(e.resource_uri);return t.pathname=QC.DefaultScope,[t.toString()]}function PM(r){let e=r.headers.get("WWW-Authenticate");if(r.status===401&&e)return e}function RM(r){return`${r.slice(7).trim()} `.split(" ").filter(i=>i).map(i=>(([o,a])=>({[o]:a}))(i.trim().split("="))).reduce((i,o)=>Object.assign(Object.assign({},i),o),{})}function OM(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}Fe.MapperTypeNames=zr;Fe.ServiceClient=Rp;Fe.XML_ATTRKEY=Ie;Fe.XML_CHARKEY=zi;Fe.authorizeRequestOnClaimChallenge=IM;Fe.authorizeRequestOnTenantChallenge=_M;Fe.createClientPipeline=WC;Fe.createSerializer=DN;Fe.deserializationPolicy=VC;Fe.deserializationPolicyName=$C;Fe.serializationPolicy=YC;Fe.serializationPolicyName=KC});var yT=g(v=>{"use strict";"use strict";Object.defineProperty(v,"__esModule",{value:!0});var Op=function(r,e){return Op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Op(r,e)};function De(r,e){Op(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qe=function(){return qe=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},qe.apply(this,arguments)};function G(r,e,t,n){function i(o){return o instanceof t?o:new t(function(a){a(o)})}return new(t||(t=Promise))(function(o,a){function s(l){try{u(n.next(l))}catch(p){a(p)}}function c(l){try{u(n.throw(l))}catch(p){a(p)}}function u(l){l.done?o(l.value):i(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})}function $(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function xs(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}var U={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",ADFS:"adfs",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},Bp=[U.OPENID_SCOPE,U.PROFILE_SCOPE,U.OFFLINE_ACCESS_SCOPE],ZC=xs(Bp,[U.EMAIL_SCOPE]),Ht;(function(r){r.CONTENT_TYPE="Content-Type",r.RETRY_AFTER="Retry-After",r.CCS_HEADER="X-AnchorMailbox"})(Ht||(Ht={}));v.PersistentCacheKeys=void 0;(function(r){r.ID_TOKEN="idtoken",r.CLIENT_INFO="client.info",r.ADAL_ID_TOKEN="adal.idtoken",r.ERROR="error",r.ERROR_DESC="error.description",r.ACTIVE_ACCOUNT="active-account"})(v.PersistentCacheKeys||(v.PersistentCacheKeys={}));var Cs;(function(r){r.COMMON="common",r.ORGANIZATIONS="organizations",r.CONSUMERS="consumers"})(Cs||(Cs={}));var W;(function(r){r.CLIENT_ID="client_id",r.REDIRECT_URI="redirect_uri",r.RESPONSE_TYPE="response_type",r.RESPONSE_MODE="response_mode",r.GRANT_TYPE="grant_type",r.CLAIMS="claims",r.SCOPE="scope",r.ERROR="error",r.ERROR_DESCRIPTION="error_description",r.ACCESS_TOKEN="access_token",r.ID_TOKEN="id_token",r.REFRESH_TOKEN="refresh_token",r.EXPIRES_IN="expires_in",r.STATE="state",r.NONCE="nonce",r.PROMPT="prompt",r.SESSION_STATE="session_state",r.CLIENT_INFO="client_info",r.CODE="code",r.CODE_CHALLENGE="code_challenge",r.CODE_CHALLENGE_METHOD="code_challenge_method",r.CODE_VERIFIER="code_verifier",r.CLIENT_REQUEST_ID="client-request-id",r.X_CLIENT_SKU="x-client-SKU",r.X_CLIENT_VER="x-client-VER",r.X_CLIENT_OS="x-client-OS",r.X_CLIENT_CPU="x-client-CPU",r.X_CLIENT_CURR_TELEM="x-client-current-telemetry",r.X_CLIENT_LAST_TELEM="x-client-last-telemetry",r.X_MS_LIB_CAPABILITY="x-ms-lib-capability",r.POST_LOGOUT_URI="post_logout_redirect_uri",r.ID_TOKEN_HINT="id_token_hint",r.DEVICE_CODE="device_code",r.CLIENT_SECRET="client_secret",r.CLIENT_ASSERTION="client_assertion",r.CLIENT_ASSERTION_TYPE="client_assertion_type",r.TOKEN_TYPE="token_type",r.REQ_CNF="req_cnf",r.OBO_ASSERTION="assertion",r.REQUESTED_TOKEN_USE="requested_token_use",r.ON_BEHALF_OF="on_behalf_of",r.FOCI="foci",r.CCS_HEADER="X-AnchorMailbox"})(W||(W={}));var Bn;(function(r){r.ACCESS_TOKEN="access_token",r.XMS_CC="xms_cc"})(Bn||(Bn={}));var jn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create"},Gr;(function(r){r.ACCOUNT="account",r.SID="sid",r.LOGIN_HINT="login_hint",r.ID_TOKEN="id_token",r.DOMAIN_HINT="domain_hint",r.ORGANIZATIONS="organizations",r.CONSUMERS="consumers",r.ACCOUNT_ID="accountIdentifier",r.HOMEACCOUNT_ID="homeAccountIdentifier"})(Gr||(Gr={}));Gr.SID,Gr.LOGIN_HINT;var eT={PLAIN:"plain",S256:"S256"};v.ResponseMode=void 0;(function(r){r.QUERY="query",r.FRAGMENT="fragment",r.FORM_POST="form_post"})(v.ResponseMode||(v.ResponseMode={}));var dr;(function(r){r.IMPLICIT_GRANT="implicit",r.AUTHORIZATION_CODE_GRANT="authorization_code",r.CLIENT_CREDENTIALS_GRANT="client_credentials",r.RESOURCE_OWNER_PASSWORD_GRANT="password",r.REFRESH_TOKEN_GRANT="refresh_token",r.DEVICE_CODE_GRANT="device_code",r.JWT_BEARER="urn:ietf:params:oauth:grant-type:jwt-bearer"})(dr||(dr={}));v.CacheAccountType=void 0;(function(r){r.MSSTS_ACCOUNT_TYPE="MSSTS",r.ADFS_ACCOUNT_TYPE="ADFS",r.MSAV1_ACCOUNT_TYPE="MSA",r.GENERIC_ACCOUNT_TYPE="Generic"})(v.CacheAccountType||(v.CacheAccountType={}));var Je;(function(r){r.CACHE_KEY_SEPARATOR="-",r.CLIENT_INFO_SEPARATOR="."})(Je||(Je={}));v.CredentialType=void 0;(function(r){r.ID_TOKEN="IdToken",r.ACCESS_TOKEN="AccessToken",r.ACCESS_TOKEN_WITH_AUTH_SCHEME="AccessToken_With_AuthScheme",r.REFRESH_TOKEN="RefreshToken"})(v.CredentialType||(v.CredentialType={}));v.CacheSchemaType=void 0;(function(r){r.ACCOUNT="Account",r.CREDENTIAL="Credential",r.ID_TOKEN="IdToken",r.ACCESS_TOKEN="AccessToken",r.REFRESH_TOKEN="RefreshToken",r.APP_METADATA="AppMetadata",r.TEMPORARY="TempCache",r.TELEMETRY="Telemetry",r.UNDEFINED="Undefined",r.THROTTLING="Throttling"})(v.CacheSchemaType||(v.CacheSchemaType={}));v.CacheType=void 0;(function(r){r[r.ADFS=1001]="ADFS",r[r.MSA=1002]="MSA",r[r.MSSTS=1003]="MSSTS",r[r.GENERIC=1004]="GENERIC",r[r.ACCESS_TOKEN=2001]="ACCESS_TOKEN",r[r.REFRESH_TOKEN=2002]="REFRESH_TOKEN",r[r.ID_TOKEN=2003]="ID_TOKEN",r[r.APP_METADATA=3001]="APP_METADATA",r[r.UNDEFINED=9999]="UNDEFINED"})(v.CacheType||(v.CacheType={}));var kp="appmetadata",kM="client_info",Ts="1",$i={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Ot;(function(r){r.CONFIG="config",r.CACHE="cache",r.NETWORK="network"})(Ot||(Ot={}));var Ne={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"};v.AuthenticationScheme=void 0;(function(r){r.POP="pop",r.BEARER="Bearer"})(v.AuthenticationScheme||(v.AuthenticationScheme={}));var Vi={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},tT={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},bs;(function(r){r.username="username",r.password="password"})(bs||(bs={}));var qn;(function(r){r[r.httpSuccess=200]="httpSuccess",r[r.httpBadRequest=400]="httpBadRequest"})(qn||(qn={}));var lr;(function(r){r.FAILED_AUTO_DETECTION="1",r.INTERNAL_CACHE="2",r.ENVIRONMENT_VARIABLE="3",r.IMDS="4"})(lr||(lr={}));var Hr;(function(r){r.CONFIGURED_MATCHES_DETECTED="1",r.CONFIGURED_NO_AUTO_DETECTION="2",r.CONFIGURED_NOT_DETECTED="3",r.AUTO_DETECTION_REQUESTED_SUCCESSFUL="4",r.AUTO_DETECTION_REQUESTED_FAILED="5"})(Hr||(Hr={}));var dt;(function(r){r.NO_CACHE_HIT="0",r.FORCE_REFRESH="1",r.NO_CACHED_ACCESS_TOKEN="2",r.CACHED_ACCESS_TOKEN_EXPIRED="3",r.REFRESH_CACHED_ACCESS_TOKEN="4"})(dt||(dt={}));var Np={unexpectedError:{code:"unexpected_error",desc:"Unexpected error in authentication."}},ee=function(r){De(e,r);function e(t,n,i){var o=this,a=n?t+": "+n:t;return o=r.call(this,a)||this,Object.setPrototypeOf(o,e.prototype),o.errorCode=t||U.EMPTY_STRING,o.errorMessage=n||"",o.subError=i||"",o.name="AuthError",o}return e.createUnexpectedError=function(t){return new e(Np.unexpectedError.code,Np.unexpectedError.desc+": "+t)},e}(Error),Mp={createNewGuid:function(){var r="Crypto interface - createNewGuid() has not been implemented";throw ee.createUnexpectedError(r)},base64Decode:function(){var r="Crypto interface - base64Decode() has not been implemented";throw ee.createUnexpectedError(r)},base64Encode:function(){var r="Crypto interface - base64Encode() has not been implemented";throw ee.createUnexpectedError(r)},generatePkceCodes:function(){return G(this,void 0,void 0,function(){var r;return $(this,function(e){throw r="Crypto interface - generatePkceCodes() has not been implemented",ee.createUnexpectedError(r)})})},getPublicKeyThumbprint:function(){return G(this,void 0,void 0,function(){var r;return $(this,function(e){throw r="Crypto interface - getPublicKeyThumbprint() has not been implemented",ee.createUnexpectedError(r)})})},signJwt:function(){return G(this,void 0,void 0,function(){var r;return $(this,function(e){throw r="Crypto interface - signJwt() has not been implemented",ee.createUnexpectedError(r)})})}},_={clientInfoDecodingError:{code:"client_info_decoding_error",desc:"The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause."},clientInfoEmptyError:{code:"client_info_empty_error",desc:"The client info was empty. Please review the trace to determine the root cause."},tokenParsingError:{code:"token_parsing_error",desc:"Token cannot be parsed. Please review stack trace to determine root cause."},nullOrEmptyToken:{code:"null_or_empty_token",desc:"The token is null or empty. Please review the trace to determine the root cause."},endpointResolutionError:{code:"endpoints_resolution_error",desc:"Error: could not resolve endpoints. Please check network and try again."},networkError:{code:"network_error",desc:"Network request failed. Please check network trace to determine root cause."},unableToGetOpenidConfigError:{code:"openid_config_error",desc:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints."},hashNotDeserialized:{code:"hash_not_deserialized",desc:"The hash parameters could not be deserialized. Please review the trace to determine the root cause."},blankGuidGenerated:{code:"blank_guid_generated",desc:"The guid generated was blank. Please review the trace to determine the root cause."},invalidStateError:{code:"invalid_state",desc:"State was not the expected format. Please check the logs to determine whether the request was sent using ProtocolUtils.setRequestState()."},stateMismatchError:{code:"state_mismatch",desc:"State mismatch error. Please check your network. Continued requests may cause cache overflow."},stateNotFoundError:{code:"state_not_found",desc:"State not found"},nonceMismatchError:{code:"nonce_mismatch",desc:"Nonce mismatch error. This may be caused by a race condition in concurrent requests."},nonceNotFoundError:{code:"nonce_not_found",desc:"nonce not found"},noTokensFoundError:{code:"no_tokens_found",desc:"No tokens were found for the given scopes, and no authorization code was passed to acquireToken. You must retrieve an authorization code before making a call to acquireToken()."},multipleMatchingTokens:{code:"multiple_matching_tokens",desc:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account."},multipleMatchingAccounts:{code:"multiple_matching_accounts",desc:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account"},multipleMatchingAppMetadata:{code:"multiple_matching_appMetadata",desc:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata"},tokenRequestCannotBeMade:{code:"request_cannot_be_made",desc:"Token request cannot be made without authorization code or refresh token."},appendEmptyScopeError:{code:"cannot_append_empty_scope",desc:"Cannot append null or empty scope to ScopeSet. Please check the stack trace for more info."},removeEmptyScopeError:{code:"cannot_remove_empty_scope",desc:"Cannot remove null or empty scope from ScopeSet. Please check the stack trace for more info."},appendScopeSetError:{code:"cannot_append_scopeset",desc:"Cannot append ScopeSet due to error."},emptyInputScopeSetError:{code:"empty_input_scopeset",desc:"Empty input ScopeSet cannot be processed."},DeviceCodePollingCancelled:{code:"device_code_polling_cancelled",desc:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true."},DeviceCodeExpired:{code:"device_code_expired",desc:"Device code is expired."},DeviceCodeUnknownError:{code:"device_code_unknown_error",desc:"Device code stopped polling for unknown reasons."},NoAccountInSilentRequest:{code:"no_account_in_silent_request",desc:"Please pass an account object, silent flow is not supported without account information"},invalidCacheRecord:{code:"invalid_cache_record",desc:"Cache record object was null or undefined."},invalidCacheEnvironment:{code:"invalid_cache_environment",desc:"Invalid environment when attempting to create cache entry"},noAccountFound:{code:"no_account_found",desc:"No account found in cache for given key."},CachePluginError:{code:"no cache plugin set on CacheManager",desc:"ICachePlugin needs to be set before using readFromStorage or writeFromStorage"},noCryptoObj:{code:"no_crypto_object",desc:"No crypto object detected. This is required for the following operation: "},invalidCacheType:{code:"invalid_cache_type",desc:"Invalid cache type"},unexpectedAccountType:{code:"unexpected_account_type",desc:"Unexpected account type."},unexpectedCredentialType:{code:"unexpected_credential_type",desc:"Unexpected credential type."},invalidAssertion:{code:"invalid_assertion",desc:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515"},invalidClientCredential:{code:"invalid_client_credential",desc:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential"},tokenRefreshRequired:{code:"token_refresh_required",desc:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired."},userTimeoutReached:{code:"user_timeout_reached",desc:"User defined timeout for device code polling reached"},tokenClaimsRequired:{code:"token_claims_cnf_required_for_signedjwt",desc:"Cannot generate a POP jwt if the token_claims are not populated"},noAuthorizationCodeFromServer:{code:"authorization_code_missing_from_server_response",desc:"Server response does not contain an authorization code to proceed"},noAzureRegionDetected:{code:"no_azure_region_detected",desc:"No azure region was detected and no fallback was made available"},accessTokenEntityNullError:{code:"access_token_entity_null",desc:"Access token entity is null, please check logs and cache to ensure a valid access token is present."}},R=function(r){De(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.name="ClientAuthError",Object.setPrototypeOf(i,e.prototype),i}return e.createClientInfoDecodingError=function(t){return new e(_.clientInfoDecodingError.code,_.clientInfoDecodingError.desc+" Failed with error: "+t)},e.createClientInfoEmptyError=function(){return new e(_.clientInfoEmptyError.code,""+_.clientInfoEmptyError.desc)},e.createTokenParsingError=function(t){return new e(_.tokenParsingError.code,_.tokenParsingError.desc+" Failed with error: "+t)},e.createTokenNullOrEmptyError=function(t){return new e(_.nullOrEmptyToken.code,_.nullOrEmptyToken.desc+" Raw Token Value: "+t)},e.createEndpointDiscoveryIncompleteError=function(t){return new e(_.endpointResolutionError.code,_.endpointResolutionError.desc+" Detail: "+t)},e.createNetworkError=function(t,n){return new e(_.networkError.code,_.networkError.desc+" | Fetch client threw: "+n+" | Attempted to reach: "+t.split("?")[0])},e.createUnableToGetOpenidConfigError=function(t){return new e(_.unableToGetOpenidConfigError.code,_.unableToGetOpenidConfigError.desc+" Attempted to retrieve endpoints from: "+t)},e.createHashNotDeserializedError=function(t){return new e(_.hashNotDeserialized.code,_.hashNotDeserialized.desc+" Given Object: "+t)},e.createInvalidStateError=function(t,n){return new e(_.invalidStateError.code,_.invalidStateError.desc+" Invalid State: "+t+", Root Err: "+n)},e.createStateMismatchError=function(){return new e(_.stateMismatchError.code,_.stateMismatchError.desc)},e.createStateNotFoundError=function(t){return new e(_.stateNotFoundError.code,_.stateNotFoundError.desc+":  "+t)},e.createNonceMismatchError=function(){return new e(_.nonceMismatchError.code,_.nonceMismatchError.desc)},e.createNonceNotFoundError=function(t){return new e(_.nonceNotFoundError.code,_.nonceNotFoundError.desc+":  "+t)},e.createNoTokensFoundError=function(){return new e(_.noTokensFoundError.code,_.noTokensFoundError.desc)},e.createMultipleMatchingTokensInCacheError=function(){return new e(_.multipleMatchingTokens.code,_.multipleMatchingTokens.desc+".")},e.createMultipleMatchingAccountsInCacheError=function(){return new e(_.multipleMatchingAccounts.code,_.multipleMatchingAccounts.desc)},e.createMultipleMatchingAppMetadataInCacheError=function(){return new e(_.multipleMatchingAppMetadata.code,_.multipleMatchingAppMetadata.desc)},e.createTokenRequestCannotBeMadeError=function(){return new e(_.tokenRequestCannotBeMade.code,_.tokenRequestCannotBeMade.desc)},e.createAppendEmptyScopeToSetError=function(t){return new e(_.appendEmptyScopeError.code,_.appendEmptyScopeError.desc+" Given Scope: "+t)},e.createRemoveEmptyScopeFromSetError=function(t){return new e(_.removeEmptyScopeError.code,_.removeEmptyScopeError.desc+" Given Scope: "+t)},e.createAppendScopeSetError=function(t){return new e(_.appendScopeSetError.code,_.appendScopeSetError.desc+" Detail Error: "+t)},e.createEmptyInputScopeSetError=function(){return new e(_.emptyInputScopeSetError.code,""+_.emptyInputScopeSetError.desc)},e.createDeviceCodeCancelledError=function(){return new e(_.DeviceCodePollingCancelled.code,""+_.DeviceCodePollingCancelled.desc)},e.createDeviceCodeExpiredError=function(){return new e(_.DeviceCodeExpired.code,""+_.DeviceCodeExpired.desc)},e.createDeviceCodeUnknownError=function(){return new e(_.DeviceCodeUnknownError.code,""+_.DeviceCodeUnknownError.desc)},e.createNoAccountInSilentRequestError=function(){return new e(_.NoAccountInSilentRequest.code,""+_.NoAccountInSilentRequest.desc)},e.createNullOrUndefinedCacheRecord=function(){return new e(_.invalidCacheRecord.code,_.invalidCacheRecord.desc)},e.createInvalidCacheEnvironmentError=function(){return new e(_.invalidCacheEnvironment.code,_.invalidCacheEnvironment.desc)},e.createNoAccountFoundError=function(){return new e(_.noAccountFound.code,_.noAccountFound.desc)},e.createCachePluginError=function(){return new e(_.CachePluginError.code,""+_.CachePluginError.desc)},e.createNoCryptoObjectError=function(t){return new e(_.noCryptoObj.code,""+_.noCryptoObj.desc+t)},e.createInvalidCacheTypeError=function(){return new e(_.invalidCacheType.code,""+_.invalidCacheType.desc)},e.createUnexpectedAccountTypeError=function(){return new e(_.unexpectedAccountType.code,""+_.unexpectedAccountType.desc)},e.createUnexpectedCredentialTypeError=function(){return new e(_.unexpectedCredentialType.code,""+_.unexpectedCredentialType.desc)},e.createInvalidAssertionError=function(){return new e(_.invalidAssertion.code,""+_.invalidAssertion.desc)},e.createInvalidCredentialError=function(){return new e(_.invalidClientCredential.code,""+_.invalidClientCredential.desc)},e.createRefreshRequiredError=function(){return new e(_.tokenRefreshRequired.code,_.tokenRefreshRequired.desc)},e.createUserTimeoutReachedError=function(){return new e(_.userTimeoutReached.code,_.userTimeoutReached.desc)},e.createTokenClaimsRequiredError=function(){return new e(_.tokenClaimsRequired.code,_.tokenClaimsRequired.desc)},e.createNoAuthCodeInServerResponseError=function(){return new e(_.noAuthorizationCodeFromServer.code,_.noAuthorizationCodeFromServer.desc)},e}(ee),L=function(){function r(){}return r.decodeAuthToken=function(e){if(r.isEmpty(e))throw R.createTokenNullOrEmptyError(e);var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/,n=t.exec(e);if(!n||n.length<4)throw R.createTokenParsingError("Given token is malformed: "+JSON.stringify(e));var i={header:n[1],JWSPayload:n[2],JWSSig:n[3]};return i},r.isEmpty=function(e){return typeof e>"u"||!e||e.length===0},r.isEmptyObj=function(e){if(e&&!r.isEmpty(e))try{var t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0},r.startsWith=function(e,t){return e.indexOf(t)===0},r.endsWith=function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},r.queryStringToObject=function(e){var t,n=/\+/g,i=/([^&=]+)=([^&]*)/g,o=function(s){return decodeURIComponent(s.replace(n," "))},a={};for(t=i.exec(e);t;)a[o(t[1])]=o(t[2]),t=i.exec(e);return a},r.trimArrayEntries=function(e){return e.map(function(t){return t.trim()})},r.removeEmptyStringsFromArray=function(e){return e.filter(function(t){return!r.isEmpty(t)})},r.jsonParseHelper=function(e){try{return JSON.parse(e)}catch{return null}},r.matchPattern=function(e,t){var n=new RegExp(e.replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?"));return n.test(t)},r}();v.LogLevel=void 0;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Info=2]="Info",r[r.Verbose=3]="Verbose",r[r.Trace=4]="Trace"})(v.LogLevel||(v.LogLevel={}));var nT=function(){function r(e,t,n){this.level=v.LogLevel.Info;var i=function(){};this.localCallback=e.loggerCallback||i,this.piiLoggingEnabled=e.piiLoggingEnabled||!1,this.level=e.logLevel||v.LogLevel.Info,this.correlationId=e.correlationId||"",this.packageName=t||U.EMPTY_STRING,this.packageVersion=n||U.EMPTY_STRING}return r.prototype.clone=function(e,t,n){return new r({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)},r.prototype.logMessage=function(e,t){if(!(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)){var n=new Date().toUTCString(),i;L.isEmpty(t.correlationId)?L.isEmpty(this.correlationId)?i="["+n+"]":i="["+n+"] : ["+this.correlationId+"]":i="["+n+"] : ["+t.correlationId+"]";var o=i+" : "+this.packageName+"@"+this.packageVersion+" : "+v.LogLevel[t.logLevel]+" - "+e;this.executeCallback(t.logLevel,o,t.containsPii||!1)}},r.prototype.executeCallback=function(e,t,n){this.localCallback&&this.localCallback(e,t,n)},r.prototype.error=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Error,containsPii:!1,correlationId:t||""})},r.prototype.errorPii=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Error,containsPii:!0,correlationId:t||""})},r.prototype.warning=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Warning,containsPii:!1,correlationId:t||""})},r.prototype.warningPii=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Warning,containsPii:!0,correlationId:t||""})},r.prototype.info=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Info,containsPii:!1,correlationId:t||""})},r.prototype.infoPii=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Info,containsPii:!0,correlationId:t||""})},r.prototype.verbose=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Verbose,containsPii:!1,correlationId:t||""})},r.prototype.verbosePii=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Verbose,containsPii:!0,correlationId:t||""})},r.prototype.trace=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Trace,containsPii:!1,correlationId:t||""})},r.prototype.tracePii=function(e,t){this.logMessage(e,{logLevel:v.LogLevel.Trace,containsPii:!0,correlationId:t||""})},r.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled||!1},r}(),NM="@azure/msal-common",iT="4.5.1",Fn=function(){function r(){}return r.prototype.generateAccountId=function(){return r.generateAccountIdForCacheKey(this.homeAccountId,this.environment)},r.prototype.generateCredentialId=function(){return r.generateCredentialIdForCacheKey(this.credentialType,this.clientId,this.realm,this.familyId)},r.prototype.generateTarget=function(){return r.generateTargetForCacheKey(this.target)},r.prototype.generateCredentialKey=function(){return r.generateCredentialCacheKey(this.homeAccountId,this.environment,this.credentialType,this.clientId,this.realm,this.target,this.familyId)},r.prototype.generateType=function(){switch(this.credentialType){case v.CredentialType.ID_TOKEN:return v.CacheType.ID_TOKEN;case v.CredentialType.ACCESS_TOKEN:return v.CacheType.ACCESS_TOKEN;case v.CredentialType.REFRESH_TOKEN:return v.CacheType.REFRESH_TOKEN;default:throw R.createUnexpectedCredentialTypeError()}},r.getCredentialType=function(e){return e.indexOf(v.CredentialType.ACCESS_TOKEN.toLowerCase())!==-1?e.indexOf(v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())!==-1?v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:v.CredentialType.ACCESS_TOKEN:e.indexOf(v.CredentialType.ID_TOKEN.toLowerCase())!==-1?v.CredentialType.ID_TOKEN:e.indexOf(v.CredentialType.REFRESH_TOKEN.toLowerCase())!==-1?v.CredentialType.REFRESH_TOKEN:U.NOT_DEFINED},r.generateCredentialCacheKey=function(e,t,n,i,o,a,s){var c=[this.generateAccountIdForCacheKey(e,t),this.generateCredentialIdForCacheKey(n,i,o,s),this.generateTargetForCacheKey(a)];return c.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateAccountIdForCacheKey=function(e,t){var n=[e,t];return n.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateCredentialIdForCacheKey=function(e,t,n,i){var o=e===v.CredentialType.REFRESH_TOKEN&&i||t,a=[e,o,n||""];return a.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.generateTargetForCacheKey=function(e){return(e||"").toLowerCase()},r}(),Z={redirectUriNotSet:{code:"redirect_uri_empty",desc:"A redirect URI is required for all calls, and none has been set."},postLogoutUriNotSet:{code:"post_logout_uri_empty",desc:"A post logout redirect has not been set."},claimsRequestParsingError:{code:"claims_request_parsing_error",desc:"Could not parse the given claims request object."},authorityUriInsecure:{code:"authority_uri_insecure",desc:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options"},urlParseError:{code:"url_parse_error",desc:"URL could not be parsed into appropriate segments."},urlEmptyError:{code:"empty_url_error",desc:"URL was empty or null."},emptyScopesError:{code:"empty_input_scopes_error",desc:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token."},nonArrayScopesError:{code:"nonarray_input_scopes_error",desc:"Scopes cannot be passed as non-array."},clientIdSingleScopeError:{code:"clientid_input_scopes_error",desc:"Client ID can only be provided as a single scope."},invalidPrompt:{code:"invalid_prompt_value",desc:"Supported prompt values are 'login', 'select_account', 'consent', 'create' and 'none'.  Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest"},invalidClaimsRequest:{code:"invalid_claims",desc:"Given claims parameter must be a stringified JSON object."},tokenRequestEmptyError:{code:"token_request_empty",desc:"Token request was empty and not found in cache."},logoutRequestEmptyError:{code:"logout_request_empty",desc:"The logout request was null or undefined."},invalidCodeChallengeMethod:{code:"invalid_code_challenge_method",desc:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".'},invalidCodeChallengeParams:{code:"pkce_params_missing",desc:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request"},invalidCloudDiscoveryMetadata:{code:"invalid_cloud_discovery_metadata",desc:"Invalid cloudDiscoveryMetadata provided. Must be a JSON object containing tenant_discovery_endpoint and metadata fields"},invalidAuthorityMetadata:{code:"invalid_authority_metadata",desc:"Invalid authorityMetadata provided. Must by a JSON object containing authorization_endpoint, token_endpoint, end_session_endpoint, issuer fields."},untrustedAuthority:{code:"untrusted_authority",desc:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter."}},ye=function(r){De(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.name="ClientConfigurationError",Object.setPrototypeOf(i,e.prototype),i}return e.createRedirectUriEmptyError=function(){return new e(Z.redirectUriNotSet.code,Z.redirectUriNotSet.desc)},e.createPostLogoutRedirectUriEmptyError=function(){return new e(Z.postLogoutUriNotSet.code,Z.postLogoutUriNotSet.desc)},e.createClaimsRequestParsingError=function(t){return new e(Z.claimsRequestParsingError.code,Z.claimsRequestParsingError.desc+" Given value: "+t)},e.createInsecureAuthorityUriError=function(t){return new e(Z.authorityUriInsecure.code,Z.authorityUriInsecure.desc+" Given URI: "+t)},e.createUrlParseError=function(t){return new e(Z.urlParseError.code,Z.urlParseError.desc+" Given Error: "+t)},e.createUrlEmptyError=function(){return new e(Z.urlEmptyError.code,Z.urlEmptyError.desc)},e.createEmptyScopesArrayError=function(){return new e(Z.emptyScopesError.code,""+Z.emptyScopesError.desc)},e.createClientIdSingleScopeError=function(t){return new e(Z.clientIdSingleScopeError.code,Z.clientIdSingleScopeError.desc+" Given Scopes: "+t)},e.createInvalidPromptError=function(t){return new e(Z.invalidPrompt.code,Z.invalidPrompt.desc+" Given value: "+t)},e.createInvalidClaimsRequestError=function(){return new e(Z.invalidClaimsRequest.code,Z.invalidClaimsRequest.desc)},e.createEmptyLogoutRequestError=function(){return new e(Z.logoutRequestEmptyError.code,Z.logoutRequestEmptyError.desc)},e.createEmptyTokenRequestError=function(){return new e(Z.tokenRequestEmptyError.code,Z.tokenRequestEmptyError.desc)},e.createInvalidCodeChallengeMethodError=function(){return new e(Z.invalidCodeChallengeMethod.code,Z.invalidCodeChallengeMethod.desc)},e.createInvalidCodeChallengeParamsError=function(){return new e(Z.invalidCodeChallengeParams.code,Z.invalidCodeChallengeParams.desc)},e.createInvalidCloudDiscoveryMetadataError=function(){return new e(Z.invalidCloudDiscoveryMetadata.code,Z.invalidCloudDiscoveryMetadata.desc)},e.createInvalidAuthorityMetadataError=function(){return new e(Z.invalidAuthorityMetadata.code,Z.invalidAuthorityMetadata.desc)},e.createUntrustedAuthorityError=function(){return new e(Z.untrustedAuthority.code,Z.untrustedAuthority.desc)},e}(R),ft=function(){function r(e){var t=this,n=e?L.trimArrayEntries(xs(e)):[],i=n?L.removeEmptyStringsFromArray(n):[];this.validateInputScopes(i),this.scopes=new Set,i.forEach(function(o){return t.scopes.add(o)})}return r.fromString=function(e){var t=e||"",n=t.split(" ");return new r(n)},r.prototype.validateInputScopes=function(e){if(!e||e.length<1)throw ye.createEmptyScopesArrayError()},r.prototype.containsScope=function(e){var t=this.printScopesLowerCase().split(" "),n=new r(t);return L.isEmpty(e)?!1:n.scopes.has(e.toLowerCase())},r.prototype.containsScopeSet=function(e){var t=this;return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(function(n){return t.containsScope(n)})},r.prototype.containsOnlyOIDCScopes=function(){var e=this,t=0;return ZC.forEach(function(n){e.containsScope(n)&&(t+=1)}),this.scopes.size===t},r.prototype.appendScope=function(e){L.isEmpty(e)||this.scopes.add(e.trim())},r.prototype.appendScopes=function(e){var t=this;try{e.forEach(function(n){return t.appendScope(n)})}catch(n){throw R.createAppendScopeSetError(n)}},r.prototype.removeScope=function(e){if(L.isEmpty(e))throw R.createRemoveEmptyScopeFromSetError(e);this.scopes.delete(e.trim())},r.prototype.removeOIDCScopes=function(){var e=this;ZC.forEach(function(t){e.scopes.delete(t)})},r.prototype.unionScopeSets=function(e){if(!e)throw R.createEmptyInputScopeSetError();var t=new Set;return e.scopes.forEach(function(n){return t.add(n.toLowerCase())}),this.scopes.forEach(function(n){return t.add(n.toLowerCase())}),t},r.prototype.intersectingScopeSets=function(e){if(!e)throw R.createEmptyInputScopeSetError();e.containsOnlyOIDCScopes()||e.removeOIDCScopes();var t=this.unionScopeSets(e),n=e.getScopeCount(),i=this.getScopeCount(),o=t.size;return o<i+n},r.prototype.getScopeCount=function(){return this.scopes.size},r.prototype.asArray=function(){var e=[];return this.scopes.forEach(function(t){return e.push(t)}),e},r.prototype.printScopes=function(){if(this.scopes){var e=this.asArray();return e.join(" ")}return""},r.prototype.printScopesLowerCase=function(){return this.printScopes().toLowerCase()},r}();function ws(r,e){if(L.isEmpty(r))throw R.createClientInfoEmptyError();try{var t=e.base64Decode(r);return JSON.parse(t)}catch(n){throw R.createClientInfoDecodingError(n)}}function Ki(r){if(L.isEmpty(r))throw R.createClientInfoDecodingError("Home account ID was empty.");var e=r.split(Je.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?U.EMPTY_STRING:e[1]}}v.AuthorityType=void 0;(function(r){r[r.Default=0]="Default",r[r.Adfs=1]="Adfs"})(v.AuthorityType||(v.AuthorityType={}));var pr=function(){function r(){}return r.prototype.generateAccountId=function(){var e=[this.homeAccountId,this.environment];return e.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.prototype.generateAccountKey=function(){return r.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})},r.prototype.generateType=function(){switch(this.authorityType){case v.CacheAccountType.ADFS_ACCOUNT_TYPE:return v.CacheType.ADFS;case v.CacheAccountType.MSAV1_ACCOUNT_TYPE:return v.CacheType.MSA;case v.CacheAccountType.MSSTS_ACCOUNT_TYPE:return v.CacheType.MSSTS;case v.CacheAccountType.GENERIC_ACCOUNT_TYPE:return v.CacheType.GENERIC;default:throw R.createUnexpectedAccountTypeError()}},r.prototype.getAccountInfo=function(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,idTokenClaims:this.idTokenClaims}},r.generateAccountCacheKey=function(e){var t=[e.homeAccountId,e.environment||"",e.tenantId||""];return t.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.createAccount=function(e,t,n,i,o,a,s){var c,u,l,p,d,f,m=new r;m.authorityType=v.CacheAccountType.MSSTS_ACCOUNT_TYPE,m.clientInfo=e,m.homeAccountId=t;var y=n.getPreferredCache();if(L.isEmpty(y))throw R.createInvalidCacheEnvironmentError();return m.environment=y,m.realm=((c=i?.claims)===null||c===void 0?void 0:c.tid)||"",m.oboAssertion=o,i&&(m.idTokenClaims=i.claims,m.localAccountId=((u=i?.claims)===null||u===void 0?void 0:u.oid)||((l=i?.claims)===null||l===void 0?void 0:l.sub)||"",m.username=((p=i?.claims)===null||p===void 0?void 0:p.preferred_username)||(!((d=i?.claims)===null||d===void 0)&&d.emails?i.claims.emails[0]:""),m.name=(f=i?.claims)===null||f===void 0?void 0:f.name),m.cloudGraphHostName=a,m.msGraphHost=s,m},r.createGenericAccount=function(e,t,n,i,o,a){var s,c,u,l,p=new r;p.authorityType=e.authorityType===v.AuthorityType.Adfs?v.CacheAccountType.ADFS_ACCOUNT_TYPE:v.CacheAccountType.GENERIC_ACCOUNT_TYPE,p.homeAccountId=t,p.realm="",p.oboAssertion=i;var d=e.getPreferredCache();if(L.isEmpty(d))throw R.createInvalidCacheEnvironmentError();return n&&(p.localAccountId=((s=n?.claims)===null||s===void 0?void 0:s.oid)||((c=n?.claims)===null||c===void 0?void 0:c.sub)||"",p.username=((u=n?.claims)===null||u===void 0?void 0:u.upn)||"",p.name=((l=n?.claims)===null||l===void 0?void 0:l.name)||"",p.idTokenClaims=n?.claims),p.environment=d,p.cloudGraphHostName=o,p.msGraphHost=a,p},r.generateHomeAccountId=function(e,t,n,i,o){var a,s=!((a=o?.claims)===null||a===void 0)&&a.sub?o.claims.sub:U.EMPTY_STRING;if(t===v.AuthorityType.Adfs)return s;if(e)try{var c=ws(e,i);if(!L.isEmpty(c.uid)&&!L.isEmpty(c.utid))return""+c.uid+Je.CLIENT_INFO_SEPARATOR+c.utid}catch{}return n.verbose("No client info in response"),s},r.isAccountEntity=function(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1},r.accountInfoIsEqual=function(e,t,n){if(!e||!t)return!1;var i=!0;if(n){var o=e.idTokenClaims||{},a=t.idTokenClaims||{};i=o.iat===a.iat&&o.nonce===a.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&i},r}(),Gt=function(){function r(e,t){if(L.isEmpty(e))throw R.createTokenNullOrEmptyError(e);this.rawToken=e,this.claims=r.extractTokenClaims(e,t)}return r.extractTokenClaims=function(e,t){var n=L.decodeAuthToken(e);try{var i=n.JWSPayload,o=t.base64Decode(i);return JSON.parse(o)}catch(a){throw R.createTokenParsingError(a)}},r}(),oT=function(){function r(e,t){this.clientId=e,this.cryptoImpl=t}return r.prototype.getAllAccounts=function(){var e=this,t=this.getAccountsFilteredBy(),n=Object.keys(t).map(function(a){return t[a]}),i=n.length;if(i<1)return[];var o=n.map(function(a){var s=r.toObject(new pr,a),c=s.getAccountInfo(),u=e.readIdTokenFromCache(e.clientId,c);return u&&!c.idTokenClaims&&(c.idTokenClaims=new Gt(u.secret,e.cryptoImpl).claims),c});return o},r.prototype.saveCacheRecord=function(e){if(!e)throw R.createNullOrUndefinedCacheRecord();e.account&&this.setAccount(e.account),e.idToken&&this.setIdTokenCredential(e.idToken),e.accessToken&&this.saveAccessToken(e.accessToken),e.refreshToken&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)},r.prototype.saveAccessToken=function(e){var t=this,n=this.getCredentialsFilteredBy({clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm}),i=ft.fromString(e.target),o=Object.keys(n.accessTokens).map(function(a){return n.accessTokens[a]});o&&o.forEach(function(a){var s=ft.fromString(a.target);s.intersectingScopeSets(i)&&t.removeCredential(a)}),this.setAccessTokenCredential(e)},r.prototype.getAccountsFilteredBy=function(e){return this.getAccountsFilteredByInternal(e?e.homeAccountId:"",e?e.environment:"",e?e.realm:"")},r.prototype.getAccountsFilteredByInternal=function(e,t,n){var i=this,o=this.getKeys(),a={};return o.forEach(function(s){var c=i.getAccount(s);!c||!!e&&!i.matchHomeAccountId(c,e)||!!t&&!i.matchEnvironment(c,t)||!!n&&!i.matchRealm(c,n)||(a[s]=c)}),a},r.prototype.getCredentialsFilteredBy=function(e){return this.getCredentialsFilteredByInternal(e.homeAccountId,e.environment,e.credentialType,e.clientId,e.familyId,e.realm,e.target,e.oboAssertion)},r.prototype.getCredentialsFilteredByInternal=function(e,t,n,i,o,a,s,c){var u=this,l=this.getKeys(),p={idTokens:{},accessTokens:{},refreshTokens:{}};return l.forEach(function(d){var f=Fn.getCredentialType(d);if(f!==U.NOT_DEFINED){var m=u.getSpecificCredential(d,f);if(!!m&&!(!!c&&!u.matchOboAssertion(m,c))&&!(!!e&&!u.matchHomeAccountId(m,e))&&!(!!t&&!u.matchEnvironment(m,t))&&!(!!a&&!u.matchRealm(m,a))&&!(!!n&&!u.matchCredentialType(m,n))&&!(!!i&&!u.matchClientId(m,i))&&!(!!o&&!u.matchFamilyId(m,o))&&!(!!s&&!u.matchTarget(m,s)))switch(f){case v.CredentialType.ID_TOKEN:p.idTokens[d]=m;break;case v.CredentialType.ACCESS_TOKEN:case v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:p.accessTokens[d]=m;break;case v.CredentialType.REFRESH_TOKEN:p.refreshTokens[d]=m;break}}}),p},r.prototype.getAppMetadataFilteredBy=function(e){return this.getAppMetadataFilteredByInternal(e.environment,e.clientId)},r.prototype.getAppMetadataFilteredByInternal=function(e,t){var n=this,i=this.getKeys(),o={};return i.forEach(function(a){if(!!n.isAppMetadata(a)){var s=n.getAppMetadata(a);!s||!!e&&!n.matchEnvironment(s,e)||!!t&&!n.matchClientId(s,t)||(o[a]=s)}}),o},r.prototype.getAuthorityMetadataByAlias=function(e){var t=this,n=this.getAuthorityMetadataKeys(),i=null;return n.forEach(function(o){if(!(!t.isAuthorityMetadata(o)||o.indexOf(t.clientId)===-1)){var a=t.getAuthorityMetadata(o);!a||a.aliases.indexOf(e)!==-1&&(i=a)}}),i},r.prototype.removeAllAccounts=function(){var e=this,t=this.getKeys();return t.forEach(function(n){var i=e.getAccount(n);!i||e.removeAccount(n)}),!0},r.prototype.removeAccount=function(e){var t=this.getAccount(e);if(!t)throw R.createNoAccountFoundError();return this.removeAccountContext(t)&&this.removeItem(e,v.CacheSchemaType.ACCOUNT)},r.prototype.removeAccountContext=function(e){var t=this,n=this.getKeys(),i=e.generateAccountId();return n.forEach(function(o){var a=Fn.getCredentialType(o);if(a!==U.NOT_DEFINED){var s=t.getSpecificCredential(o,a);!!s&&i===s.generateAccountId()&&t.removeCredential(s)}}),!0},r.prototype.removeCredential=function(e){var t=e.generateCredentialKey();return this.removeItem(t,v.CacheSchemaType.CREDENTIAL)},r.prototype.removeAppMetadata=function(){var e=this,t=this.getKeys();return t.forEach(function(n){e.isAppMetadata(n)&&e.removeItem(n,v.CacheSchemaType.APP_METADATA)}),!0},r.prototype.readCacheRecord=function(e,t,n,i,o){var a=this.readAccountFromCache(e),s=this.readIdTokenFromCache(t,e),c=this.readAccessTokenFromCache(t,e,n,o),u=this.readRefreshTokenFromCache(t,e,!1),l=this.readAppMetadataFromCache(i,t);return a&&s&&(a.idTokenClaims=new Gt(s.secret,this.cryptoImpl).claims),{account:a,idToken:s,accessToken:c,refreshToken:u,appMetadata:l}},r.prototype.readAccountFromCache=function(e){var t=pr.generateAccountCacheKey(e);return this.getAccount(t)},r.prototype.readIdTokenFromCache=function(e,t){var n={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:v.CredentialType.ID_TOKEN,clientId:e,realm:t.tenantId},i=this.getCredentialsFilteredBy(n),o=Object.keys(i.idTokens).map(function(s){return i.idTokens[s]}),a=o.length;if(a<1)return null;if(a>1)throw R.createMultipleMatchingTokensInCacheError();return o[0]},r.prototype.readAccessTokenFromCache=function(e,t,n,i){var o=i===v.AuthenticationScheme.POP?v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:v.CredentialType.ACCESS_TOKEN,a={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:o,clientId:e,realm:t.tenantId,target:n.printScopesLowerCase()},s=this.getCredentialsFilteredBy(a),c=Object.keys(s.accessTokens).map(function(l){return s.accessTokens[l]}),u=c.length;if(u<1)return null;if(u>1)throw R.createMultipleMatchingTokensInCacheError();return c[0]},r.prototype.readRefreshTokenFromCache=function(e,t,n){var i=n?Ts:void 0,o={homeAccountId:t.homeAccountId,environment:t.environment,credentialType:v.CredentialType.REFRESH_TOKEN,clientId:e,familyId:i},a=this.getCredentialsFilteredBy(o),s=Object.keys(a.refreshTokens).map(function(u){return a.refreshTokens[u]}),c=s.length;return c<1?null:s[0]},r.prototype.readAppMetadataFromCache=function(e,t){var n={environment:e,clientId:t},i=this.getAppMetadataFilteredBy(n),o=Object.keys(i).map(function(s){return i[s]}),a=o.length;if(a<1)return null;if(a>1)throw R.createMultipleMatchingAppMetadataInCacheError();return o[0]},r.prototype.isAppMetadataFOCI=function(e,t){var n=this.readAppMetadataFromCache(e,t);return!!(n&&n.familyId===Ts)},r.prototype.matchHomeAccountId=function(e,t){return!!(e.homeAccountId&&t===e.homeAccountId)},r.prototype.matchOboAssertion=function(e,t){return!!(e.oboAssertion&&t===e.oboAssertion)},r.prototype.matchEnvironment=function(e,t){var n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)},r.prototype.matchCredentialType=function(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()},r.prototype.matchClientId=function(e,t){return!!(e.clientId&&t===e.clientId)},r.prototype.matchFamilyId=function(e,t){return!!(e.familyId&&t===e.familyId)},r.prototype.matchRealm=function(e,t){return!!(e.realm&&t===e.realm)},r.prototype.matchTarget=function(e,t){var n=e.credentialType!==v.CredentialType.ACCESS_TOKEN&&e.credentialType!==v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;if(n||!e.target)return!1;var i=ft.fromString(e.target),o=ft.fromString(t);return o.containsOnlyOIDCScopes()?o.removeScope(U.OFFLINE_ACCESS_SCOPE):o.removeOIDCScopes(),i.containsScopeSet(o)},r.prototype.isAppMetadata=function(e){return e.indexOf(kp)!==-1},r.prototype.isAuthorityMetadata=function(e){return e.indexOf($i.CACHE_KEY)!==-1},r.prototype.generateAuthorityMetadataCacheKey=function(e){return $i.CACHE_KEY+"-"+this.clientId+"-"+e},r.prototype.getSpecificCredential=function(e,t){switch(t){case v.CredentialType.ID_TOKEN:return this.getIdTokenCredential(e);case v.CredentialType.ACCESS_TOKEN:case v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME:return this.getAccessTokenCredential(e);case v.CredentialType.REFRESH_TOKEN:return this.getRefreshTokenCredential(e);default:return null}},r.toObject=function(e,t){for(var n in t)e[n]=t[n];return e},r}(),aT=function(r){De(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.setAccount=function(){var t="Storage interface - setAccount() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getAccount=function(){var t="Storage interface - getAccount() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setIdTokenCredential=function(){var t="Storage interface - setIdTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getIdTokenCredential=function(){var t="Storage interface - getIdTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setAccessTokenCredential=function(){var t="Storage interface - setAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getAccessTokenCredential=function(){var t="Storage interface - getAccessTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setRefreshTokenCredential=function(){var t="Storage interface - setRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getRefreshTokenCredential=function(){var t="Storage interface - getRefreshTokenCredential() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setAppMetadata=function(){var t="Storage interface - setAppMetadata() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getAppMetadata=function(){var t="Storage interface - getAppMetadata() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setServerTelemetry=function(){var t="Storage interface - setServerTelemetry() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getServerTelemetry=function(){var t="Storage interface - getServerTelemetry() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setAuthorityMetadata=function(){var t="Storage interface - setAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getAuthorityMetadata=function(){var t="Storage interface - getAuthorityMetadata() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getAuthorityMetadataKeys=function(){var t="Storage interface - getAuthorityMetadataKeys() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.setThrottlingCache=function(){var t="Storage interface - setThrottlingCache() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getThrottlingCache=function(){var t="Storage interface - getThrottlingCache() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.removeItem=function(){var t="Storage interface - removeItem() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.containsKey=function(){var t="Storage interface - containsKey() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.getKeys=function(){var t="Storage interface - getKeys() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e.prototype.clear=function(){var t="Storage interface - clear() has not been implemented for the cacheStorage interface.";throw ee.createUnexpectedError(t)},e}(oT),MM=300,sT={tokenRenewalOffsetSeconds:MM,preventCorsPreflight:!1},DM={loggerCallback:function(){},piiLoggingEnabled:!1,logLevel:v.LogLevel.Info,correlationId:""},UM={sendGetRequestAsync:function(){return G(this,void 0,void 0,function(){var r;return $(this,function(e){throw r="Network interface - sendGetRequestAsync() has not been implemented",ee.createUnexpectedError(r)})})},sendPostRequestAsync:function(){return G(this,void 0,void 0,function(){var r;return $(this,function(e){throw r="Network interface - sendPostRequestAsync() has not been implemented",ee.createUnexpectedError(r)})})}},LM={sku:U.SKU,version:iT,cpu:"",os:""},BM={clientSecret:"",clientAssertion:void 0};function qM(r){var e=r.authOptions,t=r.systemOptions,n=r.loggerOptions,i=r.storageInterface,o=r.networkInterface,a=r.cryptoInterface,s=r.clientCredentials,c=r.libraryInfo,u=r.serverTelemetryManager,l=r.persistencePlugin,p=r.serializableCache;return{authOptions:jM(e),systemOptions:qe(qe({},sT),t),loggerOptions:qe(qe({},DM),n),storageInterface:i||new aT(e.clientId,Mp),networkInterface:o||UM,cryptoInterface:a||Mp,clientCredentials:s||BM,libraryInfo:qe(qe({},LM),c),serverTelemetryManager:u||null,persistencePlugin:l||null,serializableCache:p||null}}function jM(r){return qe({clientCapabilities:[]},r)}var zn=function(r){De(e,r);function e(t,n,i){var o=r.call(this,t,n,i)||this;return o.name="ServerError",Object.setPrototypeOf(o,e.prototype),o}return e}(ee),Dp=function(){function r(){}return r.generateThrottlingStorageKey=function(e){return Vi.THROTTLING_PREFIX+"."+JSON.stringify(e)},r.preProcess=function(e,t){var n,i=r.generateThrottlingStorageKey(t),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i,v.CacheSchemaType.THROTTLING);return}throw new zn(((n=o.errorCodes)===null||n===void 0?void 0:n.join(" "))||U.EMPTY_STRING,o.errorMessage,o.subError)}},r.postProcess=function(e,t,n){if(r.checkResponseStatus(n)||r.checkResponseForRetryAfter(n)){var i={throttleTime:r.calculateThrottleTime(parseInt(n.headers[Ht.RETRY_AFTER])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(r.generateThrottlingStorageKey(t),i)}},r.checkResponseStatus=function(e){return e.status===429||e.status>=500&&e.status<600},r.checkResponseForRetryAfter=function(e){return e.headers?e.headers.hasOwnProperty(Ht.RETRY_AFTER)&&(e.status<200||e.status>=300):!1},r.calculateThrottleTime=function(e){var t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(Math.min(n+(t||Vi.DEFAULT_THROTTLE_TIME_SECONDS),n+Vi.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)},r.removeThrottle=function(e,t,n,i,o){var a={clientId:t,authority:n,scopes:i,homeAccountIdentifier:o},s=this.generateThrottlingStorageKey(a);return e.removeItem(s,v.CacheSchemaType.THROTTLING)},r}(),cT=function(){function r(e,t){this.networkClient=e,this.cacheManager=t}return r.prototype.sendPostRequest=function(e,t,n){return G(this,void 0,void 0,function(){var i,o;return $(this,function(a){switch(a.label){case 0:Dp.preProcess(this.cacheManager,e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.networkClient.sendPostRequestAsync(t,n)];case 2:return i=a.sent(),[3,4];case 3:throw o=a.sent(),o instanceof ee?o:R.createNetworkError(t,o);case 4:return Dp.postProcess(this.cacheManager,e,i),[2,i]}})})},r}();v.CcsCredentialType=void 0;(function(r){r.HOME_ACCOUNT_ID="home_account_id",r.UPN="UPN"})(v.CcsCredentialType||(v.CcsCredentialType={}));var $r=function(){function r(e){this.config=qM(e),this.logger=new nT(this.config.loggerOptions,NM,iT),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new cT(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority}return r.prototype.createTokenRequestHeaders=function(e){var t={};if(t[Ht.CONTENT_TYPE]=U.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case v.CcsCredentialType.HOME_ACCOUNT_ID:try{var n=Ki(e.credential);t[Ht.CCS_HEADER]="Oid:"+n.uid+"@"+n.utid}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case v.CcsCredentialType.UPN:t[Ht.CCS_HEADER]="UPN: "+e.credential;break}return t},r.prototype.executePostToTokenEndpoint=function(e,t,n,i){return G(this,void 0,void 0,function(){var o;return $(this,function(a){switch(a.label){case 0:return[4,this.networkManager.sendPostRequest(i,e,{body:t,headers:n})];case 1:return o=a.sent(),this.config.serverTelemetryManager&&o.status<500&&o.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),[2,o]}})})},r.prototype.updateAuthority=function(e){if(!e.discoveryComplete())throw R.createEndpointDiscoveryIncompleteError("Updated authority has not completed endpoint discovery.");this.authority=e},r}(),Ln=function(){function r(){}return r.validateRedirectUri=function(e){if(L.isEmpty(e))throw ye.createRedirectUriEmptyError()},r.validatePrompt=function(e){var t=[];for(var n in jn)t.push(jn[n]);if(t.indexOf(e)<0)throw ye.createInvalidPromptError(e)},r.validateClaims=function(e){try{JSON.parse(e)}catch{throw ye.createInvalidClaimsRequestError()}},r.validateCodeChallengeParams=function(e,t){if(L.isEmpty(e)||L.isEmpty(t))throw ye.createInvalidCodeChallengeParamsError();this.validateCodeChallengeMethod(t)},r.validateCodeChallengeMethod=function(e){if([eT.PLAIN,eT.S256].indexOf(e)<0)throw ye.createInvalidCodeChallengeMethodError()},r.sanitizeEQParams=function(e,t){return e?(t.forEach(function(n,i){e[i]&&delete e[i]}),e):{}},r}(),ht=function(){function r(){this.parameters=new Map}return r.prototype.addResponseTypeCode=function(){this.parameters.set(W.RESPONSE_TYPE,encodeURIComponent(U.CODE_RESPONSE_TYPE))},r.prototype.addResponseMode=function(e){this.parameters.set(W.RESPONSE_MODE,encodeURIComponent(e||v.ResponseMode.QUERY))},r.prototype.addScopes=function(e,t){t===void 0&&(t=!0);var n=t?xs(e||[],Bp):e||[],i=new ft(n);this.parameters.set(W.SCOPE,encodeURIComponent(i.printScopes()))},r.prototype.addClientId=function(e){this.parameters.set(W.CLIENT_ID,encodeURIComponent(e))},r.prototype.addRedirectUri=function(e){Ln.validateRedirectUri(e),this.parameters.set(W.REDIRECT_URI,encodeURIComponent(e))},r.prototype.addPostLogoutRedirectUri=function(e){Ln.validateRedirectUri(e),this.parameters.set(W.POST_LOGOUT_URI,encodeURIComponent(e))},r.prototype.addIdTokenHint=function(e){this.parameters.set(W.ID_TOKEN_HINT,encodeURIComponent(e))},r.prototype.addDomainHint=function(e){this.parameters.set(Gr.DOMAIN_HINT,encodeURIComponent(e))},r.prototype.addLoginHint=function(e){this.parameters.set(Gr.LOGIN_HINT,encodeURIComponent(e))},r.prototype.addCcsUpn=function(e){this.parameters.set(Ht.CCS_HEADER,encodeURIComponent("UPN:"+e))},r.prototype.addCcsOid=function(e){this.parameters.set(Ht.CCS_HEADER,encodeURIComponent("Oid:"+e.uid+"@"+e.utid))},r.prototype.addSid=function(e){this.parameters.set(Gr.SID,encodeURIComponent(e))},r.prototype.addClaims=function(e,t){var n=this.addClientCapabilitiesToClaims(e,t);Ln.validateClaims(n),this.parameters.set(W.CLAIMS,encodeURIComponent(n))},r.prototype.addCorrelationId=function(e){this.parameters.set(W.CLIENT_REQUEST_ID,encodeURIComponent(e))},r.prototype.addLibraryInfo=function(e){this.parameters.set(W.X_CLIENT_SKU,e.sku),this.parameters.set(W.X_CLIENT_VER,e.version),this.parameters.set(W.X_CLIENT_OS,e.os),this.parameters.set(W.X_CLIENT_CPU,e.cpu)},r.prototype.addPrompt=function(e){Ln.validatePrompt(e),this.parameters.set(""+W.PROMPT,encodeURIComponent(e))},r.prototype.addState=function(e){L.isEmpty(e)||this.parameters.set(W.STATE,encodeURIComponent(e))},r.prototype.addNonce=function(e){this.parameters.set(W.NONCE,encodeURIComponent(e))},r.prototype.addCodeChallengeParams=function(e,t){if(Ln.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(W.CODE_CHALLENGE,encodeURIComponent(e)),this.parameters.set(W.CODE_CHALLENGE_METHOD,encodeURIComponent(t));else throw ye.createInvalidCodeChallengeParamsError()},r.prototype.addAuthorizationCode=function(e){this.parameters.set(W.CODE,encodeURIComponent(e))},r.prototype.addDeviceCode=function(e){this.parameters.set(W.DEVICE_CODE,encodeURIComponent(e))},r.prototype.addRefreshToken=function(e){this.parameters.set(W.REFRESH_TOKEN,encodeURIComponent(e))},r.prototype.addCodeVerifier=function(e){this.parameters.set(W.CODE_VERIFIER,encodeURIComponent(e))},r.prototype.addClientSecret=function(e){this.parameters.set(W.CLIENT_SECRET,encodeURIComponent(e))},r.prototype.addClientAssertion=function(e){this.parameters.set(W.CLIENT_ASSERTION,encodeURIComponent(e))},r.prototype.addClientAssertionType=function(e){this.parameters.set(W.CLIENT_ASSERTION_TYPE,encodeURIComponent(e))},r.prototype.addOboAssertion=function(e){this.parameters.set(W.OBO_ASSERTION,encodeURIComponent(e))},r.prototype.addRequestTokenUse=function(e){this.parameters.set(W.REQUESTED_TOKEN_USE,encodeURIComponent(e))},r.prototype.addGrantType=function(e){this.parameters.set(W.GRANT_TYPE,encodeURIComponent(e))},r.prototype.addClientInfo=function(){this.parameters.set(kM,"1")},r.prototype.addExtraQueryParameters=function(e){var t=this;Ln.sanitizeEQParams(e,this.parameters),Object.keys(e).forEach(function(n){t.parameters.set(n,e[n])})},r.prototype.addClientCapabilitiesToClaims=function(e,t){var n;if(!e)n={};else try{n=JSON.parse(e)}catch{throw ye.createInvalidClaimsRequestError()}return t&&t.length>0&&(n.hasOwnProperty(Bn.ACCESS_TOKEN)||(n[Bn.ACCESS_TOKEN]={}),n[Bn.ACCESS_TOKEN][Bn.XMS_CC]={values:t}),JSON.stringify(n)},r.prototype.addUsername=function(e){this.parameters.set(bs.username,e)},r.prototype.addPassword=function(e){this.parameters.set(bs.password,e)},r.prototype.addPopToken=function(e){L.isEmpty(e)||(this.parameters.set(W.TOKEN_TYPE,v.AuthenticationScheme.POP),this.parameters.set(W.REQ_CNF,encodeURIComponent(e)))},r.prototype.addServerTelemetry=function(e){this.parameters.set(W.X_CLIENT_CURR_TELEM,e.generateCurrentRequestHeaderValue()),this.parameters.set(W.X_CLIENT_LAST_TELEM,e.generateLastRequestHeaderValue())},r.prototype.addThrottling=function(){this.parameters.set(W.X_MS_LIB_CAPABILITY,Vi.X_MS_LIB_CAPABILITY_VALUE)},r.prototype.createQueryString=function(){var e=new Array;return this.parameters.forEach(function(t,n){e.push(n+"="+t)}),e.join("&")},r}(),uT=function(r){De(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createIdTokenEntity=function(t,n,i,o,a,s){var c=new e;return c.credentialType=v.CredentialType.ID_TOKEN,c.homeAccountId=t,c.environment=n,c.clientId=o,c.secret=i,c.realm=a,c.oboAssertion=s,c},e.isIdTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===v.CredentialType.ID_TOKEN:!1},e}(Fn),Ee=function(){function r(){}return r.nowSeconds=function(){return Math.round(new Date().getTime()/1e3)},r.isTokenExpired=function(e,t){var n=Number(e)||0,i=r.nowSeconds()+t;return i>n},r.wasClockTurnedBack=function(e){var t=Number(e);return t>r.nowSeconds()},r.delay=function(e,t){return new Promise(function(n){return setTimeout(function(){return n(t)},e)})},r}(),lT=function(r){De(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createAccessTokenEntity=function(t,n,i,o,a,s,c,u,l,p,d,f){var m,y=new e;y.homeAccountId=t,y.credentialType=v.CredentialType.ACCESS_TOKEN,y.secret=i;var E=Ee.nowSeconds();if(y.cachedAt=E.toString(),y.expiresOn=c.toString(),y.extendedExpiresOn=u.toString(),p&&(y.refreshOn=p.toString()),y.environment=n,y.clientId=o,y.realm=a,y.target=s,y.oboAssertion=f,y.tokenType=L.isEmpty(d)?v.AuthenticationScheme.BEARER:d,y.tokenType===v.AuthenticationScheme.POP){y.credentialType=v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME;var S=Gt.extractTokenClaims(i,l);if(!(!((m=S?.cnf)===null||m===void 0)&&m.kid))throw R.createTokenClaimsRequiredError();y.keyId=S.cnf.kid}return y},e.isAccessTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("realm")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.hasOwnProperty("target")&&(t.credentialType===v.CredentialType.ACCESS_TOKEN||t.credentialType===v.CredentialType.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1},e}(Fn),pT=function(r){De(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.createRefreshTokenEntity=function(t,n,i,o,a,s){var c=new e;return c.clientId=o,c.credentialType=v.CredentialType.REFRESH_TOKEN,c.environment=n,c.homeAccountId=t,c.secret=i,c.oboAssertion=s,a&&(c.familyId=a),c},e.isRefreshTokenEntity=function(t){return t?t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")&&t.credentialType===v.CredentialType.REFRESH_TOKEN:!1},e}(Fn),rT=["interaction_required","consent_required","login_required"],FM=["message_only","additional_action","basic_action","user_password_expired","consent_required"],Gi=function(r){De(e,r);function e(t,n,i){var o=r.call(this,t,n,i)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,e.prototype),o}return e.isInteractionRequiredError=function(t,n,i){var o=!!t&&rT.indexOf(t)>-1,a=!!i&&FM.indexOf(i)>-1,s=!!n&&rT.some(function(c){return n.indexOf(c)>-1});return o||s||a},e}(zn),zM=function(){function r(e,t,n,i,o){this.account=e||null,this.idToken=t||null,this.accessToken=n||null,this.refreshToken=i||null,this.appMetadata=o||null}return r}(),dT=function(){function r(){}return r.setRequestState=function(e,t,n){var i=r.generateLibraryState(e,n);return L.isEmpty(t)?i:""+i+U.RESOURCE_DELIM+t},r.generateLibraryState=function(e,t){if(!e)throw R.createNoCryptoObjectError("generateLibraryState");var n={id:e.createNewGuid()};t&&(n.meta=t);var i=JSON.stringify(n);return e.base64Encode(i)},r.parseRequestState=function(e,t){if(!e)throw R.createNoCryptoObjectError("parseRequestState");if(L.isEmpty(t))throw R.createInvalidStateError(t,"Null, undefined or empty state");try{var n=t.split(U.RESOURCE_DELIM),i=n[0],o=n.length>1?n.slice(1).join(U.RESOURCE_DELIM):"",a=e.base64Decode(i),s=JSON.parse(a);return{userRequestState:L.isEmpty(o)?"":o,libraryState:s}}catch(c){throw R.createInvalidStateError(t,c)}},r}(),We=function(){function r(e){if(this._urlString=e,L.isEmpty(this._urlString))throw ye.createUrlEmptyError();L.isEmpty(this.getHash())&&(this._urlString=r.canonicalizeUri(e))}return Object.defineProperty(r.prototype,"urlString",{get:function(){return this._urlString},enumerable:!1,configurable:!0}),r.canonicalizeUri=function(e){if(e){var t=e.toLowerCase();return L.endsWith(t,"?")?t=t.slice(0,-1):L.endsWith(t,"?/")&&(t=t.slice(0,-2)),L.endsWith(t,"/")||(t+="/"),t}return e},r.prototype.validateAsUri=function(){var e;try{e=this.getUrlComponents()}catch(t){throw ye.createUrlParseError(t)}if(!e.HostNameAndPort||!e.PathSegments)throw ye.createUrlParseError("Given url string: "+this.urlString);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ye.createInsecureAuthorityUriError(this.urlString)},r.prototype.urlRemoveQueryStringParameter=function(e){var t=new RegExp("(\\&"+e+"=)[^&]+");return this._urlString=this.urlString.replace(t,""),t=new RegExp("("+e+"=)[^&]+&"),this._urlString=this.urlString.replace(t,""),t=new RegExp("("+e+"=)[^&]+"),this._urlString=this.urlString.replace(t,""),this.urlString},r.appendQueryString=function(e,t){return L.isEmpty(t)?e:e.indexOf("?")<0?e+"?"+t:e+"&"+t},r.removeHashFromUrl=function(e){return r.canonicalizeUri(e.split("#")[0])},r.prototype.replaceTenantPath=function(e){var t=this.getUrlComponents(),n=t.PathSegments;return e&&n.length!==0&&(n[0]===Cs.COMMON||n[0]===Cs.ORGANIZATIONS)&&(n[0]=e),r.constructAuthorityUriFromObject(t)},r.prototype.getHash=function(){return r.parseHash(this.urlString)},r.prototype.getUrlComponents=function(){var e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ye.createUrlParseError("Given url string: "+this.urlString);var n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},i=n.AbsolutePath.split("/");return i=i.filter(function(o){return o&&o.length>0}),n.PathSegments=i,!L.isEmpty(n.QueryString)&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n},r.getDomainFromUrl=function(e){var t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw ye.createUrlParseError("Given url string: "+e);return n[2]},r.getAbsoluteUrl=function(e,t){if(e[0]===U.FORWARD_SLASH){var n=new r(t),i=n.getUrlComponents();return i.Protocol+"//"+i.HostNameAndPort+e}return e},r.parseHash=function(e){var t=e.indexOf("#"),n=e.indexOf("#/");return n>-1?e.substring(n+2):t>-1?e.substring(t+1):""},r.constructAuthorityUriFromObject=function(e){return new r(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))},r.getDeserializedHash=function(e){if(L.isEmpty(e))return{};var t=r.parseHash(e),n=L.queryStringToObject(L.isEmpty(t)?e:t);if(!n)throw R.createHashNotDeserializedError(JSON.stringify(n));return n},r.hashContainsKnownProperties=function(e){if(L.isEmpty(e))return!1;var t=r.getDeserializedHash(e);return!!(t.code||t.error_description||t.error||t.state)},r}(),Up;(function(r){r.SW="sw",r.UHW="uhw"})(Up||(Up={}));var qp=function(){function r(e){this.cryptoUtils=e}return r.prototype.generateCnf=function(e){return G(this,void 0,void 0,function(){var t,n;return $(this,function(i){switch(i.label){case 0:return[4,this.cryptoUtils.getPublicKeyThumbprint(e)];case 1:return t=i.sent(),n={kid:t,xms_ksl:Up.SW},[2,this.cryptoUtils.base64Encode(JSON.stringify(n))]}})})},r.prototype.signPopToken=function(e,t){var n;return G(this,void 0,void 0,function(){var i,o,a,s,c,u;return $(this,function(l){switch(l.label){case 0:if(i=Gt.extractTokenClaims(e,this.cryptoUtils),o=t.resourceRequestMethod,a=t.resourceRequestUri,s=t.shrClaims,c=a?new We(a):void 0,u=c?.getUrlComponents(),!(!((n=i?.cnf)===null||n===void 0)&&n.kid))throw R.createTokenClaimsRequiredError();return[4,this.cryptoUtils.signJwt({at:e,ts:Ee.nowSeconds(),m:o?.toUpperCase(),u:u?.HostNameAndPort,nonce:this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:s||void 0},i.cnf.kid)];case 1:return[2,l.sent()]}})})},r}(),fT=function(){function r(){}return r.prototype.generateAppMetadataKey=function(){return r.generateAppMetadataCacheKey(this.environment,this.clientId)},r.generateAppMetadataCacheKey=function(e,t){var n=[kp,e,t];return n.join(Je.CACHE_KEY_SEPARATOR).toLowerCase()},r.createAppMetadataEntity=function(e,t,n){var i=new r;return i.clientId=e,i.environment=t,n&&(i.familyId=n),i},r.isAppMetadataEntity=function(e,t){return t?e.indexOf(kp)===0&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("environment"):!1},r}(),hT=function(){function r(e,t){this.cache=e,this.hasChanged=t}return Object.defineProperty(r.prototype,"cacheHasChanged",{get:function(){return this.hasChanged},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tokenCache",{get:function(){return this.cache},enumerable:!1,configurable:!0}),r}(),kt=function(){function r(e,t,n,i,o,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=i,this.serializableCache=o,this.persistencePlugin=a}return r.prototype.validateServerAuthorizationCodeResponse=function(e,t,n){if(!e.state||!t)throw e.state?R.createStateNotFoundError("Cached State"):R.createStateNotFoundError("Server State");if(decodeURIComponent(e.state)!==decodeURIComponent(t))throw R.createStateMismatchError();if(e.error||e.error_description||e.suberror)throw Gi.isInteractionRequiredError(e.error,e.error_description,e.suberror)?new Gi(e.error||U.EMPTY_STRING,e.error_description,e.suberror):new zn(e.error||U.EMPTY_STRING,e.error_description,e.suberror);e.client_info&&ws(e.client_info,n)},r.prototype.validateTokenResponse=function(e){if(e.error||e.error_description||e.suberror){if(Gi.isInteractionRequiredError(e.error,e.error_description,e.suberror))throw new Gi(e.error,e.error_description,e.suberror);var t=e.error_codes+" - ["+e.timestamp+"]: "+e.error_description+" - Correlation ID: "+e.correlation_id+" - Trace ID: "+e.trace_id;throw new zn(e.error,t,e.suberror)}},r.prototype.handleServerTokenResponse=function(e,t,n,i,o,a,s){return G(this,void 0,void 0,function(){var c,u,l,p,d,f;return $(this,function(m){switch(m.label){case 0:if(e.id_token&&(c=new Gt(e.id_token||U.EMPTY_STRING,this.cryptoObj),o&&!L.isEmpty(o.nonce)&&c.claims.nonce!==o.nonce))throw R.createNonceMismatchError();this.homeAccountIdentifier=pr.generateHomeAccountId(e.client_info||U.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,c),!!o&&!!o.state&&(u=dT.parseRequestState(this.cryptoObj,o.state)),l=this.generateCacheRecord(e,t,n,c,i.scopes,a,o),m.label=1;case 1:return m.trys.push([1,,4,7]),this.persistencePlugin&&this.serializableCache?(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new hT(this.serializableCache,!0),[4,this.persistencePlugin.beforeCacheAccess(p)]):[3,3];case 2:m.sent(),m.label=3;case 3:return s&&l.account&&(d=l.account.generateAccountKey(),f=this.cacheStorage.getAccount(d),!f)?(this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),[2,r.generateAuthenticationResult(this.cryptoObj,t,l,!1,i,c,u)]):(this.cacheStorage.saveCacheRecord(l),[3,7]);case 4:return this.persistencePlugin&&this.serializableCache&&p?(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),[4,this.persistencePlugin.afterCacheAccess(p)]):[3,6];case 5:m.sent(),m.label=6;case 6:return[7];case 7:return[2,r.generateAuthenticationResult(this.cryptoObj,t,l,!1,i,c,u)]}})})},r.prototype.generateCacheRecord=function(e,t,n,i,o,a,s){var c=t.getPreferredCache();if(L.isEmpty(c))throw R.createInvalidCacheEnvironmentError();var u,l;!L.isEmpty(e.id_token)&&!!i&&(u=uT.createIdTokenEntity(this.homeAccountIdentifier,c,e.id_token||U.EMPTY_STRING,this.clientId,i.claims.tid||U.EMPTY_STRING,a),l=this.generateAccountEntity(e,i,t,a,s));var p=null;if(!L.isEmpty(e.access_token)){var d=e.scope?ft.fromString(e.scope):new ft(o||[]),f=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,m=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,y=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,E=n+f,S=E+m,P=y&&y>0?n+y:void 0;p=lT.createAccessTokenEntity(this.homeAccountIdentifier,c,e.access_token||U.EMPTY_STRING,this.clientId,i?i.claims.tid||U.EMPTY_STRING:t.tenant,d.printScopes(),E,S,this.cryptoObj,P,e.token_type,a)}var A=null;L.isEmpty(e.refresh_token)||(A=pT.createRefreshTokenEntity(this.homeAccountIdentifier,c,e.refresh_token||U.EMPTY_STRING,this.clientId,e.foci,a));var j=null;return L.isEmpty(e.foci)||(j=fT.createAppMetadataEntity(this.clientId,c,e.foci)),new zM(l,u,p,A,j)},r.prototype.generateAccountEntity=function(e,t,n,i,o){var a=n.authorityType,s=o?o.cloud_graph_host_name:"",c=o?o.msgraph_host:"";if(a===v.AuthorityType.Adfs)return this.logger.verbose("Authority type is ADFS, creating ADFS account"),pr.createGenericAccount(n,this.homeAccountIdentifier,t,i,s,c);if(L.isEmpty(e.client_info)&&n.protocolMode==="AAD")throw R.createClientInfoEmptyError();return e.client_info?pr.createAccount(e.client_info,this.homeAccountIdentifier,n,t,i,s,c):pr.createGenericAccount(n,this.homeAccountIdentifier,t,i,s,c)},r.generateAuthenticationResult=function(e,t,n,i,o,a,s){var c,u,l;return G(this,void 0,void 0,function(){var p,d,f,m,y,E,S,P;return $(this,function(A){switch(A.label){case 0:return p="",d=[],f=null,y=U.EMPTY_STRING,n.accessToken?n.accessToken.tokenType!==v.AuthenticationScheme.POP?[3,2]:(E=new qp(e),[4,E.signPopToken(n.accessToken.secret,o)]):[3,4];case 1:return p=A.sent(),[3,3];case 2:p=n.accessToken.secret,A.label=3;case 3:d=ft.fromString(n.accessToken.target).asArray(),f=new Date(Number(n.accessToken.expiresOn)*1e3),m=new Date(Number(n.accessToken.extendedExpiresOn)*1e3),A.label=4;case 4:return n.appMetadata&&(y=n.appMetadata.familyId===Ts?Ts:U.EMPTY_STRING),S=a?.claims.oid||a?.claims.sub||U.EMPTY_STRING,P=a?.claims.tid||U.EMPTY_STRING,[2,{authority:t.canonicalAuthority,uniqueId:S,tenantId:P,scopes:d,account:n.account?n.account.getAccountInfo():null,idToken:a?a.rawToken:U.EMPTY_STRING,idTokenClaims:a?a.claims:{},accessToken:p,fromCache:i,expiresOn:f,extExpiresOn:m,familyId:y,tokenType:((c=n.accessToken)===null||c===void 0?void 0:c.tokenType)||U.EMPTY_STRING,state:s?s.userRequestState:U.EMPTY_STRING,cloudGraphHostName:((u=n.account)===null||u===void 0?void 0:u.cloudGraphHostName)||U.EMPTY_STRING,msGraphHost:((l=n.account)===null||l===void 0?void 0:l.msGraphHost)||U.EMPTY_STRING}]}})})},r}(),HM=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.getAuthCodeUrl=function(t){return G(this,void 0,void 0,function(){var n;return $(this,function(i){return n=this.createAuthCodeUrlQueryString(t),[2,We.appendQueryString(this.authority.authorizationEndpoint,n)]})})},e.prototype.acquireToken=function(t,n){return G(this,void 0,void 0,function(){var i,o,a;return $(this,function(s){switch(s.label){case 0:if(this.logger.info("in acquireToken call"),!t||L.isEmpty(t.code))throw R.createTokenRequestCannotBeMadeError();return i=Ee.nowSeconds(),[4,this.executeTokenRequest(this.authority,t)];case 1:return o=s.sent(),a=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),a.validateTokenResponse(o.body),[4,a.handleServerTokenResponse(o.body,this.authority,i,t,n)];case 2:return[2,s.sent()]}})})},e.prototype.handleFragmentResponse=function(t,n){var i=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null),o=new We(t),a=We.getDeserializedHash(o.getHash());if(i.validateServerAuthorizationCodeResponse(a,n,this.cryptoUtils),!a.code)throw R.createNoAuthCodeInServerResponseError();return qe(qe({},a),{code:a.code})},e.prototype.getLogoutUri=function(t){if(!t)throw ye.createEmptyLogoutRequestError();t.account?this.cacheManager.removeAccount(pr.generateAccountCacheKey(t.account)):this.cacheManager.clear();var n=this.createLogoutUrlQueryString(t);return We.appendQueryString(this.authority.endSessionEndpoint,n)},e.prototype.executeTokenRequest=function(t,n){return G(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return $(this,function(p){switch(p.label){case 0:return i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes},[4,this.createTokenRequestBody(n)];case 1:if(o=p.sent(),a=this.createTokenQueryParameters(n),s=void 0,n.clientInfo)try{c=ws(n.clientInfo,this.cryptoUtils),s={credential:""+c.uid+Je.CLIENT_INFO_SEPARATOR+c.utid,type:v.CcsCredentialType.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}return u=this.createTokenRequestHeaders(s||n.ccsCredential),l=L.isEmpty(a)?t.tokenEndpoint:t.tokenEndpoint+"?"+a,[2,this.executePostToTokenEndpoint(l,o,u,i)]}})})},e.prototype.createTokenQueryParameters=function(t){var n=new ht;return t.tokenQueryParameters&&n.addExtraQueryParameters(t.tokenQueryParameters),n.createQueryString()},e.prototype.createTokenRequestBody=function(t){return G(this,void 0,void 0,function(){var n,i,o,a,s,c,u,u;return $(this,function(l){switch(l.label){case 0:return n=new ht,n.addClientId(this.config.authOptions.clientId),n.addRedirectUri(t.redirectUri),n.addScopes(t.scopes),n.addAuthorizationCode(t.code),n.addLibraryInfo(this.config.libraryInfo),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),t.codeVerifier&&n.addCodeVerifier(t.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(i=this.config.clientCredentials.clientAssertion,n.addClientAssertion(i.assertion),n.addClientAssertionType(i.assertionType)),n.addGrantType(dr.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),t.authenticationScheme!==v.AuthenticationScheme.POP?[3,2]:(o=new qp(this.cryptoUtils),[4,o.generateCnf(t)]);case 1:a=l.sent(),n.addPopToken(a),l.label=2;case 2:if(s=t.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(s),(!L.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),c=void 0,t.clientInfo)try{u=ws(t.clientInfo,this.cryptoUtils),c={credential:""+u.uid+Je.CLIENT_INFO_SEPARATOR+u.utid,type:v.CcsCredentialType.HOME_ACCOUNT_ID}}catch(p){this.logger.verbose("Could not parse client info for CCS Header: "+p)}else c=t.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&c)switch(c.type){case v.CcsCredentialType.HOME_ACCOUNT_ID:try{u=Ki(c.credential),n.addCcsOid(u)}catch(p){this.logger.verbose("Could not parse home account ID for CCS Header: "+p)}break;case v.CcsCredentialType.UPN:n.addCcsUpn(c.credential);break}return[2,n.createQueryString()]}})})},e.prototype.createAuthCodeUrlQueryString=function(t){var n=new ht;n.addClientId(this.config.authOptions.clientId);var i=xs(t.scopes||[],t.extraScopesToConsent||[]);n.addScopes(i),n.addRedirectUri(t.redirectUri);var o=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(o),n.addResponseMode(t.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),n.addClientInfo(),t.codeChallenge&&t.codeChallengeMethod&&n.addCodeChallengeParams(t.codeChallenge,t.codeChallengeMethod),t.prompt&&n.addPrompt(t.prompt),t.domainHint&&n.addDomainHint(t.domainHint),t.prompt!==jn.SELECT_ACCOUNT)if(t.sid&&t.prompt===jn.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(t.sid);else if(t.account){var a=this.extractAccountSid(t.account);if(a&&t.prompt===jn.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{var s=Ki(t.account.homeAccountId);n.addCcsOid(s)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}}else if(t.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(t.loginHint),n.addCcsUpn(t.loginHint);else if(t.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(t.account.username);try{var s=Ki(t.account.homeAccountId);n.addCcsOid(s)}catch(c){this.logger.verbose("Could not parse home account ID for CCS Header: "+c)}}}else t.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(t.loginHint),n.addCcsUpn(t.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&n.addNonce(t.nonce),t.state&&n.addState(t.state),(!L.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),t.extraQueryParameters&&n.addExtraQueryParameters(t.extraQueryParameters),n.createQueryString()},e.prototype.createLogoutUrlQueryString=function(t){var n=new ht;return t.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(t.postLogoutRedirectUri),t.correlationId&&n.addCorrelationId(t.correlationId),t.idTokenHint&&n.addIdTokenHint(t.idTokenHint),n.createQueryString()},e.prototype.extractAccountSid=function(t){if(t.idTokenClaims){var n=t.idTokenClaims;return n.sid||null}return null},e}($r),GM=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n,i,o,a;return $(this,function(s){switch(s.label){case 0:return[4,this.getDeviceCode(t)];case 1:return n=s.sent(),t.deviceCodeCallback(n),i=Ee.nowSeconds(),[4,this.acquireTokenWithDeviceCode(t,n)];case 2:return o=s.sent(),a=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),a.validateTokenResponse(o),[4,a.handleServerTokenResponse(o,this.authority,i,t)];case 3:return[2,s.sent()]}})})},e.prototype.getDeviceCode=function(t){return G(this,void 0,void 0,function(){var n,i,o;return $(this,function(a){return n=this.createQueryString(t),i=this.createTokenRequestHeaders(),o={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes},[2,this.executePostRequestToDeviceCodeEndpoint(this.authority.deviceCodeEndpoint,n,i,o)]})})},e.prototype.executePostRequestToDeviceCodeEndpoint=function(t,n,i,o){return G(this,void 0,void 0,function(){var a,s,c,u,l,p,d;return $(this,function(f){switch(f.label){case 0:return[4,this.networkManager.sendPostRequest(o,t,{body:n,headers:i})];case 1:return a=f.sent().body,s=a.user_code,c=a.device_code,u=a.verification_uri,l=a.expires_in,p=a.interval,d=a.message,[2,{userCode:s,deviceCode:c,verificationUri:u,expiresIn:l,interval:p,message:d}]}})})},e.prototype.createQueryString=function(t){var n=new ht;return n.addScopes(t.scopes),n.addClientId(this.config.authOptions.clientId),(!L.isEmpty(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),n.createQueryString()},e.prototype.continuePolling=function(t,n,i){if(i)throw this.logger.error("Token request cancelled by setting DeviceCodeRequest.cancel = true"),R.createDeviceCodeCancelledError();if(n&&n<t&&Ee.nowSeconds()>n)throw this.logger.error("User defined timeout for device code polling reached. The timeout was set for "+n),R.createUserTimeoutReachedError();if(Ee.nowSeconds()>t)throw n&&this.logger.verbose("User specified timeout ignored as the device code has expired before the timeout elapsed. The user specified timeout was set for "+n),this.logger.error("Device code expired. Expiration time of device code was "+t),R.createDeviceCodeExpiredError();return!0},e.prototype.acquireTokenWithDeviceCode=function(t,n){return G(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return $(this,function(p){switch(p.label){case 0:i=this.createTokenRequestBody(t,n),o=this.createTokenRequestHeaders(),a=t.timeout?Ee.nowSeconds()+t.timeout:void 0,s=Ee.nowSeconds()+n.expiresIn,c=n.interval*1e3,p.label=1;case 1:return this.continuePolling(s,a,t.cancel)?(u={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes},[4,this.executePostToTokenEndpoint(this.authority.tokenEndpoint,i,o,u)]):[3,6];case 2:return l=p.sent(),l.body&&l.body.error===U.AUTHORIZATION_PENDING?(this.logger.info(l.body.error_description||"Authorization pending. Continue polling."),[4,Ee.delay(c)]):[3,4];case 3:return p.sent(),[3,5];case 4:return this.logger.verbose("Authorization completed successfully. Polling stopped."),[2,l.body];case 5:return[3,1];case 6:throw this.logger.error("Polling stopped for unknown reasons."),R.createDeviceCodeUnknownError()}})})},e.prototype.createTokenRequestBody=function(t,n){var i=new ht;i.addScopes(t.scopes),i.addClientId(this.config.authOptions.clientId),i.addGrantType(dr.DEVICE_CODE_GRANT),i.addDeviceCode(n.deviceCode);var o=t.correlationId||this.config.cryptoInterface.createNewGuid();return i.addCorrelationId(o),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addThrottling(),this.serverTelemetryManager&&i.addServerTelemetry(this.serverTelemetryManager),(!L.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(t.claims,this.config.authOptions.clientCapabilities),i.createQueryString()},e}($r),mT=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n,i,o;return $(this,function(a){switch(a.label){case 0:return n=Ee.nowSeconds(),[4,this.executeTokenRequest(t,this.authority)];case 1:return i=a.sent(),o=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),o.validateTokenResponse(i.body),[2,o.handleServerTokenResponse(i.body,this.authority,n,t,void 0,void 0,!0)]}})})},e.prototype.acquireTokenByRefreshToken=function(t){return G(this,void 0,void 0,function(){var n,i,o;return $(this,function(a){if(!t)throw ye.createEmptyTokenRequestError();if(!t.account)throw R.createNoAccountInSilentRequestError();if(n=this.cacheManager.isAppMetadataFOCI(t.account.environment,this.config.authOptions.clientId),n)try{return[2,this.acquireTokenWithCachedRefreshToken(t,!0)]}catch(s){if(i=s instanceof R&&s.errorCode===_.noTokensFoundError.code,o=s instanceof zn&&s.errorCode===tT.INVALID_GRANT_ERROR&&s.subError===tT.CLIENT_MISMATCH_ERROR,i||o)return[2,this.acquireTokenWithCachedRefreshToken(t,!1)];throw s}return[2,this.acquireTokenWithCachedRefreshToken(t,!1)]})})},e.prototype.acquireTokenWithCachedRefreshToken=function(t,n){return G(this,void 0,void 0,function(){var i,o;return $(this,function(a){if(i=this.cacheManager.readRefreshTokenFromCache(this.config.authOptions.clientId,t.account,n),!i)throw R.createNoTokensFoundError();return o=qe(qe({},t),{refreshToken:i.secret,authenticationScheme:t.authenticationScheme||v.AuthenticationScheme.BEARER,ccsCredential:{credential:t.account.homeAccountId,type:v.CcsCredentialType.HOME_ACCOUNT_ID}}),[2,this.acquireToken(o)]})})},e.prototype.executeTokenRequest=function(t,n){return G(this,void 0,void 0,function(){var i,o,a,s,c;return $(this,function(u){switch(u.label){case 0:return[4,this.createTokenRequestBody(t)];case 1:return i=u.sent(),o=this.createTokenQueryParameters(t),a=this.createTokenRequestHeaders(t.ccsCredential),s={clientId:this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:t.scopes},c=We.appendQueryString(n.tokenEndpoint,o),[2,this.executePostToTokenEndpoint(c,i,a,s)]}})})},e.prototype.createTokenQueryParameters=function(t){var n=new ht;return t.tokenQueryParameters&&n.addExtraQueryParameters(t.tokenQueryParameters),n.createQueryString()},e.prototype.createTokenRequestBody=function(t){return G(this,void 0,void 0,function(){var n,i,o,a,s,c,u;return $(this,function(l){switch(l.label){case 0:return n=new ht,n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes),n.addGrantType(dr.REFRESH_TOKEN_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager),i=t.correlationId||this.config.cryptoInterface.createNewGuid(),n.addCorrelationId(i),n.addRefreshToken(t.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion&&(o=this.config.clientCredentials.clientAssertion,n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)),t.authenticationScheme!==v.AuthenticationScheme.POP?[3,2]:(a=new qp(this.cryptoUtils),c=(s=n).addPopToken,[4,a.generateCnf(t)]);case 1:c.apply(s,[l.sent()]),l.label=2;case 2:if((!L.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.ccsCredential)switch(t.ccsCredential.type){case v.CcsCredentialType.HOME_ACCOUNT_ID:try{u=Ki(t.ccsCredential.credential),n.addCcsOid(u)}catch(p){this.logger.verbose("Could not parse home account ID for CCS Header: "+p)}break;case v.CcsCredentialType.UPN:n.addCcsUpn(t.ccsCredential.credential);break}return[2,n.createQueryString()]}})})},e}($r),$M=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return this.scopeSet=new ft(t.scopes||[]),t.skipCache?[4,this.executeTokenRequest(t,this.authority)]:[3,2];case 1:return[2,i.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:return n=i.sent(),n?[2,n]:[3,4];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,i.sent()]}})})},e.prototype.getCachedAuthenticationResult=function(t){var n,i;return G(this,void 0,void 0,function(){var o;return $(this,function(a){switch(a.label){case 0:return o=this.readAccessTokenFromCache(),o?Ee.isTokenExpired(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?((i=this.serverTelemetryManager)===null||i===void 0||i.setCacheOutcome(dt.CACHED_ACCESS_TOKEN_EXPIRED),[2,null]):[4,kt.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:null,idToken:null,accessToken:o,refreshToken:null,appMetadata:null},!0,t)]:((n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(dt.NO_CACHED_ACCESS_TOKEN),[2,null]);case 1:return[2,a.sent()]}})})},e.prototype.readAccessTokenFromCache=function(){var t={homeAccountId:"",environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:v.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()},n=this.cacheManager.getCredentialsFilteredBy(t),i=Object.keys(n.accessTokens).map(function(o){return n.accessTokens[o]});if(i.length<1)return null;if(i.length>1)throw R.createMultipleMatchingTokensInCacheError();return i[0]},e.prototype.executeTokenRequest=function(t,n){return G(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return $(this,function(p){switch(p.label){case 0:return i=this.createTokenRequestBody(t),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes},s=Ee.nowSeconds(),[4,this.executePostToTokenEndpoint(n.tokenEndpoint,i,o,a)];case 1:return c=p.sent(),u=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),u.validateTokenResponse(c.body),[4,u.handleServerTokenResponse(c.body,this.authority,s,t)];case 2:return l=p.sent(),[2,l]}})})},e.prototype.createTokenRequestBody=function(t){var n=new ht;n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes,!1),n.addGrantType(dr.CLIENT_CREDENTIALS_GRANT),n.addLibraryInfo(this.config.libraryInfo),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return(!L.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),n.createQueryString()},e}($r),VM=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n;return $(this,function(i){switch(i.label){case 0:return this.scopeSet=new ft(t.scopes||[]),t.skipCache?[4,this.executeTokenRequest(t,this.authority)]:[3,2];case 1:return[2,i.sent()];case 2:return[4,this.getCachedAuthenticationResult(t)];case 3:return n=i.sent(),n?[2,n]:[3,4];case 4:return[4,this.executeTokenRequest(t,this.authority)];case 5:return[2,i.sent()]}})})},e.prototype.getCachedAuthenticationResult=function(t){var n;return G(this,void 0,void 0,function(){var i,o,a,s,c,u;return $(this,function(l){switch(l.label){case 0:return i=this.readAccessTokenFromCache(),!i||Ee.isTokenExpired(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds)?((n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(i?dt.NO_CACHED_ACCESS_TOKEN:dt.CACHED_ACCESS_TOKEN_EXPIRED),[2,null]):(o=this.readIdTokenFromCache(t),s=null,o&&(a=new Gt(o.secret,this.config.cryptoInterface),c=a.claims.oid?a.claims.oid:a.claims.sub,u={homeAccountId:o.homeAccountId,environment:o.environment,tenantId:o.realm,username:U.EMPTY_STRING,localAccountId:c||""},s=this.readAccountFromCache(u)),[4,kt.generateAuthenticationResult(this.cryptoUtils,this.authority,{account:s,accessToken:i,idToken:o,refreshToken:null,appMetadata:null},!0,t,a)]);case 1:return[2,l.sent()]}})})},e.prototype.readAccessTokenFromCache=function(){var t={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:v.CredentialType.ACCESS_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,target:this.scopeSet.printScopesLowerCase()},n=this.cacheManager.getCredentialsFilteredBy(t),i=Object.keys(n.accessTokens).map(function(a){return n.accessTokens[a]}),o=i.length;if(o<1)return null;if(o>1)throw R.createMultipleMatchingTokensInCacheError();return i[0]},e.prototype.readIdTokenFromCache=function(t){var n={environment:this.authority.canonicalAuthorityUrlComponents.HostNameAndPort,credentialType:v.CredentialType.ID_TOKEN,clientId:this.config.authOptions.clientId,realm:this.authority.tenant,oboAssertion:t.oboAssertion},i=this.cacheManager.getCredentialsFilteredBy(n),o=Object.keys(i.idTokens).map(function(a){return i.idTokens[a]});return o.length<1?null:o[0]},e.prototype.readAccountFromCache=function(t){return this.cacheManager.readAccountFromCache(t)},e.prototype.executeTokenRequest=function(t,n){return G(this,void 0,void 0,function(){var i,o,a,s,c,u,l;return $(this,function(p){switch(p.label){case 0:return i=this.createTokenRequestBody(t),o=this.createTokenRequestHeaders(),a={clientId:this.config.authOptions.clientId,authority:t.authority,scopes:t.scopes},s=Ee.nowSeconds(),[4,this.executePostToTokenEndpoint(n.tokenEndpoint,i,o,a)];case 1:return c=p.sent(),u=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),u.validateTokenResponse(c.body),[4,u.handleServerTokenResponse(c.body,this.authority,s,t)];case 2:return l=p.sent(),[2,l]}})})},e.prototype.createTokenRequestBody=function(t){var n=new ht;n.addClientId(this.config.authOptions.clientId),n.addScopes(t.scopes),n.addGrantType(dr.JWT_BEARER),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),n.addRequestTokenUse(W.ON_BEHALF_OF),n.addOboAssertion(t.oboAssertion),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return n.createQueryString()},e}($r),KM=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n,i;return $(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.acquireCachedToken(t)];case 1:return[2,o.sent()];case 2:if(n=o.sent(),n instanceof R&&n.errorCode===_.tokenRefreshRequired.code)return i=new mT(this.config),[2,i.acquireTokenByRefreshToken(t)];throw n;case 3:return[2]}})})},e.prototype.acquireCachedToken=function(t){var n,i,o,a;return G(this,void 0,void 0,function(){var s,c,u,l;return $(this,function(p){switch(p.label){case 0:if(!t)throw ye.createEmptyTokenRequestError();if(!t.account)throw R.createNoAccountInSilentRequestError();if(s=new ft(t.scopes||[]),c=t.authority||this.authority.getPreferredCache(),u=t.authenticationScheme||v.AuthenticationScheme.BEARER,l=this.cacheManager.readCacheRecord(t.account,this.config.authOptions.clientId,s,c,u),t.forceRefresh)throw(n=this.serverTelemetryManager)===null||n===void 0||n.setCacheOutcome(dt.FORCE_REFRESH),R.createRefreshRequiredError();if(l.accessToken){if(Ee.wasClockTurnedBack(l.accessToken.cachedAt)||Ee.isTokenExpired(l.accessToken.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw(o=this.serverTelemetryManager)===null||o===void 0||o.setCacheOutcome(dt.CACHED_ACCESS_TOKEN_EXPIRED),R.createRefreshRequiredError();if(l.accessToken.refreshOn&&Ee.isTokenExpired(l.accessToken.refreshOn,0))throw(a=this.serverTelemetryManager)===null||a===void 0||a.setCacheOutcome(dt.REFRESH_CACHED_ACCESS_TOKEN),R.createRefreshRequiredError();if(!L.isEmptyObj(t.claims))throw R.createRefreshRequiredError()}else throw(i=this.serverTelemetryManager)===null||i===void 0||i.setCacheOutcome(dt.NO_CACHED_ACCESS_TOKEN),R.createRefreshRequiredError();return this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[4,this.generateResultFromCacheRecord(l,t)];case 1:return[2,p.sent()]}})})},e.prototype.generateResultFromCacheRecord=function(t,n){return G(this,void 0,void 0,function(){var i;return $(this,function(o){switch(o.label){case 0:return t.idToken&&(i=new Gt(t.idToken.secret,this.config.cryptoInterface)),[4,kt.generateAuthenticationResult(this.cryptoUtils,this.authority,t,!0,n,i)];case 1:return[2,o.sent()]}})})},e}($r),YM=function(r){De(e,r);function e(t){return r.call(this,t)||this}return e.prototype.acquireToken=function(t){return G(this,void 0,void 0,function(){var n,i,o,a;return $(this,function(s){switch(s.label){case 0:return this.logger.info("in acquireToken call"),n=Ee.nowSeconds(),[4,this.executeTokenRequest(this.authority,t)];case 1:return i=s.sent(),o=new kt(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin),o.validateTokenResponse(i.body),a=o.handleServerTokenResponse(i.body,this.authority,n,t),[2,a]}})})},e.prototype.executeTokenRequest=function(t,n){return G(this,void 0,void 0,function(){var i,o,a;return $(this,function(s){return i={clientId:this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:n.scopes},o=this.createTokenRequestBody(n),a=this.createTokenRequestHeaders({credential:n.username,type:v.CcsCredentialType.UPN}),[2,this.executePostToTokenEndpoint(t.tokenEndpoint,o,a,i)]})})},e.prototype.createTokenRequestBody=function(t){var n=new ht;n.addClientId(this.config.authOptions.clientId),n.addUsername(t.username),n.addPassword(t.password),n.addScopes(t.scopes),n.addGrantType(dr.RESOURCE_OWNER_PASSWORD_GRANT),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addThrottling(),this.serverTelemetryManager&&n.addServerTelemetry(this.serverTelemetryManager);var i=t.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(i),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){var o=this.config.clientCredentials.clientAssertion;n.addClientAssertion(o.assertion),n.addClientAssertionType(o.assertionType)}return(!L.isEmptyObj(t.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(t.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&t.username&&n.addCcsUpn(t.username),n.createQueryString()},e}($r);function WM(r){return r.hasOwnProperty("authorization_endpoint")&&r.hasOwnProperty("token_endpoint")&&r.hasOwnProperty("end_session_endpoint")&&r.hasOwnProperty("issuer")}v.ProtocolMode=void 0;(function(r){r.AAD="AAD",r.OIDC="OIDC"})(v.ProtocolMode||(v.ProtocolMode={}));var gT=function(){function r(){this.expiresAt=Ee.nowSeconds()+$i.REFRESH_TIME_SECONDS}return r.prototype.updateCloudDiscoveryMetadata=function(e,t){this.aliases=e.aliases,this.preferred_cache=e.preferred_cache,this.preferred_network=e.preferred_network,this.aliasesFromNetwork=t},r.prototype.updateEndpointMetadata=function(e,t){this.authorization_endpoint=e.authorization_endpoint,this.token_endpoint=e.token_endpoint,this.end_session_endpoint=e.end_session_endpoint,this.issuer=e.issuer,this.endpointsFromNetwork=t},r.prototype.updateCanonicalAuthority=function(e){this.canonical_authority=e},r.prototype.resetExpiresAt=function(){this.expiresAt=Ee.nowSeconds()+$i.REFRESH_TIME_SECONDS},r.prototype.isExpired=function(){return this.expiresAt<=Ee.nowSeconds()},r.isAuthorityMetadataEntity=function(e,t){return t?e.indexOf($i.CACHE_KEY)===0&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("end_session_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt"):!1},r}();function JM(r){return r.hasOwnProperty("tenant_discovery_endpoint")&&r.hasOwnProperty("metadata")}var QM=function(){function r(e){this.networkInterface=e}return r.prototype.detectRegion=function(e,t){return G(this,void 0,void 0,function(){var n,i,o,a;return $(this,function(s){switch(s.label){case 0:if(n=e,n)return[3,8];s.label=1;case 1:return s.trys.push([1,6,,7]),[4,this.getRegionFromIMDS(U.IMDS_VERSION)];case 2:return i=s.sent(),i.status===qn.httpSuccess&&(n=i.body,t.region_source=lr.IMDS),i.status!==qn.httpBadRequest?[3,5]:[4,this.getCurrentVersion()];case 3:return o=s.sent(),o?[4,this.getRegionFromIMDS(o)]:(t.region_source=lr.FAILED_AUTO_DETECTION,[2,null]);case 4:a=s.sent(),a.status===qn.httpSuccess&&(n=a.body,t.region_source=lr.IMDS),s.label=5;case 5:return[3,7];case 6:return s.sent(),t.region_source=lr.FAILED_AUTO_DETECTION,[2,null];case 7:return[3,9];case 8:t.region_source=lr.ENVIRONMENT_VARIABLE,s.label=9;case 9:return n||(t.region_source=lr.FAILED_AUTO_DETECTION),[2,n||null]}})})},r.prototype.getRegionFromIMDS=function(e){return G(this,void 0,void 0,function(){return $(this,function(t){return[2,this.networkInterface.sendGetRequestAsync(U.IMDS_ENDPOINT+"?api-version="+e+"&format=text",r.IMDS_OPTIONS,U.IMDS_TIMEOUT)]})})},r.prototype.getCurrentVersion=function(){return G(this,void 0,void 0,function(){var e;return $(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.networkInterface.sendGetRequestAsync(U.IMDS_ENDPOINT+"?format=json",r.IMDS_OPTIONS)];case 1:return e=t.sent(),e.status===qn.httpBadRequest&&e.body&&e.body["newest-versions"]&&e.body["newest-versions"].length>0?[2,e.body["newest-versions"][0]]:[2,null];case 2:return t.sent(),[2,null];case 3:return[2]}})})},r.IMDS_OPTIONS={headers:{Metadata:"true"}},r}(),vT=function(){function r(e,t,n,i){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=i,this.regionDiscovery=new QM(t),this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0}}return Object.defineProperty(r.prototype,"authorityType",{get:function(){var e=this.canonicalAuthorityUrlComponents.PathSegments;return e.length&&e[0].toLowerCase()===U.ADFS?v.AuthorityType.Adfs:v.AuthorityType.Default},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"protocolMode",{get:function(){return this.authorityOptions.protocolMode},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"options",{get:function(){return this.authorityOptions},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canonicalAuthority",{get:function(){return this._canonicalAuthority.urlString},set:function(e){this._canonicalAuthority=new We(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"canonicalAuthorityUrlComponents",{get:function(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hostnameAndPort",{get:function(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tenant",{get:function(){return this.canonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"authorizationEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.authorization_endpoint);return this.replaceTenant(e)}else throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tokenEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint);return this.replaceTenant(e)}else throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"deviceCodeEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));return this.replaceTenant(e)}else throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"endSessionEndpoint",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.end_session_endpoint);return this.replaceTenant(e)}else throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selfSignedJwtAudience",{get:function(){if(this.discoveryComplete()){var e=this.replacePath(this.metadata.issuer);return this.replaceTenant(e)}else throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},enumerable:!1,configurable:!0}),r.prototype.replaceTenant=function(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)},r.prototype.replacePath=function(e){var t=e,n=new We(this.metadata.canonical_authority),i=n.getUrlComponents().PathSegments,o=this.canonicalAuthorityUrlComponents.PathSegments;return o.forEach(function(a,s){var c=i[s];a!==c&&(t=t.replace("/"+c+"/","/"+a+"/"))}),t},Object.defineProperty(r.prototype,"defaultOpenIdConfigurationEndpoint",{get:function(){return this.authorityType===v.AuthorityType.Adfs||this.protocolMode===v.ProtocolMode.OIDC?this.canonicalAuthority+".well-known/openid-configuration":this.canonicalAuthority+"v2.0/.well-known/openid-configuration"},enumerable:!1,configurable:!0}),r.prototype.discoveryComplete=function(){return!!this.metadata},r.prototype.resolveEndpointsAsync=function(){return G(this,void 0,void 0,function(){var e,t,n,i;return $(this,function(o){switch(o.label){case 0:return e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort),e||(e=new gT,e.updateCanonicalAuthority(this.canonicalAuthority)),[4,this.updateCloudDiscoveryMetadata(e)];case 1:return t=o.sent(),this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network),[4,this.updateEndpointMetadata(e)];case 2:return n=o.sent(),t!==Ot.CACHE&&n!==Ot.CACHE&&(e.resetExpiresAt(),e.updateCanonicalAuthority(this.canonicalAuthority)),i=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache),this.cacheManager.setAuthorityMetadata(i,e),this.metadata=e,[2]}})})},r.prototype.updateEndpointMetadata=function(e){var t;return G(this,void 0,void 0,function(){var n,i,o;return $(this,function(a){switch(a.label){case 0:return n=this.getEndpointMetadataFromConfig(),n?(e.updateEndpointMetadata(n,!1),[2,Ot.CONFIG]):this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!e.isExpired()?[2,Ot.CACHE]:[4,this.getEndpointMetadataFromNetwork()];case 1:return n=a.sent(),n?!((t=this.authorityOptions.azureRegionConfiguration)===null||t===void 0)&&t.azureRegion?[4,this.regionDiscovery.detectRegion(this.authorityOptions.azureRegionConfiguration.environmentRegion,this.regionDiscoveryMetadata)]:[3,3]:[3,4];case 2:i=a.sent(),o=this.authorityOptions.azureRegionConfiguration.azureRegion===U.AZURE_REGION_AUTO_DISCOVER_FLAG?i:this.authorityOptions.azureRegionConfiguration.azureRegion,this.authorityOptions.azureRegionConfiguration.azureRegion===U.AZURE_REGION_AUTO_DISCOVER_FLAG?this.regionDiscoveryMetadata.region_outcome=i?Hr.AUTO_DETECTION_REQUESTED_SUCCESSFUL:Hr.AUTO_DETECTION_REQUESTED_FAILED:i?this.regionDiscoveryMetadata.region_outcome=this.authorityOptions.azureRegionConfiguration.azureRegion===i?Hr.CONFIGURED_MATCHES_DETECTED:Hr.CONFIGURED_NOT_DETECTED:this.regionDiscoveryMetadata.region_outcome=Hr.CONFIGURED_NO_AUTO_DETECTION,o&&(this.regionDiscoveryMetadata.region_used=o,n=r.replaceWithRegionalInformation(n,o)),a.label=3;case 3:return e.updateEndpointMetadata(n,!0),[2,Ot.NETWORK];case 4:throw R.createUnableToGetOpenidConfigError(this.defaultOpenIdConfigurationEndpoint)}})})},r.prototype.isAuthoritySameType=function(e){var t=new We(e.canonical_authority),n=t.getUrlComponents().PathSegments;return n.length===this.canonicalAuthorityUrlComponents.PathSegments.length},r.prototype.getEndpointMetadataFromConfig=function(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ye.createInvalidAuthorityMetadataError()}return null},r.prototype.getEndpointMetadataFromNetwork=function(){return G(this,void 0,void 0,function(){var e;return $(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.networkInterface.sendGetRequestAsync(this.defaultOpenIdConfigurationEndpoint)];case 1:return e=t.sent(),[2,WM(e.body)?e.body:null];case 2:return t.sent(),[2,null];case 3:return[2]}})})},r.prototype.updateCloudDiscoveryMetadata=function(e){return G(this,void 0,void 0,function(){var t;return $(this,function(n){switch(n.label){case 0:return t=this.getCloudDiscoveryMetadataFromConfig(),t?(e.updateCloudDiscoveryMetadata(t,!1),[2,Ot.CONFIG]):this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!e.isExpired()?[2,Ot.CACHE]:[4,this.getCloudDiscoveryMetadataFromNetwork()];case 1:if(t=n.sent(),t)return e.updateCloudDiscoveryMetadata(t,!0),[2,Ot.NETWORK];throw ye.createUntrustedAuthorityError()}})})},r.prototype.getCloudDiscoveryMetadataFromConfig=function(){if(this.authorityOptions.cloudDiscoveryMetadata)try{var e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=r.getCloudDiscoveryMetadataFromNetworkResponse(e.metadata,this.hostnameAndPort);if(t)return t}catch{throw ye.createInvalidCloudDiscoveryMetadataError()}return this.isInKnownAuthorities()?r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort):null},r.prototype.getCloudDiscoveryMetadataFromNetwork=function(){return G(this,void 0,void 0,function(){var e,t,n,i;return $(this,function(o){switch(o.label){case 0:e=""+U.AAD_INSTANCE_DISCOVERY_ENDPT+this.canonicalAuthority+"oauth2/v2.0/authorize",t=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.networkInterface.sendGetRequestAsync(e)];case 2:return n=o.sent(),i=JM(n.body)?n.body.metadata:[],i.length===0?[2,null]:(t=r.getCloudDiscoveryMetadataFromNetworkResponse(i,this.hostnameAndPort),[3,4]);case 3:return o.sent(),[2,null];case 4:return t||(t=r.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),[2,t]}})})},r.prototype.isInKnownAuthorities=function(){var e=this,t=this.authorityOptions.knownAuthorities.filter(function(n){return We.getDomainFromUrl(n).toLowerCase()===e.hostnameAndPort});return t.length>0},r.createCloudDiscoveryMetadataFromHost=function(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}},r.getCloudDiscoveryMetadataFromNetworkResponse=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.aliases.indexOf(t)>-1)return i}return null},r.prototype.getPreferredCache=function(){if(this.discoveryComplete())return this.metadata.preferred_cache;throw R.createEndpointDiscoveryIncompleteError("Discovery incomplete.")},r.prototype.isAlias=function(e){return this.metadata.aliases.indexOf(e)>-1},r.isPublicCloudAuthority=function(e){return U.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0},r.buildRegionalAuthorityString=function(e,t,n){var i=new We(e);i.validateAsUri();var o=i.getUrlComponents(),a=t+"."+o.HostNameAndPort;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=t+"."+U.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX);var s=We.constructAuthorityUriFromObject(qe(qe({},i.getUrlComponents()),{HostNameAndPort:a})).urlString;return n?s+"?"+n:s},r.replaceWithRegionalInformation=function(e,t){return e.authorization_endpoint=r.buildRegionalAuthorityString(e.authorization_endpoint,t),e.token_endpoint=r.buildRegionalAuthorityString(e.token_endpoint,t,"allowestsrnonmsi=true"),e.end_session_endpoint=r.buildRegionalAuthorityString(e.end_session_endpoint,t),e},r}(),XM=function(){function r(){}return r.createDiscoveredInstance=function(e,t,n,i){return G(this,void 0,void 0,function(){var o,a;return $(this,function(s){switch(s.label){case 0:o=r.createInstance(e,t,n,i),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.resolveEndpointsAsync()];case 2:return s.sent(),[2,o];case 3:throw a=s.sent(),R.createEndpointDiscoveryIncompleteError(a);case 4:return[2]}})})},r.createInstance=function(e,t,n,i){if(L.isEmpty(e))throw ye.createUrlEmptyError();return new vT(e,t,n,i)},r}(),Lp=function(){function r(){this.failedRequests=[],this.errors=[],this.cacheHits=0}return r.isServerTelemetryEntity=function(e,t){var n=e.indexOf(Ne.CACHE_KEY)===0,i=!0;return t&&(i=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&i},r}(),ZM=function(){function r(){}return r.isThrottlingEntity=function(e,t){var n=!1;e&&(n=e.indexOf(Vi.THROTTLING_PREFIX)===0);var i=!0;return t&&(i=t.hasOwnProperty("throttleTime")),n&&i},r}(),eD={sendGetRequestAsync:function(){var r="Network interface - sendGetRequestAsync() has not been implemented for the Network interface.";return Promise.reject(ee.createUnexpectedError(r))},sendPostRequestAsync:function(){var r="Network interface - sendPostRequestAsync() has not been implemented for the Network interface.";return Promise.reject(ee.createUnexpectedError(r))}},tD=function(){function r(e,t){this.cacheOutcome=dt.NO_CACHE_HIT,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||U.EMPTY_STRING,this.wrapperVer=e.wrapperVer||U.EMPTY_STRING,this.telemetryCacheKey=Ne.CACHE_KEY+Je.CACHE_KEY_SEPARATOR+e.clientId}return r.prototype.generateCurrentRequestHeaderValue=function(){var e=""+this.apiId+Ne.VALUE_SEPARATOR+this.cacheOutcome,t=[this.wrapperSKU,this.wrapperVer].join(Ne.VALUE_SEPARATOR),n=this.getRegionDiscoveryFields(),i=[e,n].join(Ne.VALUE_SEPARATOR);return[Ne.SCHEMA_VERSION,i,t].join(Ne.CATEGORY_SEPARATOR)},r.prototype.generateLastRequestHeaderValue=function(){var e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Ne.VALUE_SEPARATOR),i=e.errors.slice(0,t).join(Ne.VALUE_SEPARATOR),o=e.errors.length,a=t<o?Ne.OVERFLOW_TRUE:Ne.OVERFLOW_FALSE,s=[o,a].join(Ne.VALUE_SEPARATOR);return[Ne.SCHEMA_VERSION,e.cacheHits,n,i,s].join(Ne.CATEGORY_SEPARATOR)},r.prototype.cacheFailedRequest=function(e){var t=this.getLastRequests();t.errors.length>=Ne.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),L.isEmpty(e.subError)?L.isEmpty(e.errorCode)?!!e&&e.toString()?t.errors.push(e.toString()):t.errors.push(Ne.UNKNOWN_ERROR):t.errors.push(e.errorCode):t.errors.push(e.subError),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)},r.prototype.incrementCacheHits=function(){var e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits},r.prototype.getLastRequests=function(){var e=new Lp,t=this.cacheManager.getServerTelemetry(this.telemetryCacheKey);return t||e},r.prototype.clearTelemetryCache=function(){var e=this.getLastRequests(),t=r.maxErrorsToSend(e),n=e.errors.length;if(t===n)this.cacheManager.removeItem(this.telemetryCacheKey);else{var i=new Lp;i.failedRequests=e.failedRequests.slice(t*2),i.errors=e.errors.slice(t),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,i)}},r.maxErrorsToSend=function(e){var t,n=0,i=0,o=e.errors.length;for(t=0;t<o;t++){var a=e.failedRequests[2*t]||U.EMPTY_STRING,s=e.failedRequests[2*t+1]||U.EMPTY_STRING,c=e.errors[t]||U.EMPTY_STRING;if(i+=a.toString().length+s.toString().length+c.length+3,i<Ne.MAX_LAST_HEADER_BYTES)n+=1;else break}return n},r.prototype.getRegionDiscoveryFields=function(){var e=[];return e.push(this.regionUsed||""),e.push(this.regionSource||""),e.push(this.regionOutcome||""),e.join(",")},r.prototype.updateRegionDiscoveryMetadata=function(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome},r.prototype.setCacheOutcome=function(e){this.cacheOutcome=e},r}();v.AccessTokenEntity=lT;v.AccountEntity=pr;v.AppMetadataEntity=fT;v.AuthError=ee;v.AuthErrorMessage=Np;v.AuthToken=Gt;v.Authority=vT;v.AuthorityFactory=XM;v.AuthorityMetadataEntity=gT;v.AuthorizationCodeClient=HM;v.CacheManager=oT;v.ClientAuthError=R;v.ClientAuthErrorMessage=_;v.ClientConfigurationError=ye;v.ClientConfigurationErrorMessage=Z;v.ClientCredentialClient=$M;v.Constants=U;v.CredentialEntity=Fn;v.DEFAULT_CRYPTO_IMPLEMENTATION=Mp;v.DEFAULT_SYSTEM_OPTIONS=sT;v.DefaultStorageClass=aT;v.DeviceCodeClient=GM;v.IdToken=Gt;v.IdTokenEntity=uT;v.InteractionRequiredAuthError=Gi;v.Logger=nT;v.NetworkManager=cT;v.OIDC_DEFAULT_SCOPES=Bp;v.OnBehalfOfClient=VM;v.PromptValue=jn;v.ProtocolUtils=dT;v.RefreshTokenClient=mT;v.RefreshTokenEntity=pT;v.ServerError=zn;v.ServerTelemetryEntity=Lp;v.ServerTelemetryManager=tD;v.SilentFlowClient=KM;v.StringUtils=L;v.StubbedNetworkModule=eD;v.ThrottlingEntity=ZM;v.ThrottlingUtils=Dp;v.TimeUtils=Ee;v.TokenCacheContext=hT;v.UrlString=We;v.UsernamePasswordClient=YM});var Fp=g((oj,CT)=>{"use strict";var ET=require("fs"),jp;function rD(){try{return ET.statSync("/.dockerenv"),!0}catch{return!1}}function nD(){try{return ET.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}CT.exports=()=>(jp===void 0&&(jp=rD()||nD()),jp)});var wT=g((aj,zp)=>{"use strict";var iD=require("os"),oD=require("fs"),TT=Fp(),bT=()=>{if(process.platform!=="linux")return!1;if(iD.release().toLowerCase().includes("microsoft"))return!TT();try{return oD.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!TT():!1}catch{return!1}};process.env.__IS_WSL_TEST__?zp.exports=bT:zp.exports=bT()});var IT=g((sj,xT)=>{"use strict";xT.exports=(r,e,t)=>{let n=i=>Object.defineProperty(r,e,{value:i,enumerable:!0,writable:!0});return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get(){let i=t();return n(i),i},set(i){n(i)}}),r}});var kT=g((cj,OT)=>{var aD=require("path"),sD=require("child_process"),{promises:Hp,constants:RT}=require("fs"),Is=wT(),cD=Fp(),Gp=IT(),_T=aD.join(__dirname,"xdg-open"),{platform:Hn,arch:ST}=process,uD=(()=>{let r="/mnt/",e;return async function(){if(e)return e;let t="/etc/wsl.conf",n=!1;try{await Hp.access(t,RT.F_OK),n=!0}catch{}if(!n)return r;let i=await Hp.readFile(t,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):r}})(),AT=async(r,e)=>{let t;for(let n of r)try{return await e(n)}catch(i){t=i}throw t},_s=async r=>{if(r={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...r},Array.isArray(r.app))return AT(r.app,s=>_s({...r,app:s}));let{name:e,arguments:t=[]}=r.app||{};if(t=[...t],Array.isArray(e))return AT(e,s=>_s({...r,app:{name:s,arguments:t}}));let n,i=[],o={};if(Hn==="darwin")n="open",r.wait&&i.push("--wait-apps"),r.background&&i.push("--background"),r.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Hn==="win32"||Is&&!cD()){let s=await uD();n=Is?`${s}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),Is||(o.windowsVerbatimArguments=!0);let c=["Start"];r.wait&&c.push("-Wait"),e?(c.push(`"\`"${e}\`""`,"-ArgumentList"),r.target&&t.unshift(r.target)):r.target&&c.push(`"${r.target}"`),t.length>0&&(t=t.map(u=>`"\`"${u}\`""`),c.push(t.join(","))),r.target=Buffer.from(c.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let s=!__dirname||__dirname==="/",c=!1;try{await Hp.access(_T,RT.X_OK),c=!0}catch{}n=process.versions.electron||Hn==="android"||s||!c?"xdg-open":_T}t.length>0&&i.push(...t),r.wait||(o.stdio="ignore",o.detached=!0)}r.target&&i.push(r.target),Hn==="darwin"&&t.length>0&&i.push("--args",...t);let a=sD.spawn(n,i,o);return r.wait?new Promise((s,c)=>{a.once("error",c),a.once("close",u=>{if(r.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}s(a)})}):(a.unref(),a)},$p=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `target`");return _s({...e,target:r})},lD=(r,e)=>{if(typeof r!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=e||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return _s({...e,app:{name:r,arguments:t}})};function PT(r){if(typeof r=="string"||Array.isArray(r))return r;let{[ST]:e}=r;if(!e)throw new Error(`${ST} is not supported`);return e}function Vp({[Hn]:r},{wsl:e}){if(e&&Is)return PT(e);if(!r)throw new Error(`${Hn} is not supported`);return PT(r)}var Ss={};Gp(Ss,"chrome",()=>Vp({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Gp(Ss,"firefox",()=>Vp({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Gp(Ss,"edge",()=>Vp({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));$p.apps=Ss;$p.openApp=lD;OT.exports=$p});var MT=g((uj,NT)=>{"use strict";var pD=require("https");NT.exports=(r,e)=>{e=typeof e>"u"?1/0:e;let t=new Map,n=!1,i=!0;return r instanceof pD.Server?r.on("secureConnection",o):r.on("connection",o),r.on("request",a),r.stop=s,r._pendingSockets=t,r;function o(l){t.set(l,0),l.once("close",()=>t.delete(l))}function a(l,p){t.set(l.socket,t.get(l.socket)+1),p.once("finish",()=>{let d=t.get(l.socket)-1;t.set(l.socket,d),n&&d===0&&l.socket.end()})}function s(l){setImmediate(()=>{n=!0,e<1/0&&setTimeout(u,e).unref(),r.close(p=>{l&&l(p,i)}),t.forEach(c)})}function c(l,p){l===0&&p.end()}function u(){i=!1,t.forEach((l,p)=>p.end()),setImmediate(()=>{t.forEach((l,p)=>p.destroy())})}}});var ob=g(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var dD=bv(),gt=Vy(),fD=XC(),Ed=sp(),Ce=_p(),$T=mp(),hD=cs(),mD=yT(),gD=pi(),Cd=require("fs"),vD=require("os"),yD=require("path"),VT=require("child_process"),ED=require("crypto"),KT=require("util"),CD=require("https"),TD=require("http"),bD=kT(),wD=MT();function gr(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}function Td(r){if(r&&r.__esModule)return r;var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}var Xp=Td(dD),As=Td(mD),YT=gr(Cd),xD=gr(vD),ID=gr(yD),_D=gr(VT),SD=Td(VT),AD=gr(CD),PD=gr(TD),RD=gr(bD),OD=gr(wD);function kD(r){return r&&typeof r.error=="string"&&typeof r.error_description=="string"}var WT="CredentialUnavailableError",ue=class extends Error{constructor(e){super(e),this.name=WT}},bd="AuthenticationError",mr=class extends Error{constructor(e,t){let n={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(kD(t))n=DT(t);else if(typeof t=="string")try{let i=JSON.parse(t);n=DT(i)}catch{e===400?n={error:"authority_not_found",errorDescription:"The specified authority URL was not found."}:n={error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:

${t}`}}else n={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${n.error} Status code: ${e}
More details:
${n.errorDescription}`),this.statusCode=e,this.errorResponse=n,this.name=bd}},JT="AggregateAuthenticationError",Ns=class extends Error{constructor(e,t){let n=e.join(`
`);super(`${t}
${n}`),this.errors=e,this.name=JT}};function DT(r){return{error:r.error,errorDescription:r.error_description,correlationId:r.correlation_id,errorCodes:r.error_codes,timestamp:r.timestamp,traceId:r.trace_id}}var Jr=class extends Error{constructor(e){super(e.message),this.scopes=e.scopes,this.getTokenOptions=e.getTokenOptions,this.name="AuthenticationRequiredError"}};function ND(r){return r==="adfs"?"oauth2/token":"oauth2/v2.0/token"}var Zp="04b07795-8ddb-461a-bbee-02f9e1bf7b46",MD="common";J.AzureAuthorityHosts=void 0;(function(r){r.AzureChina="https://login.chinacloudapi.cn",r.AzureGermany="https://login.microsoftonline.de",r.AzureGovernment="https://login.microsoftonline.us",r.AzurePublicCloud="https://login.microsoftonline.com"})(J.AzureAuthorityHosts||(J.AzureAuthorityHosts={}));var wd=J.AzureAuthorityHosts.AzurePublicCloud,Qr=gt.createSpanFunction({packagePrefix:"",namespace:"Microsoft.AAD"});async function vt(r,e,t,n=Qr){let{updatedOptions:i,span:o}=n(r,e);try{let a=await t(i,o);return o.setStatus({code:gt.SpanStatusCode.OK}),a}catch(a){throw o.setStatus({code:gt.SpanStatusCode.ERROR,message:a.message}),a}finally{o.end()}}var Nt=hD.createClientLogger("identity");function DD(r){return r.reduce((e,t)=>(process.env[t]?e.assigned.push(t):e.missing.push(t),e),{missing:[],assigned:[]})}function vr(r){return`SUCCESS. Scopes: ${Array.isArray(r)?r.join(", "):r}.`}function le(r,e){let t="ERROR.";return r?.length&&(t+=` Scopes: ${Array.isArray(r)?r.join(", "):r}.`),`${t} Error message: ${typeof e=="string"?e:e.message}.`}function UT(r,e,t=Nt){let n=e?`${e.fullTitle} ${r}`:r;function i(a){t.info(`${n} =>`,a)}function o(a){t.warning(`${n} =>`,a)}return{title:r,fullTitle:n,info:i,warning:o}}function be(r,e=Nt){let t=UT(r,void 0,e);return Object.assign(Object.assign({},t),{parent:e,getToken:UT("=> getToken()",t,e)})}var Yi="noCorrelationId";function UD(r){let e=r?.authorityHost;return Ed.isNode&&(e=e??process.env.AZURE_AUTHORITY_HOST),e??wd}var $n=class extends fD.ServiceClient{constructor(e){var t;let n="azsdk-js-identity/2.0.4",i=!((t=e?.userAgentOptions)===null||t===void 0)&&t.userAgentPrefix?`${e.userAgentOptions.userAgentPrefix} ${n}`:`${n}`,o=UD(e);if(!o.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.");super(Object.assign(Object.assign({requestContentType:"application/json; charset=utf-8",retryOptions:{maxRetries:3}},e),{userAgentOptions:{userAgentPrefix:i},baseUri:o})),this.authorityHost=o,this.abortControllers=new Map}async sendTokenRequest(e,t){Nt.info(`IdentityClient: sending token request to [${e.url}]`);let n=await this.sendRequest(e);if(t=t||(i=>Date.now()+i.expires_in*1e3),n.bodyAsText&&(n.status===200||n.status===201)){let i=JSON.parse(n.bodyAsText);if(!i.access_token)return null;let o={accessToken:{token:i.access_token,expiresOnTimestamp:t(i)},refreshToken:i.refresh_token};return Nt.info(`IdentityClient: [${e.url}] token acquired, expires on ${o.accessToken.expiresOnTimestamp}`),o}else{let i=new mr(n.status,n.bodyAsText);throw Nt.warning(`IdentityClient: authentication error. HTTP status: ${n.status}, ${i.errorResponse.errorDescription}`),i}}async refreshAccessToken(e,t,n,i,o,a,s){if(i===void 0)return null;Nt.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${n} started`);let{span:c,updatedOptions:u}=Qr("IdentityClient-refreshAccessToken",s),l={grant_type:"refresh_token",client_id:t,refresh_token:i,scope:n};o!==void 0&&(l.client_secret=o);let p=new URLSearchParams(l);try{let d=ND(e),f=Ce.createPipelineRequest({url:`${this.authorityHost}/${e}/${d}`,method:"POST",body:p.toString(),abortSignal:s&&s.abortSignal,headers:Ce.createHttpHeaders({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),tracingOptions:u?.tracingOptions}),m=await this.sendTokenRequest(f,a);return Nt.info(`IdentityClient: refreshed token for client ID: ${t}`),m}catch(d){if(d.name===bd&&d.errorResponse.error==="interaction_required")return Nt.info(`IdentityClient: interaction required for client ID: ${t}`),c.setStatus({code:gt.SpanStatusCode.ERROR,message:d.message}),null;throw Nt.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${d}`),c.setStatus({code:gt.SpanStatusCode.ERROR,message:d.message}),d}finally{c.end()}}generateAbortSignal(e){let t=new $T.AbortController,n=this.abortControllers.get(e)||[];n.push(t),this.abortControllers.set(e,n);let i=t.signal.onabort;return t.signal.onabort=(...o)=>{this.abortControllers.set(e,void 0),i&&i(...o)},t.signal}abortRequests(e){let t=e||Yi,n=[...this.abortControllers.get(t)||[],...this.abortControllers.get(Yi)||[]];if(!!n.length){for(let i of n)i.abort();this.abortControllers.set(t,void 0)}}getCorrelationId(e){var t;let n=(t=e?.body)===null||t===void 0?void 0:t.split("&").map(i=>i.split("=")).find(([i])=>i==="client-request-id");return n&&n.length&&n[1]||Yi}async sendGetRequestAsync(e,t){let n=Ce.createPipelineRequest({url:e,method:"GET",body:t?.body,headers:Ce.createHttpHeaders(t?.headers),abortSignal:this.generateAbortSignal(Yi)}),i=await this.sendRequest(n);return{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}async sendPostRequestAsync(e,t){let n=Ce.createPipelineRequest({url:e,method:"POST",body:t?.body,headers:Ce.createHttpHeaders(t?.headers),abortSignal:this.generateAbortSignal(this.getCorrelationId(t))}),i=await this.sendRequest(n);return{body:i.bodyAsText?JSON.parse(i.bodyAsText):void 0,headers:i.headers.toJSON(),status:i.status}}};function Vn(r,e){if(!e.match(/^[0-9a-zA-Z-.:/]+$/)){let t=new Error("Invalid tenant id provided. You can locate your tenant id by following the instructions listed here: https://docs.microsoft.com/partner-center/find-ids-and-domain-names.");throw r.info(le("",t)),t}}function LT(r,e,t){return e?(Vn(r,e),e):(t||(t=Zp),t!==Zp?"common":"organizations")}var QT="1.0";function LD(r,e,t,n){let i=o=>(e.getToken.info(o),new Jr({scopes:Array.isArray(r)?r:[r],getTokenOptions:n,message:o}));if(!t)throw i("No response");if(!t.expiresOn)throw i('Response had no "expiresOn" property.');if(!t.accessToken)throw i('Response had no "accessToken" property.')}function ed(r,e){return e||(e=wd),new RegExp(`${r}/?$`).test(e)?e:e.endsWith("/")?e+r:`${e}/${r}`}function BD(r,e){return r==="adfs"&&e?[e]:[]}var qD=(r,e=Ed.isNode?"Node":"Browser")=>(t,n,i)=>{if(!i)switch(t){case As.LogLevel.Error:r.info(`MSAL ${e} V2 error: ${n}`);return;case As.LogLevel.Info:r.info(`MSAL ${e} V2 info message: ${n}`);return;case As.LogLevel.Verbose:r.info(`MSAL ${e} V2 verbose message: ${n}`);return;case As.LogLevel.Warning:r.info(`MSAL ${e} V2 warning: ${n}`);return}},td=class{constructor(e){this.logger=e.logger,this.account=e.authenticationRecord}generateUuid(){return gD.v4()}handleResult(e,t,n,i){return n?.account&&(this.account=xd(t,n.account)),LD(e,this.logger,n,i),this.logger.getToken.info(vr(e)),{token:n.accessToken,expiresOnTimestamp:n.expiresOn.getTime()}}handleError(e,t,n){if(t.name==="AuthError"||t.name==="ClientAuthError"||t.name==="BrowserAuthError"){let i=t;switch(i.errorCode){case"endpoints_resolution_error":return this.logger.info(le(e,t.message)),new ue(t.message);case"device_code_polling_cancelled":return new $T.AbortError("The authentication has been aborted by the caller.");case"consent_required":case"interaction_required":case"login_required":this.logger.info(le(e,`Authentication returned errorCode ${i.errorCode}`));break;default:this.logger.info(le(e,`Failed to acquire token: ${t.message}`));break}}return t.name==="ClientConfigurationError"||t.name==="BrowserConfigurationAuthError"||t.name==="AbortError"?t:new Jr({scopes:e,getTokenOptions:n,message:t.message})}};function jD(r){let[e]=r.authority.match(/([a-z]*\.[a-z]*\.[a-z]*)/)||[];return Object.assign(Object.assign({},r),{localAccountId:r.homeAccountId,environment:e})}function xd(r,e){return{authority:ed(e.tenantId,e.environment),homeAccountId:e.homeAccountId,tenantId:e.tenantId||MD,username:e.username,clientId:r,version:QT}}function FD(r){return JSON.stringify(r)}function zD(r){let e=JSON.parse(r);if(e.version&&e.version!==QT)throw Error("Unsupported AuthenticationRecord version");return e}var HD="A getToken request was attempted with a tenant different than the tenant configured at the initialization of the credential, but multi-tenant authentication has been disabled by the environment variable AZURE_IDENTITY_DISABLE_MULTITENANTAUTH.",GD="A new tenant Id can't be assigned through the GetTokenOptions when a credential has been originally configured to use the tenant `adfs`.";function Hs(r,e){if(!e?.tenantId)return r;if(process.env.AZURE_IDENTITY_DISABLE_MULTITENANTAUTH)throw new Error(HD);if(r==="adfs")throw new Error(GD);return e?.tenantId}var rd;(function(r){r.AutoDiscoverRegion="AutoDiscoverRegion",r.USWest="westus",r.USWest2="westus2",r.USCentral="centralus",r.USEast="eastus",r.USEast2="eastus2",r.USNorthCentral="northcentralus",r.USSouthCentral="southcentralus",r.USWestCentral="westcentralus",r.CanadaCentral="canadacentral",r.CanadaEast="canadaeast",r.BrazilSouth="brazilsouth",r.EuropeNorth="northeurope",r.EuropeWest="westeurope",r.UKSouth="uksouth",r.UKWest="ukwest",r.FranceCentral="francecentral",r.FranceSouth="francesouth",r.SwitzerlandNorth="switzerlandnorth",r.SwitzerlandWest="switzerlandwest",r.GermanyNorth="germanynorth",r.GermanyWestCentral="germanywestcentral",r.NorwayWest="norwaywest",r.NorwayEast="norwayeast",r.AsiaEast="eastasia",r.AsiaSouthEast="southeastasia",r.JapanEast="japaneast",r.JapanWest="japanwest",r.AustraliaEast="australiaeast",r.AustraliaSouthEast="australiasoutheast",r.AustraliaCentral="australiacentral",r.AustraliaCentral2="australiacentral2",r.IndiaCentral="centralindia",r.IndiaSouth="southindia",r.IndiaWest="westindia",r.KoreaSouth="koreasouth",r.KoreaCentral="koreacentral",r.UAECentral="uaecentral",r.UAENorth="uaenorth",r.SouthAfricaNorth="southafricanorth",r.SouthAfricaWest="southafricawest",r.ChinaNorth="chinanorth",r.ChinaEast="chinaeast",r.ChinaNorth2="chinanorth2",r.ChinaEast2="chinaeast2",r.GermanyCentral="germanycentral",r.GermanyNorthEast="germanynortheast",r.GovernmentUSVirginia="usgovvirginia",r.GovernmentUSIowa="usgoviowa",r.GovernmentUSArizona="usgovarizona",r.GovernmentUSTexas="usgovtexas",r.GovernmentUSDodEast="usdodeast",r.GovernmentUSDodCentral="usdodcentral"})(rd||(rd={}));var nd,$D={setPersistence(r){nd=r}},Vt=class extends td{constructor(e){var t,n,i;if(super(e),this.requiresConfidential=!1,this.msalConfig=this.defaultNodeMsalConfig(e),this.tenantId=LT(e.logger,e.tenantId,e.clientId),this.clientId=this.msalConfig.auth.clientId,nd!==void 0&&((t=e.tokenCachePersistenceOptions)===null||t===void 0?void 0:t.enabled))this.createCachePlugin=()=>nd(e.tokenCachePersistenceOptions);else if(!((n=e.tokenCachePersistenceOptions)===null||n===void 0)&&n.enabled)throw new Error(["Persistent token caching was requested, but no persistence provider was configured.","You must install the identity-cache-persistence plugin package (`npm install --save @azure/identity-cache-persistence`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(cachePersistencePlugin)` before using `tokenCachePersistenceOptions`."].join(" "));this.azureRegion=(i=e.regionalAuthority)!==null&&i!==void 0?i:process.env.AZURE_REGIONAL_AUTHORITY_NAME,this.azureRegion===rd.AutoDiscoverRegion&&(this.azureRegion="AUTO_DISCOVER")}defaultNodeMsalConfig(e){let t=e.clientId||Zp,n=LT(e.logger,e.tenantId,e.clientId);this.authorityHost=e.authorityHost||process.env.AZURE_AUTHORITY_HOST;let i=ed(n,this.authorityHost);this.identityClient=new $n(Object.assign(Object.assign({},e.tokenCredentialOptions),{authorityHost:i}));let o=["cp1"];return process.env.AZURE_IDENTITY_DISABLE_CP1&&(o=[]),{auth:{clientId:t,authority:i,knownAuthorities:BD(n,i),clientCapabilities:o},system:{networkClient:this.identityClient,loggerOptions:{loggerCallback:qD(e.logger)}}}}async init(e){if(e?.abortSignal&&e.abortSignal.addEventListener("abort",()=>{this.identityClient.abortRequests(e.correlationId)}),!(this.publicApp||this.confidentialApp)){if(this.createCachePlugin!==void 0&&(this.msalConfig.cache={cachePlugin:await this.createCachePlugin()}),this.publicApp=new Xp.PublicClientApplication(this.msalConfig),this.msalConfig.auth.clientSecret||this.msalConfig.auth.clientAssertion||this.msalConfig.auth.clientCertificate)this.confidentialApp=new Xp.ConfidentialClientApplication(this.msalConfig);else if(this.requiresConfidential)throw new Error("Unable to generate the MSAL confidential client. Missing either the client's secret, certificate or assertion.")}}withCancellation(e,t,n){return new Promise((i,o)=>{e.then(a=>i(a)).catch(o),t&&t.addEventListener("abort",()=>{n?.()})})}async getActiveAccount(){var e,t,n;if(this.account)return this.account;let i=(t=(e=this.confidentialApp)===null||e===void 0?void 0:e.getTokenCache())!==null&&t!==void 0?t:(n=this.publicApp)===null||n===void 0?void 0:n.getTokenCache(),o=await i?.getAllAccounts();if(!!o){if(o.length===1)this.account=xd(this.clientId,o[0]);else{this.logger.info(`More than one account was found authenticated for this Client ID and Tenant ID.
However, no "authenticationRecord" has been provided for this credential,
therefore we're unable to pick between these accounts.
A new login attempt will be requested, to ensure the correct account is picked.
To work with multiple accounts for the same Client ID and Tenant ID, please provide an "authenticationRecord" when initializing a credential to prevent this from happening.`);return}return this.account}}async getTokenSilent(e,t){var n,i;if(await this.getActiveAccount(),!this.account)throw new Jr({scopes:e,getTokenOptions:t,message:"Silent authentication failed. We couldn't retrieve an active account from the cache."});let o={account:jD(this.account),correlationId:t?.correlationId,scopes:e,authority:t?.authority,claims:t?.claims};try{this.logger.info("Attempting to acquire token silently");let a=(i=await((n=this.confidentialApp)===null||n===void 0?void 0:n.acquireTokenSilent(o)))!==null&&i!==void 0?i:await this.publicApp.acquireTokenSilent(o);return this.handleResult(e,this.clientId,a||void 0)}catch(a){throw this.handleError(e,a,t)}}async getToken(e,t={}){let n=Hs(this.tenantId,t)||this.tenantId;t.authority=ed(n,this.authorityHost),t.correlationId=t?.correlationId||this.generateUuid(),await this.init(t);try{return await this.getTokenSilent(e,t)}catch(i){if(i.name!=="AuthenticationRequiredError")throw i;if(t?.disableAutomaticAuthentication)throw new Jr({scopes:e,getTokenOptions:t,message:"Automatic authentication has been disabled. You may call the authentication() method."});return this.logger.info("Silent authentication failed, falling back to interactive method."),this.doGetToken(e,t)}}},VD="common",KD="aebc6443-996d-45c2-90f0-388ff96faa56",Gn=be("VisualStudioCodeCredential"),id,YD={setVsCodeCredentialFinder(r){id=r}},WD={adfs:"The VisualStudioCodeCredential does not support authentication with ADFS tenants."};function BT(r){let e=WD[r];if(e)throw new ue(e)}var JD={AzureCloud:J.AzureAuthorityHosts.AzurePublicCloud,AzureChina:J.AzureAuthorityHosts.AzureChina,AzureGermanCloud:J.AzureAuthorityHosts.AzureGermany,AzureUSGovernment:J.AzureAuthorityHosts.AzureGovernment};function qT(r){let e=["User","settings.json"],t="Code",n=xD.default.homedir();function i(...o){let a=ID.default.join(...o,t,...e);return JSON.parse(YT.default.readFileSync(a,{encoding:"utf8"}))[r]}try{let o;switch(process.platform){case"win32":return o=process.env.APPDATA,o?i(o):void 0;case"darwin":return i(n,"Library","Application Support");case"linux":return i(n,".config");default:return}}catch(o){Gn.info(`Failed to load the Visual Studio Code configuration file. Error: ${o.message}`);return}}var Ms=class{constructor(e){this.cloudName=qT("azure.cloud")||"AzureCloud";let t=JD[this.cloudName];this.identityClient=new $n(Object.assign({authorityHost:t},e)),e&&e.tenantId?(Vn(Gn,e.tenantId),this.tenantId=e.tenantId):this.tenantId=VD,BT(this.tenantId)}async prepare(){let e=qT("azure.tenant");e&&(this.tenantId=e),BT(this.tenantId)}prepareOnce(){return this.preparePromise||(this.preparePromise=this.prepare()),this.preparePromise}async getToken(e,t){var n,i;await this.prepareOnce();let o=Hs(this.tenantId,t)||this.tenantId;if(id===void 0)throw new ue(["No implementation of `VisualStudioCodeCredential` is available.","You must install the identity-vscode plugin package (`npm install --save-dev @azure/identity-vscode`)","and enable it by importing `useIdentityPlugin` from `@azure/identity` and calling","`useIdentityPlugin(vsCodePlugin)` before creating a `VisualStudioCodeCredential`."].join(" "));let a=typeof e=="string"?e:e.join(" ");if(!a.match(/^[0-9a-zA-Z-.:/]+$/)){let u=new Error("Invalid scope was specified by the user or calling client");throw Gn.getToken.info(le(e,u)),u}a.indexOf("offline_access")<0&&(a+=" offline_access");let s=await id(),{password:c}=(i=(n=s.find(({account:u})=>u===this.cloudName))!==null&&n!==void 0?n:s[0])!==null&&i!==void 0?i:{};if(c){let u=await this.identityClient.refreshAccessToken(o,KD,a,c,void 0);if(u)return Gn.getToken.info(vr(e)),u.accessToken;{let l=new ue("Could not retrieve the token associated with Visual Studio Code. Have you connected using the 'Azure Account' extension recently? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw Gn.getToken.info(le(e,l)),l}}else{let u=new ue("Could not retrieve the token associated with Visual Studio Code. Did you connect using the 'Azure Account' extension? To troubleshoot, visit https://aka.ms/azsdk/js/identity/vscodecredential/troubleshoot.");throw Gn.getToken.info(le(e,u)),u}}},QD={cachePluginControl:$D,vsCodeCredentialControl:YD};function XD(r){r(QD)}var Kp=be("ChainedTokenCredential"),Ds=class{constructor(...e){this.UnavailableMessage="ChainedTokenCredential => failed to retrieve a token from the included credentials",this._sources=[],this._sources=e}async getToken(e,t){let n=null,i="",o=[],{span:a,updatedOptions:s}=Qr("ChainedTokenCredential.getToken",t);for(let c=0;c<this._sources.length&&n===null;c++)try{n=await this._sources[c].getToken(e,s),i=this._sources[c].constructor.name}catch(u){if(u.name==="CredentialUnavailableError"||u.name==="AuthenticationRequiredError")o.push(u);else throw Kp.getToken.info(le(e,u)),u}if(!n&&o.length>0){let c=new Ns(o,"ChainedTokenCredential authentication failed.");throw a.setStatus({code:gt.SpanStatusCode.ERROR,message:c.message}),Kp.getToken.info(le(e,c)),c}if(a.end(),Kp.getToken.info(`Result for ${i}: ${vr(e)}`),n===null)throw new ue("Failed to retrieve a valid token");return n}};function XT(r,e){if(!r.match(/^[0-9a-zA-Z-.:/]+$/)){let t=new Error("Invalid scope was specified by the user or calling client");throw e.getToken.info(le(r,t)),t}}function ZT(r){return r.replace(/\/.default$/,"")}var eb={getSafeWorkingDir(){if(process.platform==="win32"){if(!process.env.SystemRoot)throw new Error("Azure CLI credential expects a 'SystemRoot' environment variable");return process.env.SystemRoot}else return"/bin"},async getAzureCliAccessToken(r,e){let t=[];return e&&(t=["--tenant",e]),new Promise((n,i)=>{try{_D.default.execFile("az",["account","get-access-token","--output","json","--resource",r,...t],{cwd:eb.getSafeWorkingDir(),shell:!0},(o,a,s)=>{n({stdout:a,stderr:s,error:o})})}catch(o){i(o)}})}},fr=be("AzureCliCredential"),Us=class{constructor(e){this.tenantId=e?.tenantId}async getToken(e,t){let n=Hs(this.tenantId,t);n&&Vn(fr,n);let i=typeof e=="string"?e:e[0];fr.getToken.info(`Using the scope ${i}`),XT(i,fr);let o=ZT(i),a="",{span:s}=Qr(`${this.constructor.name}.getToken`,t);try{let c=await eb.getAzureCliAccessToken(o,n);if(c.stderr){let u=c.stderr.match("(.*)az login(.*)");if(c.stderr.match("az:(.*)not found")||c.stderr.startsWith("'az' is not recognized")){let d=new ue("Azure CLI could not be found.  Please visit https://aka.ms/azure-cli for installation instructions and then, once installed, authenticate to your Azure account using 'az login'.");throw fr.getToken.info(le(e,d)),d}else if(u){let d=new ue("Please run 'az login' from a command prompt to authenticate before using this credential.");throw fr.getToken.info(le(e,d)),d}let p=new ue(c.stderr);throw fr.getToken.info(le(e,p)),p}else{a=c.stdout;let u=JSON.parse(a);return fr.getToken.info(vr(e)),{token:u.accessToken,expiresOnTimestamp:new Date(u.expiresOn).getTime()}}}catch(c){let u=new Error(c.message||"Unknown error while trying to retrieve the access token");throw s.setStatus({code:gt.SpanStatusCode.ERROR,message:u.message}),fr.getToken.info(le(e,u)),u}}},ZD={execFile(r,e,t){return new Promise((n,i)=>{SD.execFile(r,e,t,(o,a,s)=>{Buffer.isBuffer(a)&&(a=a.toString("utf8")),Buffer.isBuffer(s)&&(s=s.toString("utf8")),s||o?i(s?new Error(s):o):n(a)})})}},Vr=be("AzurePowerShellCredential"),tb=process.platform==="win32";function rb(r){return tb?`${r}.exe`:r}async function jT(r){let e=[];for(let t of r){let[n,...i]=t,o=await ZD.execFile(n,i,{encoding:"utf8"});e.push(o)}return e}var nb={login:"Run Connect-AzAccount to login",installed:"The specified module 'Az.Accounts' with version '2.2.0' was not loaded because no valid module file was found in any module directory"},Yp={login:"Please run 'Connect-AzAccount' from PowerShell to authenticate before using this credential.",installed:`The 'Az.Account' module >= 2.2.0 is not installed. Install the Azure Az PowerShell module with: "Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force".`,troubleshoot:"To troubleshoot, visit https://aka.ms/azsdk/js/identity/powershellcredential/troubleshoot."},eU=r=>r.message.match(`(.*)${nb.login}(.*)`),tU=r=>r.message.match(nb.installed),od=[rb("pwsh")];tb&&od.push(rb("powershell"));var Ls=class{constructor(e){this.tenantId=e?.tenantId}async getAzurePowerShellAccessToken(e,t){for(let n of[...od]){try{await jT([[n,"/?"]])}catch{od.shift();continue}let i="";t&&(i=`-TenantId "${t}"`);let a=(await jT([[n,"-Command","Import-Module Az.Accounts -MinimumVersion 2.2.0 -PassThru"],[n,"-Command",`Get-AzAccessToken ${i} -ResourceUrl "${e}" | ConvertTo-Json`]]))[1];try{return JSON.parse(a)}catch{throw new Error(`Unable to parse the output of PowerShell. Received output: ${a}`)}}throw new Error("Unable to execute PowerShell. Ensure that it is installed in your system")}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async()=>{let n=Hs(this.tenantId,t);n&&Vn(Vr,n);let i=typeof e=="string"?e:e[0];XT(i,Vr),Vr.getToken.info(`Using the scope ${i}`);let o=ZT(i);try{let a=await this.getAzurePowerShellAccessToken(o,n);return Vr.getToken.info(vr(e)),{token:a.Token,expiresOnTimestamp:new Date(a.ExpiresOn).getTime()}}catch(a){if(tU(a)){let c=new ue(Yp.installed);throw Vr.getToken.info(le(i,c)),c}else if(eU(a)){let c=new ue(Yp.login);throw Vr.getToken.info(le(i,c)),c}let s=new ue(`${a}. ${Yp.troubleshoot}`);throw Vr.getToken.info(le(i,s)),s}})}},ad=class extends Vt{constructor(e){super(e),this.requiresConfidential=!0,this.msalConfig.auth.clientSecret=e.clientSecret}async doGetToken(e,t={}){try{let n=await this.confidentialApp.acquireTokenByClientCredential({scopes:e,correlationId:t.correlationId,azureRegion:this.azureRegion,authority:t.authority,claims:t.claims});return this.handleResult(e,this.clientId,n||void 0)}catch(n){throw this.handleError(e,n,t)}}},rU=be("ClientSecretCredential"),Bs=class{constructor(e,t,n,i={}){if(!e||!t||!n)throw new Error("ClientSecretCredential: tenantId, clientId, and clientSecret are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.");this.msalFlow=new ad(Object.assign(Object.assign({},i),{logger:rU,clientId:t,tenantId:e,clientSecret:n,tokenCredentialOptions:i}))}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,n)})}},nU=KT.promisify(Cd.readFile);async function ib(r,e){let t={};t.certificateContents=r.certificate||await nU(r.certificatePath,"utf8"),e&&(t.x5c=t.certificateContents);let n=/(-+BEGIN CERTIFICATE-+)(\n\r?|\r\n?)([A-Za-z0-9+/\n\r]+=*)(\n\r?|\r\n?)(-+END CERTIFICATE-+)/g,i=[],o;do o=n.exec(t.certificateContents),o&&i.push(o[3]);while(o);if(i.length===0)throw new Error("The file at the specified path does not contain a PEM-encoded certificate.");return t.thumbprint=ED.createHash("sha1").update(Buffer.from(i[0],"base64")).digest("hex").toUpperCase(),t}var sd=class extends Vt{constructor(e){super(e),this.requiresConfidential=!0,this.configuration=e.configuration,this.sendCertificateChain=e.sendCertificateChain}async init(e){try{let t=await ib(this.configuration,this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:t.thumbprint,privateKey:t.certificateContents,x5c:t.x5c}}catch(t){throw this.logger.info(le("",t)),t}return super.init(e)}async doGetToken(e,t={}){try{let n=await this.confidentialApp.acquireTokenByClientCredential({scopes:e,correlationId:t.correlationId,azureRegion:this.azureRegion,authority:t.authority,claims:t.claims});return this.handleResult(e,this.clientId,n||void 0)}catch(n){throw this.handleError(e,n,t)}}},Ji="ClientCertificateCredential",iU=be(Ji),qs=class{constructor(e,t,n,i={}){if(!e||!t)throw new Error(`${Ji}: tenantId and clientId are required parameters.`);let o=Object.assign({},typeof n=="string"?{certificatePath:n}:n);if(!o||!(o.certificate||o.certificatePath))throw new Error(`${Ji}: Provide either a PEM certificate in string form, or the path to that certificate in the filesystem. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);if(o.certificate&&o.certificatePath)throw new Error(`${Ji}: To avoid unexpected behaviors, providing both the contents of a PEM certificate and the path to a PEM certificate is forbidden. To troubleshoot, visit https://aka.ms/azsdk/js/identity/serviceprincipalauthentication/troubleshoot.`);this.msalFlow=new sd(Object.assign(Object.assign({},i),{configuration:o,logger:iU,clientId:t,tenantId:e,sendCertificateChain:i.sendCertificateChain,tokenCredentialOptions:i}))}async getToken(e,t={}){return vt(`${Ji}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,n)})}},cd=class extends Vt{constructor(e){super(e),this.username=e.username,this.password=e.password}async doGetToken(e,t){try{let n={scopes:e,username:this.username,password:this.password,correlationId:t?.correlationId,authority:t?.authority,claims:t?.claims},i=await this.publicApp.acquireTokenByUsernamePassword(n);return this.handleResult(e,this.clientId,i||void 0)}catch(n){throw this.handleError(e,n,t)}}},oU=be("UsernamePasswordCredential"),js=class{constructor(e,t,n,i,o={}){if(!e||!t||!n||!i)throw new Error("UsernamePasswordCredential: tenantId, clientId, username and password are required parameters. To troubleshoot, visit https://aka.ms/azsdk/js/identity/usernamepasswordcredential/troubleshoot.");this.msalFlow=new cd(Object.assign(Object.assign({},o),{logger:oU,clientId:t,tenantId:e,username:n,password:i,tokenCredentialOptions:o||{}}))}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,n)})}},aU=["AZURE_TENANT_ID","AZURE_CLIENT_ID","AZURE_CLIENT_SECRET","AZURE_CLIENT_CERTIFICATE_PATH","AZURE_USERNAME","AZURE_PASSWORD"],Os="EnvironmentCredential",Kr=be(Os),Fs=class{constructor(e){this._credential=void 0;let t=DD(aU).assigned.join(", ");Kr.info(`Found the following environment variables: ${t}`);let n=process.env.AZURE_TENANT_ID,i=process.env.AZURE_CLIENT_ID,o=process.env.AZURE_CLIENT_SECRET;if(n&&Vn(Kr,n),n&&i&&o){Kr.info(`Invoking ClientSecretCredential with tenant ID: ${n}, clientId: ${i} and clientSecret: [REDACTED]`),this._credential=new Bs(n,i,o,e);return}let a=process.env.AZURE_CLIENT_CERTIFICATE_PATH;if(n&&i&&a){Kr.info(`Invoking ClientCertificateCredential with tenant ID: ${n}, clientId: ${i} and certificatePath: ${a}`),this._credential=new qs(n,i,{certificatePath:a},e);return}let s=process.env.AZURE_USERNAME,c=process.env.AZURE_PASSWORD;n&&i&&s&&c&&(Kr.info(`Invoking UsernamePasswordCredential with tenant ID: ${n}, clientId: ${i} and username: ${s}`),this._credential=new js(n,i,s,c,e))}async getToken(e,t={}){return vt(`${Os}.getToken`,t,async n=>{if(this._credential)try{let i=await this._credential.getToken(e,n);return Kr.getToken.info(vr(e)),i}catch(i){let o=new mr(400,{error:`${Os} authentication failed. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`,error_description:i.message.toString().split("More details:").join("")});throw Kr.getToken.info(le(e,o)),o}throw new ue(`${Os} is unavailable. No underlying credential could be used. To troubleshoot, visit https://aka.ms/azsdk/js/identity/environmentcredential/troubleshoot.`)})}},FT="/.default",sU="http://169.254.169.254",cU="/metadata/identity/oauth2/token",uU="2018-02-01",lU="2019-11-01",pU="2019-07-01-preview";function Mt(r){let e="";if(Array.isArray(r)){if(r.length!==1)return;e=r[0]}else typeof r=="string"&&(e=r);return e.endsWith(FT)?e.substr(0,e.lastIndexOf(FT)):e}var Wr="ManagedIdentityCredential - AppServiceMSI 2017",Wp=be(Wr);function dU(r){return Date.parse(r.expires_on)}function fU(r,e){let t=Mt(r);if(!t)throw new Error(`${Wr}: Multiple scopes are not supported.`);let n={resource:t,"api-version":"2017-09-01"};e&&(n.clientid=e);let i=new URLSearchParams(n);if(!process.env.MSI_ENDPOINT)throw new Error(`${Wr}: Missing environment variable: MSI_ENDPOINT`);if(!process.env.MSI_SECRET)throw new Error(`${Wr}: Missing environment variable: MSI_SECRET`);return{url:`${process.env.MSI_ENDPOINT}?${i.toString()}`,method:"GET",headers:Ce.createHttpHeaders({Accept:"application/json",secret:process.env.MSI_SECRET})}}var hU={async isAvailable(r){if(!Mt(r))return Wp.info(`${Wr}: Unavailable. Multiple scopes are not supported.`),!1;let t=process.env,n=Boolean(t.MSI_ENDPOINT&&t.MSI_SECRET);return n||Wp.info(`${Wr}: Unavailable. The environment variables needed are: MSI_ENDPOINT and MSI_SECRET.`),n},async getToken(r,e={}){let{identityClient:t,scopes:n,clientId:i}=r;Wp.info(`${Wr}: Using the endpoint and the secret coming form the environment variables: MSI_ENDPOINT=${process.env.MSI_ENDPOINT} and MSI_SECRET=[REDACTED].`);let o=Ce.createPipelineRequest(Object.assign(Object.assign({abortSignal:e.abortSignal},fU(n,i)),{allowInsecureConnection:!0})),a=await t.sendTokenRequest(o,dU);return a&&a.accessToken||null}},Yr="ManagedIdentityCredential - CloudShellMSI",Ps=be(Yr);function mU(r,e){let t=Mt(r);if(!t)throw new Error(`${Yr}: Multiple scopes are not supported.`);let n={resource:t};if(e&&(n.client_id=e),!process.env.MSI_ENDPOINT)throw new Error(`${Yr}: Missing environment variable: MSI_ENDPOINT`);let i=new URLSearchParams(n);return{url:process.env.MSI_ENDPOINT,method:"POST",body:i.toString(),headers:Ce.createHttpHeaders({Accept:"application/json",Metadata:"true","Content-Type":"application/x-www-form-urlencoded"})}}var gU={async isAvailable(r){if(!Mt(r))return Ps.info(`${Yr}: Unavailable. Multiple scopes are not supported.`),!1;let t=Boolean(process.env.MSI_ENDPOINT);return t||Ps.info(`${Yr}: Unavailable. The environment variable MSI_ENDPOINT is needed.`),t},async getToken(r,e={}){let{identityClient:t,scopes:n,clientId:i}=r;i&&Ps.warning(`${Yr}: does not support user-assigned identities in the Cloud Shell environment. Argument clientId will be ignored.`),Ps.info(`${Yr}: Using the endpoint coming form the environment variable MSI_ENDPOINT = ${process.env.MSI_ENDPOINT}.`);let o=Ce.createPipelineRequest(Object.assign(Object.assign({abortSignal:e.abortSignal},mU(n,i)),{allowInsecureConnection:!0})),a=await t.sendTokenRequest(o);return a&&a.accessToken||null}},mt="ManagedIdentityCredential - IMDS",hr=be(mt);function vU(r){if(r.expires_on){let e=+r.expires_on*1e3;return hr.info(`${mt}: Using expires_on: ${e} (original value: ${r.expires_on})`),e}else{let e=Date.now()+r.expires_in*1e3;return hr.info(`${mt}: IMDS using expires_in: ${e} (original value: ${r.expires_in})`),e}}function zT(r,e,t){var n;let i=Mt(r);if(!i)throw new Error(`${mt}: Multiple scopes are not supported.`);let{skipQuery:o,skipMetadataHeader:a}=t||{},s="";if(!o){let l={resource:i,"api-version":uU};e&&(l.client_id=e),s=`?${new URLSearchParams(l).toString()}`}let c=new URL(cU,(n=process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)!==null&&n!==void 0?n:sU),u={Accept:"application/json",Metadata:"true"};return a&&delete u.Metadata,{url:`${c}${s}`,method:"GET",headers:Ce.createHttpHeaders(u)}}var Rs={maxRetries:3,startDelayInMs:800,intervalIncrement:2},yU={async isAvailable(r,e,t,n){var i,o;let a=Mt(r);if(!a)return hr.info(`${mt}: Unavailable. Multiple scopes are not supported.`),!1;let{span:s,updatedOptions:c}=Qr("ManagedIdentityCredential-pingImdsEndpoint",n);if(process.env.AZURE_POD_IDENTITY_AUTHORITY_HOST)return!0;let u=zT(a,t,{skipMetadataHeader:!0,skipQuery:!0});u.tracingOptions=c.tracingOptions;try{let l=Ce.createPipelineRequest(u);l.timeout=(o=(i=c.requestOptions)===null||i===void 0?void 0:i.timeout)!==null&&o!==void 0?o:300,l.allowInsecureConnection=!0;try{hr.info(`${mt}: Pinging the Azure IMDS endpoint`),await e.sendRequest(l)}catch(p){if(p.name==="RestError"&&p.code===Ce.RestError.REQUEST_SEND_ERROR||p.name==="AbortError"||p.code==="ENETUNREACH"||p.code==="ECONNREFUSED"||p.code==="EHOSTDOWN")return hr.info(`${mt}: The Azure IMDS endpoint is unavailable`),s.setStatus({code:gt.SpanStatusCode.ERROR,message:p.message}),!1}return hr.info(`${mt}: The Azure IMDS endpoint is available`),!0}catch(l){throw hr.info(`${mt}: Error when creating the WebResource for the Azure IMDS endpoint: ${l.message}`),s.setStatus({code:gt.SpanStatusCode.ERROR,message:l.message}),l}finally{s.end()}},async getToken(r,e={}){let{identityClient:t,scopes:n,clientId:i}=r;hr.info(`${mt}: Using the Azure IMDS endpoint coming from the environment variable MSI_ENDPOINT=${process.env.MSI_ENDPOINT}, and using the cloud shell to proceed with the authentication.`);let o=Rs.startDelayInMs;for(let a=0;a<Rs.maxRetries;a++)try{let s=Ce.createPipelineRequest(Object.assign(Object.assign({abortSignal:e.abortSignal},zT(n,i)),{allowInsecureConnection:!0})),c=await t.sendTokenRequest(s,vU);return c&&c.accessToken||null}catch(s){if(s.statusCode===404){await Ed.delay(o),o*=Rs.intervalIncrement;continue}throw s}throw new mr(404,`${mt}: Failed to retrieve IMDS token after ${Rs.maxRetries} retries.`)}},$t="ManagedIdentityCredential - Azure Arc MSI",Jp=be($t);function EU(r){let e=Mt(r);if(!e)throw new Error(`${$t}: Multiple scopes are not supported.`);let t={resource:e,"api-version":lU},n=new URLSearchParams(t);if(!process.env.IDENTITY_ENDPOINT)throw new Error(`${$t}: Missing environment variable: IDENTITY_ENDPOINT`);return Ce.createPipelineRequest({url:`${process.env.IDENTITY_ENDPOINT}?${n.toString()}`,method:"GET",headers:Ce.createHttpHeaders({Accept:"application/json",Metadata:"true"})})}function CU(r,e){return new Promise((t,n)=>Cd.readFile(r,e,(i,o)=>{i&&n(i),t(o)}))}async function TU(r,e){let t=await r.sendRequest(Ce.createPipelineRequest(e));if(t.status!==401){let i="";throw t.bodyAsText&&(i=` Response: ${t.bodyAsText}`),new mr(t.status,`${$t}: To authenticate with Azure Arc MSI, status code 401 is expected on the first request. ${i}`)}let n=t.headers.get("www-authenticate")||"";try{return n.split("=").slice(1)[0]}catch{throw Error(`Invalid www-authenticate header format: ${n}`)}}var bU={async isAvailable(r){if(!Mt(r))return Jp.info(`${$t}: Unavailable. Multiple scopes are not supported.`),!1;let t=Boolean(process.env.IMDS_ENDPOINT&&process.env.IDENTITY_ENDPOINT);return t||Jp.info(`${$t}: The environment variables needed are: IMDS_ENDPOINT and IDENTITY_ENDPOINT`),t},async getToken(r,e={}){var t;let{identityClient:n,scopes:i,clientId:o}=r;if(Jp.info(`${$t}: Authenticating.`),o)throw new Error(`${$t}: User assigned identity is not supported by the Azure Arc Managed Identity Endpoint. To authenticate with the system assigned identity, omit the client id when constructing the ManagedIdentityCredential, or if authenticating with the DefaultAzureCredential ensure the AZURE_CLIENT_ID environment variable is not set.`);let a=Object.assign(Object.assign({disableJsonStringifyOnBody:!0,deserializationMapper:void 0,abortSignal:e.abortSignal},EU(i)),{allowInsecureConnection:!0}),s=await TU(n,a);if(!s)throw new Error(`${$t}: Failed to find the token file.`);let c=await CU(s,{encoding:"utf-8"});(t=a.headers)===null||t===void 0||t.set("Authorization",`Basic ${c}`);let u=Ce.createPipelineRequest(Object.assign(Object.assign({},a),{allowInsecureConnection:!0})),l=await n.sendTokenRequest(u);return l&&l.accessToken||null}},ks="ManagedIdentityCredential - Token Exchange",HT=be(ks),wU=KT.promisify(YT.default.readFile);function xU(r,e,t){var n;let i={scope:Array.isArray(r)?r.join(" "):r,client_assertion:e,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer",client_id:t,grant_type:"client_credentials"},o=new URLSearchParams(i);return{url:new URL(`${process.env.AZURE_TENANT_ID}/oauth2/v2.0/token`,(n=process.env.AZURE_AUTHORITY_HOST)!==null&&n!==void 0?n:wd).toString(),method:"POST",body:o.toString(),headers:Ce.createHttpHeaders({Accept:"application/json"})}}function IU(){let r=process.env.AZURE_FEDERATED_TOKEN_FILE,e,t;async function n(){if(t!==void 0&&Date.now()-t>=1e3*60*5&&(e=void 0),!e){let o=(await wU(r,"utf8")).trim();if(o)e=o,t=Date.now();else throw new Error(`No content on the file ${r}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`)}return e}return{async isAvailable(i,o,a){let s=process.env,c=Boolean((a||s.AZURE_CLIENT_ID)&&s.AZURE_TENANT_ID&&r);return c||HT.info(`${ks}: Unavailable. The environment variables needed are: AZURE_CLIENT_ID (or the client ID sent through the parameters), AZURE_TENANT_ID and AZURE_FEDERATED_TOKEN_FILE`),c},async getToken(i,o={}){let{identityClient:a,scopes:s,clientId:c}=i;HT.info(`${ks}: Using the client assertion coming from environment variables.`);let u;try{u=await n()}catch{throw new Error(`${ks}: Failed to read ${r}, indicated by the environment variable AZURE_FEDERATED_TOKEN_FILE`)}let l=Ce.createPipelineRequest(Object.assign(Object.assign({abortSignal:o.abortSignal},xU(s,u,c||process.env.AZURE_CLIENT_ID)),{allowInsecureConnection:!0})),p=await a.sendTokenRequest(l);return p&&p.accessToken||null}}}var Qi="ManagedIdentityCredential - Fabric MSI",Qp=be(Qi);function _U(r){return Number(r.expires_on)}function SU(r,e){let t=Mt(r);if(!t)throw new Error(`${Qi}: Multiple scopes are not supported.`);let n={resource:t,"api-version":pU};e&&(n.client_id=e);let i=new URLSearchParams(n);if(!process.env.IDENTITY_ENDPOINT)throw new Error("Missing environment variable: IDENTITY_ENDPOINT");if(!process.env.IDENTITY_HEADER)throw new Error("Missing environment variable: IDENTITY_HEADER");return{url:`${process.env.IDENTITY_ENDPOINT}?${i.toString()}`,method:"GET",headers:Ce.createHttpHeaders({Accept:"application/json",secret:process.env.IDENTITY_HEADER})}}var AU={async isAvailable(r){if(!Mt(r))return Qp.info(`${Qi}: Unavailable. Multiple scopes are not supported.`),!1;let t=process.env,n=Boolean(t.IDENTITY_ENDPOINT&&t.IDENTITY_HEADER&&t.IDENTITY_SERVER_THUMBPRINT);return n||Qp.info(`${Qi}: Unavailable. The environment variables needed are: IDENTITY_ENDPOINT, IDENTITY_HEADER and IDENTITY_SERVER_THUMBPRINT`),n},async getToken(r,e={}){let{scopes:t,identityClient:n,clientId:i}=r;Qp.info([`${Qi}:`,"Using the endpoint and the secret coming from the environment variables:",`IDENTITY_ENDPOINT=${process.env.IDENTITY_ENDPOINT},`,"IDENTITY_HEADER=[REDACTED] and","IDENTITY_SERVER_THUMBPRINT=[REDACTED]."].join(" "));let o=Ce.createPipelineRequest(Object.assign({abortSignal:e.abortSignal},SU(t,i)));o.agent=new AD.default.Agent({rejectUnauthorized:!1});let a=await n.sendTokenRequest(o,_U);return a&&a.accessToken||null}},Wi=be("ManagedIdentityCredential"),Qe=class{constructor(e,t){this.isEndpointUnavailable=null;let n;typeof e=="string"?(this.clientId=e,n=t):n=e,this.identityClient=new $n(n),this.isAvailableIdentityClient=new $n(Object.assign(Object.assign({},n),{retryOptions:{maxRetries:0}}))}async cachedAvailableMSI(e,t,n){if(this.cachedMSI)return this.cachedMSI;let i=[AU,hU,gU,bU,IU(),yU];for(let o of i)if(await o.isAvailable(e,this.isAvailableIdentityClient,t,n))return this.cachedMSI=o,o;throw new ue(`${Qe.name} - No MSI credential available`)}async authenticateManagedIdentity(e,t,n){let{span:i,updatedOptions:o}=Qr(`${Qe.name}.authenticateManagedIdentity`,n);try{return(await this.cachedAvailableMSI(e,t,o)).getToken({identityClient:this.identityClient,scopes:e,clientId:t},o)}catch(a){throw i.setStatus({code:gt.SpanStatusCode.ERROR,message:a.message}),a}finally{i.end()}}async getToken(e,t){let n=null,{span:i,updatedOptions:o}=Qr(`${Qe.name}.getToken`,t);try{if(this.isEndpointUnavailable!==!0){if(n=await this.authenticateManagedIdentity(e,this.clientId,o),n===null){this.isEndpointUnavailable=!0;let a=new ue("The managed identity endpoint was reached, yet no tokens were received.");throw Wi.getToken.info(le(e,a)),a}this.isEndpointUnavailable=!1}else{let a=new ue("The managed identity endpoint is not currently available");throw Wi.getToken.info(le(e,a)),a}return Wi.getToken.info(vr(e)),n}catch(a){if(a.name==="AuthenticationRequiredError")throw a;if(i.setStatus({code:gt.SpanStatusCode.ERROR,message:a.message}),a.code==="ENETUNREACH"){let s=new ue(`${Qe.name}: Unavailable. Network unreachable. Message: ${a.message}`);throw Wi.getToken.info(le(e,s)),s}if(a.code==="EHOSTUNREACH"){let s=new ue(`${Qe.name}: Unavailable. No managed identity endpoint found. Message: ${a.message}`);throw Wi.getToken.info(le(e,s)),s}throw a.statusCode===400?new ue(`${Qe.name}: The managed identity endpoint is indicating there's no available identity. Message: ${a.message}`):a.statusCode===void 0?new ue(`${Qe.name}: Authentication failed. Message ${a.message}`):new mr(a.statusCode,{error:`${Qe.name} authentication failed.`,error_description:a.message})}finally{i.end()}}},ud=class extends Qe{constructor(e){var t;let n=(t=e?.managedIdentityClientId)!==null&&t!==void 0?t:process.env.AZURE_CLIENT_ID;n!==void 0?super(n,e):super(e)}},PU=[Fs,ud,Ms,Us,Ls],zs=class extends Ds{constructor(e){super(...PU.map(t=>new t(e))),this.UnavailableMessage="DefaultAzureCredential => failed to retrieve a token from the included credentials. To troubleshoot, visit https://aka.ms/azsdk/js/identity/defaultazurecredential/troubleshoot."}},RU={open:RD.default},ld=class extends Vt{constructor(e){super(e),this.logger=be("Node.js MSAL Open Browser"),this.redirectUri=e.redirectUri,this.loginHint=e.loginHint;let t=new URL(this.redirectUri);this.port=parseInt(t.port),isNaN(this.port)&&(this.port=80),this.hostname=t.hostname}async acquireTokenByCode(e){return this.publicApp.acquireTokenByCode(e)}doGetToken(e,t){return new Promise((n,i)=>{let o=[],a=(p,d)=>{var f;if(!p.url){i(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'));return}let m;try{m=new URL(p.url,this.redirectUri)}catch{i(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'));return}let y={code:m.searchParams.get("code"),redirectUri:this.redirectUri,scopes:e,authority:t?.authority,codeVerifier:(f=this.pkceCodes)===null||f===void 0?void 0:f.verifier};this.acquireTokenByCode(y).then(E=>{E?.account&&(this.account=xd(this.clientId,E.account));let S="Authentication Complete. You can close the browser and return to the application.";if(E&&E.expiresOn){let P=E?.expiresOn.valueOf();d.writeHead(200),d.end(S),this.logger.getToken.info(vr(e)),n({expiresOnTimestamp:P,token:E.accessToken})}else{let P=le(e,`${m.searchParams.get("error")}. ${m.searchParams.get("error_description")}`);d.writeHead(500),d.end(P),this.logger.getToken.info(P),i(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"'))}l()}).catch(()=>{let E=le(e,`${m.searchParams.get("error")}. ${m.searchParams.get("error_description")}`);d.writeHead(500),d.end(E),this.logger.getToken.info(E),i(new Error('Interactive Browser Authentication Error "Did not receive token with a valid expiration"')),l()})},s=PD.default.createServer(a),c=OD.default(s),u=s.listen(this.port,this.hostname,()=>this.logger.info(`InteractiveBrowserCredential listening on port ${this.port}!`));function l(){u&&u.close();for(let p of o)p.destroy();c&&(c.close(),c.stop())}s.on("connection",p=>o.push(p)),s.on("error",p=>{l();let d=p.code;i(d==="EACCES"||d==="EADDRINUSE"?new ue([`InteractiveBrowserCredential: Access denied to port ${this.port}.`,"Try sending a redirect URI with a different port, as follows:",'`new InteractiveBrowserCredential({ redirectUri: "http://localhost:1337" })`'].join(" ")):new ue(`InteractiveBrowserCredential: Failed to start the necessary web server. Error: ${p.message}`))}),s.on("listening",()=>{let p=this.openAuthCodeUrl(e,t),d=t?.abortSignal;d&&d.addEventListener("abort",()=>{l(),i(new Error("Aborted"))}),p.then().catch(f=>{l(),i(f)})})})}async openAuthCodeUrl(e,t){let n=new Xp.CryptoProvider;this.pkceCodes=await n.generatePkceCodes();let i={scopes:e,correlationId:t?.correlationId,redirectUri:this.redirectUri,authority:t?.authority,claims:t?.claims,loginHint:this.loginHint,codeChallenge:this.pkceCodes.challenge,codeChallengeMethod:"S256"},o=await this.publicApp.getAuthCodeUrl(i);try{await RU.open(o,{wait:!0})}catch(a){throw new ue(`InteractiveBrowserCredential: Could not open a browser window. Error: ${a.message}`)}}},OU=be("InteractiveBrowserCredential"),pd=class{constructor(e={}){let t=typeof e.redirectUri=="function"?e.redirectUri():e.redirectUri||"http://localhost";this.msalFlow=new ld(Object.assign(Object.assign({},e),{tokenCredentialOptions:e,logger:OU,redirectUri:t})),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}async authenticate(e,t={}){return vt(`${this.constructor.name}.authenticate`,t,async n=>{let i=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(i,n),this.msalFlow.getActiveAccount()})}},dd=class extends Vt{constructor(e){super(e),this.userPromptCallback=e.userPromptCallback}async doGetToken(e,t){try{let n={deviceCodeCallback:this.userPromptCallback,scopes:e,cancel:!1,correlationId:t?.correlationId,authority:t?.authority,claims:t?.claims},i=this.publicApp.acquireTokenByDeviceCode(n),o=await this.withCancellation(i,t?.abortSignal,()=>{n.cancel=!0});return this.handleResult(e,this.clientId,o||void 0)}catch(n){throw this.handleError(e,n,t)}}},kU=be("DeviceCodeCredential");function NU(r){console.log(r.message)}var fd=class{constructor(e){this.msalFlow=new dd(Object.assign(Object.assign({},e),{logger:kU,userPromptCallback:e?.userPromptCallback||NU,tokenCredentialOptions:e||{}})),this.disableAutomaticAuthentication=e?.disableAutomaticAuthentication}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}async authenticate(e,t={}){return vt(`${this.constructor.name}.authenticate`,t,async n=>{let i=Array.isArray(e)?e:[e];return await this.msalFlow.getToken(i,n),this.msalFlow.getActiveAccount()})}},hd=class extends Vt{constructor(e){super(e),this.logger=be("Node.js MSAL Authorization Code"),this.redirectUri=e.redirectUri,this.authorizationCode=e.authorizationCode,e.clientSecret&&(this.msalConfig.auth.clientSecret=e.clientSecret)}async getAuthCodeUrl(e){return await this.init(),this.confidentialApp.getAuthCodeUrl(e)}async doGetToken(e,t){var n;try{let i=await((n=this.confidentialApp)===null||n===void 0?void 0:n.acquireTokenByCode({scopes:e,redirectUri:this.redirectUri,code:this.authorizationCode,correlationId:t?.correlationId,authority:t?.authority,claims:t?.claims}));return this.handleResult(e,this.clientId,i||void 0)}catch(i){throw this.handleError(e,i,t)}}},GT=be("AuthorizationCodeCredential"),md=class{constructor(e,t,n,i,o,a){Vn(GT,e);let s=n;typeof o=="string"?(this.authorizationCode=i,this.redirectUri=o):(this.authorizationCode=n,this.redirectUri=i,s=void 0,a=o),this.msalFlow=new hd(Object.assign(Object.assign({},a),{clientSecret:s,clientId:t,tokenCredentialOptions:a||{},logger:GT,redirectUri:this.redirectUri,authorizationCode:this.authorizationCode}))}async getToken(e,t={}){return vt(`${this.constructor.name}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,Object.assign(Object.assign({},n),{disableAutomaticAuthentication:this.disableAutomaticAuthentication}))})}},gd=class extends Vt{constructor(e){super(e),this.logger.info("Initialized MSAL's On-Behalf-Of flow"),this.requiresConfidential=!0,this.userAssertionToken=e.userAssertionToken,this.certificatePath=e.certificatePath,this.sendCertificateChain=e.sendCertificateChain,this.clientSecret=e.clientSecret}async init(e){if(this.certificatePath)try{let t=await ib({certificatePath:this.certificatePath},this.sendCertificateChain);this.msalConfig.auth.clientCertificate={thumbprint:t.thumbprint,privateKey:t.certificateContents,x5c:t.x5c}}catch(t){throw this.logger.info(le("",t)),t}else this.msalConfig.auth.clientSecret=this.clientSecret;return super.init(e)}async doGetToken(e,t={}){try{let n=await this.confidentialApp.acquireTokenOnBehalfOf({scopes:e,correlationId:t.correlationId,authority:t.authority,claims:t.claims,oboAssertion:this.userAssertionToken});return this.handleResult(e,this.clientId,n||void 0)}catch(n){throw this.handleError(e,n,t)}}},vd="OnBehalfOfCredential",MU=be(vd),yd=class{constructor(e){this.options=e;let{clientSecret:t}=e,{certificatePath:n}=e,{tenantId:i,clientId:o,userAssertionToken:a}=e;if(!i||!o||!(t||n)||!a)throw new Error(`${vd}: tenantId, clientId, clientSecret (or certificatePath) and userAssertionToken are required parameters.`);this.msalFlow=new gd(Object.assign(Object.assign({},this.options),{logger:MU,tokenCredentialOptions:this.options}))}async getToken(e,t={}){return vt(`${vd}.getToken`,t,async n=>{let i=Array.isArray(e)?e:[e];return this.msalFlow.getToken(i,n)})}};function DU(){return new zs}J.AggregateAuthenticationError=Ns;J.AggregateAuthenticationErrorName=JT;J.AuthenticationError=mr;J.AuthenticationErrorName=bd;J.AuthenticationRequiredError=Jr;J.AuthorizationCodeCredential=md;J.AzureCliCredential=Us;J.AzurePowerShellCredential=Ls;J.ChainedTokenCredential=Ds;J.ClientCertificateCredential=qs;J.ClientSecretCredential=Bs;J.CredentialUnavailableError=ue;J.CredentialUnavailableErrorName=WT;J.DefaultAzureCredential=zs;J.DeviceCodeCredential=fd;J.EnvironmentCredential=Fs;J.InteractiveBrowserCredential=pd;J.ManagedIdentityCredential=Qe;J.OnBehalfOfCredential=yd;J.UsernamePasswordCredential=js;J.VisualStudioCodeCredential=Ms;J.deserializeAuthenticationRecord=zD;J.getDefaultAzureCredential=DU;J.logger=Nt;J.serializeAuthenticationRecord=FD;J.useIdentityPlugin=XD});var ab=g(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});function UU(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var LU=UU(require("keytar")),BU="VS Code Azure",qU=r=>{let{vsCodeCredentialControl:e}=r;e.setVsCodeCredentialFinder(()=>LU.findCredentials(BU))};Id.vsCodePlugin=qU});var $U={};Pb($U,{activate:()=>HU,deactivate:()=>GU});module.exports=Rb($U);var fe=Q(require("vscode"));var _d=Q(require("vscode"));var yt=Q(require("vscode"));var Tt=Q(require("vscode")),Dd=Q(require("os")),Zr=Q(require("path")),bt=Q(require("fs"));var _e=class{static writeBase64toFile(e,t){_e.ensureLocalFolder(t,!0),bt.writeFile(t,e,{encoding:"base64"},function(n){n&&Tt.window.showErrorMessage(`ERROR writing file: ${n}`)})}static readBase64FromFile(e){var t=bt.readFileSync(e);return Buffer.from(t).toString("base64")}static async delay(e){return new Promise(t=>setTimeout(t,e))}static mapToObject(e){let t={};for(let[n,i]of e)t[n]=i;return t}static ensureLocalFolder(e,t=!1){let n=e;t&&(n=Zr.dirname(e)),bt.existsSync(n)||bt.mkdirSync(n,{recursive:!0})}static sortArrayByProperty(e,t="label",n="ASC"){let i=n=="ASC"?1:-1;e.sort((o,a)=>{let s=o[t].toString().toLowerCase(),c=a[t].toString().toLowerCase();return s>c?1*i:s<c?-1*i:0})}static get tempFiles(){return this._tempFiles==null?[]:this._tempFiles}static addTempFile(e){this._tempFiles==null&&(this._tempFiles=[]),this._tempFiles.push(e)}static removeTempFiles(){for(let e of _e.tempFiles)bt.unlink(e,t=>{t&&Tt.window.showErrorMessage(t.message)})}static trimChar(e,t,n=!0,i=!0){if(e!=null){if(e.length==0)return e;for(;e.charAt(0)==t&&n;)e=e.substring(1);for(;e.charAt(e.length-1)==t&&i;)e=e.substring(0,e.length-1);return e}}static async showDiff(e,t){let n=Tt.Uri.file(e),i=Tt.Uri.file(t),o={preserveFocus:!0,preview:!1};Tt.commands.executeCommand("vscode.diff",n,i,"Online <-> Local",o)}static resolvePath(e){let t=/\$([A-Z_]+[A-Z0-9_]*)|\${([A-Z0-9_]*)}|%([^%]+)%/ig;do e=e.replace(t,(n,i,o,a)=>process.env[i||o||a]);while(e.match(t));if(e[0]==="~"){let n=process.platform==="win32"?"USERPROFILE":"HOME";return Zr.join(process.env[n],e.slice(1))}else return Zr.resolve(e)}static openLink(e){Tt.commands.executeCommand("vscode.open",Tt.Uri.parse(e))}static async wait(e){await setTimeout(()=>{},e)}static bytesToSize(e){let t=["Bytes","KB","MB","GB","TB"];if(e==0)return"0 Byte";let n=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,n))+" "+t[n]}static async singleVsDoubleClick(e,t,n,i=250){_e._doubleClickTimer?(await _e.resetDoubleClickTimer(),await e[n.name]()):(_e._doubleClickTimer=setTimeout(await e[t.name],i),setTimeout(this.resetDoubleClickTimer,i+1))}static async resetDoubleClickTimer(){clearTimeout(_e._doubleClickTimer),_e._doubleClickTimer=void 0}static localUserFolder(){return""}static newGuid(){return"xxxxxxxx-xxxx-1908-2120-xxxxxxxxxxxx".replace(/[x]/g,function(e){var t=Math.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)})}static secondsToHms(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60),o=t>0?t+":":"",a=n>0?n+":":"",s=i>0?i+":":"",o=t>0?`${t.toString().length>1?`${t}`:`0${t}`}`:"00",a=n>0?`${n.toString().length>1?`${n}`:`0${n}`}`:"00",s=i>0?`${i.toString().length>1?`${i}`:`0${i}`}`:"00";return`${o}:${a}:${s}`}static getFirstRegexGroup(e,t){let n=[...t.matchAll(e)];return n.length>=1?n[0][1]:null}static getUserDir(){return Dd.homedir()}static parseBoolean(e){return e==="false"||e==="undefined"||e==="null"||e==="0"?!1:!!e}};var Gs=Q(require("vscode"));var Kn=class{static async initialize(e="https://api.powerbi.com/"){try{C.log("Initializing PowerBI API Service ...");let t=_o(),n=Ch();this._apiService=t.create({httpsAgent:new n({rejectUnauthorized:C.rejectUnauthorizedSSL}),baseURL:_e.trimChar(e,"/")+"/",proxy:C.useProxy});let{useIdentityPlugin:i,VisualStudioCodeCredential:o}=ob(),{vsCodePlugin:a}=ab();i(a);let c=await new o().getToken("https://analysis.windows.net/powerbi/api/.default");this._apiService.defaults.headers.common.Authorization="Bearer "+c.token,this._apiService.defaults.headers.common["Content-Type"]="application/json",this._apiService.defaults.headers.common.Accept="application/json",C.log(`Testing new PowerBI API (${e}) settings ()...`),this._connectionTestRunning=!0;let u=await this.getGroups();if(this._connectionTestRunning=!1,u.length>0)return C.log("Power BI API Service initialized!"),this._isInitialized=!0,!0;throw C.log(JSON.stringify(u)),new Error(`Invalid Configuration for PowerBI REST API: Cannot access '${e}' with given credentials'!`)}catch(t){return this._connectionTestRunning=!1,C.log("ERROR: "+t),Gs.window.showErrorMessage(t),!1}}static get Org(){return this._org}static get isInitialized(){return this._isInitialized}static logResponse(e){C.log("Response: "),C.log(JSON.stringify(e.data))}static async get(e,t=null){if(!this._isInitialized&&!this._connectionTestRunning)C.log("API has not yet been initialized! Please connect first!");else{C.log("GET "+e),C.log("Params:"+JSON.stringify(t));let n="Request not yet executed!";try{n=await this._apiService.get(e,t),this.logResponse(n)}catch(i){let o=i.response;C.log("ERROR: "+i.message),C.log("ERROR: "+JSON.stringify(o.data)),Gs.window.showErrorMessage(i.message);return}return n}}static async post(e,t,n){C.log("POST "+e),C.log("Body:"+JSON.stringify(t));let i={};n!=null&&(i={headers:n});let o="Request not yet executed!";try{o=await this._apiService.post(e,t,i),this.logResponse(o)}catch(a){this.handleException(a);return}return o}static async patch(e,t){C.log("PATCH "+e),C.log("Body:"+JSON.stringify(t));let n="Request not yet executed!";try{n=await this._apiService.patch(e,t),this.logResponse(n)}catch(i){this.handleException(i);return}return n}static async delete(e,t){C.log("DELETE "+e),C.log("Body:"+JSON.stringify(t));let n="Request not yet executed!";try{n=await this._apiService.delete(e,t),this.logResponse(n)}catch(i){this.handleException(i);return}return n}static handleException(e){let t=e.response;C.log("ERROR: "+e.message),C.log("ERROR: "+JSON.stringify(t.data)),Gs.window.showErrorMessage(e.message)}static getUrl(e=void 0,t=void 0){let n="";e!=null&&e!=null&&(n=`/groups/${e.toString()}`);let i="";return t!=null&&t!=null&&(i=`/${t.toString().toLowerCase()}`),`v1.0/${this.Org}${n}${i}`}static getUrl2(e){let t=[];for(let n of e)n.itemType=="GROUP"&&!n.itemId||(t.push(n.itemType.toLowerCase()),n.itemId&&t.push(n.itemId.toString()));return`v1.0/${this.Org}/${t.join("/")}`}static async getWorkspaceItemList(e=void 0,t=void 0,n="name"){let i=this.getUrl(e,t),o={},c=(await this.get(i,{params:o})).data.value;return c==null?[]:(_e.sortArrayByProperty(c,n),c)}static async getItemList(e,t={},n="name"){let a=(await this.get(e,{params:t})).data.value;return a==null?[]:(_e.sortArrayByProperty(a,n),a)}static async getItemList2(e,t="name"){let n=this.getUrl2(e),i={},s=(await this.get(n,{params:i})).data.value;return e==null?[]:(_e.sortArrayByProperty(s,t),s)}static async getGroups(){return await this.getItemList(`v1.0/${Kn.Org}/groups`)}static async getDatasetParameters(e,t){return await this.getItemList2([{itemType:"GROUPS",itemId:e},{itemType:"DATASETS",itemId:t},{itemType:"PARAMETERS"}])}static async getCapacities(){return await this.getItemList(`v1.0/${Kn.Org}/capacities`,{},"displayName")}static async getGateways(){return await this.getItemList(`v1.0/${Kn.Org}/gateways`)}static async getPipelines(){return await this.getItemList(`v1.0/${Kn.Org}/pipelines`)}static async getPipelineStages(e){return(await this.get(`v1.0/${this.Org}/pipelines/${e}/stages`)).data.value}},N=Kn;N._isInitialized=!1,N._connectionTestRunning=!1,N._org="myorg";var $s=class{static get rootPath(){return this._context.extensionPath}static get extensionContext(){return this._context}static get secrets(){return this._context.secrets}static get RefreshAfterUpDownload(){return!0}static get IsValidated(){return this._isValidated}static set StatusBar(e){this._statusBar=e}static get StatusBar(){return this._statusBar}static setStatusBar(e,t=!1){t?this.StatusBar.text="$(loading~spin) "+e:this.StatusBar.text=e}static set TreeViewWorkspaces(e){this._treeViewWorkspaces=e}static get TreeViewWorkspaces(){return this._treeViewWorkspaces}static set TreeViewCapacities(e){this._treeViewCapacities=e}static get TreeViewCapacities(){return this._treeViewCapacities}static set TreeViewGateways(e){this._treeViewGateways=e}static get TreeViewGateways(){return this._treeViewGateways}static set TreeViewPipelines(e){this._treeViewPipeliness=e}static get TreeViewPipelines(){return this._treeViewPipeliness}static async initialize(e){try{this._logger=yt.window.createOutputChannel(e.extension.id),this.log("Logger initialized!"),this._extension=e.extension,this.log(`Loading VS Code extension '${e.extension.packageJSON.displayName}' (${e.extension.packageJSON.id}) version ${e.extension.packageJSON.version} ...`),this.log(`If you experience issues please open a ticket at ${e.extension.packageJSON.qna}`),this._context=e,await N.initialize()}catch{return!1}return!0}static cleanUp(){_e.removeTempFiles()}static log(e,t=!0){t?this._logger.appendLine(e):this._logger.append(e)}static get configuration(){return this._extension}static async getSecureSetting(e){return this.secrets.get(e)}static async setSecureSetting(e,t){await this.secrets.store(e,t)}static getConfigurationSetting(e,t,n=!1){let i=yt.workspace.getConfiguration().get(e),o=yt.workspace.getConfiguration().inspect(e);return t||(o.workspaceValue!=null||o.workspaceFolderValue!=null||o.workspaceLanguageValue!=null||o.workspaceFolderLanguageValue!=null?t="Workspace":o.globalValue!=null||o.globalLanguageValue!=null?t="Global":t="Default"),t=="Global"?i=o.globalValue??o.globalLanguageValue:t=="Workspace"&&(i=o.workspaceValue??o.workspaceFolderValue??o.workspaceLanguageValue??o.workspaceFolderLanguageValue),(t=="Default"||n&&!i)&&(i=o.defaultValue??o.defaultLanguageValue),{setting:o.key,value:i,inspect:o,source:t}}static async updateConfigurationSetting(e,t,n=this._settingScope){let i;switch(n){case"Workspace":i=yt.ConfigurationTarget.Workspace;break;case"Global":i=yt.ConfigurationTarget.Global;break;default:i=yt.ConfigurationTarget.Workspace;break}yt.workspace.getConfiguration().update(e,t,i)}static async updateConfigurationSettingByConfigSetting(e,t){yt.workspace.getConfiguration().update(e.setting,e.value,t)}static get useProxy(){let e=$s.getConfigurationSetting("http.proxySupport");if(e.value=="off")return this.log('Proxy support is disabled due to setting "http.proxySupport": "off"!'),!1;if(e.value=="on")return this.log('Proxy support is enabled due to setting "http.proxySupport": "on"!'),!0}static get rejectUnauthorizedSSL(){let e=$s.getConfigurationSetting("http.proxyStrictSSL");return e.value?e.source!="Default"&&this.log('Strict Proxy SSL verification enabled due to setting "http.proxyStrictSSL": true !'):this.log('Strict Proxy SSL verification disabled due to setting "http.proxyStrictSSL": false !'),e.value}},C=$s;C._isValidated=!1;var Dt=class{constructor(e,t,n,i=!1,o=null){this._prompt=e,this._inputType=t,this._key=n,this._optional=i,this._description=o??e}get Prompt(){return this._prompt}get InputType(){return this._inputType}get Key(){return this._key}get Optional(){return this._optional}get Description(){return this._description}async getValue(){switch(this.InputType){case"FREE_TEXT":return await q.showInputBox(this.Prompt,this.Description);case"WORKSPACE_SELECTOR":return await q.showQuickPick(q.getQuickPickItems("GROUP"),this.Description);case"REPORT_SELECTOR":return await q.showQuickPick(q.getQuickPickItems("REPORT"),this.Description);case"DATASET_SELECTOR":return await q.showQuickPick(q.getQuickPickItems("DATASET"),this.Description);default:return this.InputType}}},Vs=class{constructor(e,t){this._name=e,this._value=t}get name(){return this._name}get value(){return this._value==null||this._value==null?this.name:this._value}get label(){return this._value==null||this._value==null?this.name:`${this.name}${Vs.SEPARATOR}${this.value}`}static GetValueFromLabel(e){let t=e.split(Vs.SEPARATOR);return t.length==1?t[0]:t[1]}},Xe=Vs;Xe.SEPARATOR="	";var q=class{static async execute(e,t="POST",n=[]){let i={},o=null;for(let a of n)o=await a.getValue(),i=this.addProperty(i,a.Key,o);switch(t){case"GET":return N.get(e,i);case"POST":return N.post(e,i);case"PATCH":return N.patch(e,i);case"DELETE":return N.delete(e,i);default:break}}static addProperty(e,t,n){if(n==null||n==null)return e;let i=t.split(".");return i.length==1?e[i[0]]=n:(i[0]in e||(e[i[0]]={}),e[i[0]]=this.addProperty(e[i[0]],i.slice(1).join("."),n)),e}static async showQuickPick(e,t){let n=await _d.window.showQuickPick(e,{placeHolder:t});return n==null||n==null?null:n.value}static async showInputBox(e,t,n=void 0){return await _d.window.showInputBox({value:e,valueSelection:n,placeHolder:t,prompt:t})}static pushQuickPickItem(e){this._quickPickLists==null&&(C.log("Initializing QuickPickList ..."),this._quickPickLists=new Map),this._quickPickLists.has(e.itemType)||(C.log(`Adding item '${e.itemType}' to QuickPickLists ...`),this._quickPickLists.set(e.itemType,[]));let t=new Xe(e.name,e.uid.toString()),n=this._quickPickLists.get(e.itemType).findIndex(i=>i.label==t.label);for(n>=0&&this._quickPickLists.get(e.itemType).splice(n,1),C.log(`Adding item '${e.uid}' to QuickPickList '${e.itemType}'.`),this._quickPickLists.get(e.itemType).push(t);this._quickPickLists.get(e.itemType).length>this._maxQuickPickListItems;){let i=this._quickPickLists.get(e.itemType).shift();C.log(`Removed item '${i.value}' from QuickPickList '${e.itemType}'.`)}}static getQuickPickItems(e){return this._quickPickLists==null&&(C.log("Initializing QuickPickList ..."),this._quickPickLists=new Map),this._quickPickLists.has(e)||(C.log(`Adding item '${e}' to QuickPickLists ...`),this._quickPickLists.set(e,[])),this._quickPickLists.get(e)}};q._maxQuickPickListItems=10;var Xi=Q(require("vscode"));var cb=Q(require("vscode"));var Ys=Q(require("vscode"));var yr=Q(require("vscode")),sb=Q(require("path"));var Ut=class extends yr.TreeItem{constructor(t,n,i,o=void 0,a=yr.TreeItemCollapsibleState.Collapsed){super(n,a);this.command={command:"PowerBI.updateQuickPickList",title:"Update QuickPick List",arguments:[this]};this._name=n,this._itemType=i,this._id=t,this._parent=o,this._definition={name:n,itemType:i,uid:t},super.id=t,super.label=this.name,super.tooltip=this._tooltip,super.description=this._description,super.contextValue=this._contextValue,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}getIconPath(t){return sb.join(C.rootPath,"resources",t,this.itemType.toLowerCase()+".png")}get _tooltip(){let t="";for(let[n,i]of Object.entries(this.definition))typeof i=="string"&&i.length>100||(t+=`${n}: ${i.toString()}
`);return t.trim()}get _description(){return this._id.toString()}get _contextValue(){return this.itemType}async getChildren(t){await yr.window.showErrorMessage("getChildren is not implemented! Please overwrite in derived class!")}get definition(){return this._definition}set definition(t){this._definition=t}get name(){return this._name}set name(t){this._name=t}get itemType(){return this._itemType}get uid(){return this._id}get parent(){return this._parent}CopyPathToClipboard(){yr.env.clipboard.writeText(this._name)}get apiUrlPart(){return this.itemType.endsWith("S")?this.itemType.toLowerCase():this.uid?this.uid.toString():this.id}get apiUrlPair(){return{itemType:this.itemType,itemId:this.id}}get apiPath1(){return this.uid!=null&&this.uid!=null?`v1.0/${N.Org}/${this.itemType.toString().toLowerCase()}s/${this.uid}`:`v1.0/${N.Org}/${this.itemType.toString().toLowerCase()}`}get apiPath(){let t=[],n=this;for(;n;)n.apiUrlPart&&t.push(n.apiUrlPart),n=n.parent;return`v1.0/${N.Org}/${t.reverse().join("/")}/`}};var Ks=class extends Ut{constructor(t,n,i=Ys.TreeItemCollapsibleState.Collapsed){super(t.id,t.displayName,"CAPACITY",n,i);this._definition=t,super.id=this.uid,super.label=t.displayName,super.tooltip=this._tooltip,super.description=this._description,super.contextValue=this._contextValue,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}get _tooltip(){let t="";for(let[n,i]of Object.entries(this.definition))typeof i=="string"&&i.length>100||(t+=`${n}: ${i.toString()}
`);return t.trim()}async getChildren(t){await Ys.window.showErrorMessage("getChildren is not implemented! Please overwrite in derived class!")}get definition(){return super.definition}set definition(t){this._definition=t}get apiPath(){return"v1.0/myorg/capacities"}get displayName(){return this.definition.displayName}get sku(){return this.definition.sku}get region(){return this.definition.region}get state(){return this.definition.state}get admins(){return this.definition.admins}get capacityUserAccessRight(){return this.definition.capacityUserAccessRight}};var Ws=class extends Ks{constructor(e,t){super(e,t,cb.TreeItemCollapsibleState.None),this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async delete(){}};var jU=Q(require("vscode"));var Js=class{constructor(){this.dropMimeTypes=["application/vnd.code.tree.powerbicapacities","text/uri-list"];this.dragMimeTypes=["application/vnd.code.tree.powerbicapacities"]}async handleDrag(e,t,n){}async handleDrop(e,t,n){C.log("Dropped item on "+e.itemType+" ..."),C.log(await t.get("text/uri-list").asString()),"handleDrop"in e?e.handleDrop(t):C.log("No action defined when dropping an item on a "+e.itemType+" node!")}};var Qs=class{constructor(e){this._onDidChangeTreeData=new Xi.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;let t=Xi.window.createTreeView("PowerBICapacities",{treeDataProvider:this,showCollapseAll:!0,canSelectMany:!0,dragAndDropController:new Js});e.subscriptions.push(t),C.TreeViewCapacities=this}refresh(e=!1){e&&Xi.window.showInformationMessage("Refreshing Capacities ..."),this._onDidChangeTreeData.fire(null)}getTreeItem(e){return e}getParent(e){return e}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getCapacities();for(let i of n){let o=new Ws(i,void 0);t.push(o)}return t}}add(){}};var Zi=Q(require("vscode"));var ub=Q(require("vscode"));var Zs=Q(require("vscode"));var Xs=class extends Ut{constructor(t,n,i=Zs.TreeItemCollapsibleState.Collapsed){super(t.id,t.name,"GATEWAY",n,i);this._definition=t,super.id=this.uid,super.tooltip=this._tooltip,super.description=this._description,super.contextValue=this._contextValue,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}get _tooltip(){let t="";for(let[n,i]of Object.entries(this.definition))typeof i=="string"&&i.length>100||(t+=`${n}: ${i.toString()}
`);return t.trim()}async getChildren(t){await Zs.window.showErrorMessage("getChildren is not implemented! Please overwrite in derived class!")}get definition(){return super.definition}set definition(t){this._definition=t}get apiPath(){return"v1.0/myorg/gateways"}get type(){return this.definition.type}get publicKey(){return this.definition.publicKey}};var ec=class extends Xs{constructor(e){super(e,void 0,ub.TreeItemCollapsibleState.None),this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async delete(){}};var FU=Q(require("vscode"));var tc=class{constructor(){this.dropMimeTypes=["application/vnd.code.tree.powerbigateways","text/uri-list"];this.dragMimeTypes=["application/vnd.code.tree.powerbigateways"]}async handleDrag(e,t,n){}async handleDrop(e,t,n){C.log("Dropped item on "+e.itemType+" ..."),C.log(await t.get("text/uri-list").asString()),"handleDrop"in e?e.handleDrop(t):C.log("No action defined when dropping an item on a "+e.itemType+" node!")}};var rc=class{constructor(e){this._onDidChangeTreeData=new Zi.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;let t=Zi.window.createTreeView("PowerBIGateways",{treeDataProvider:this,showCollapseAll:!0,canSelectMany:!0,dragAndDropController:new tc});e.subscriptions.push(t),C.TreeViewGateways=this}refresh(e=!1){e&&Zi.window.showInformationMessage("Refreshing Gateways ..."),this._onDidChangeTreeData.fire(null)}getTreeItem(e){return e}getParent(e){return e}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getGateways();for(let i of n){let o=new ec(i);t.push(o)}return t}}add(){}};var eo=Q(require("vscode"));var pb=Q(require("vscode"));var nc=Q(require("vscode"));var Er=class extends Ut{constructor(e,t,n,i,o=nc.TreeItemCollapsibleState.Collapsed){super(n,e,t,i,o),super.definition={name:e,itemType:t,id:n},super.id=this.uid,super.tooltip=this._tooltip,super.description=this._description,super.contextValue=this._contextValue,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}get _tooltip(){let e="";for(let[t,n]of Object.entries(this.definition))typeof n=="string"&&n.length>100||(e+=`${t}: ${n.toString()}
`);return e.trim()}async getChildren(e){await nc.window.showErrorMessage("getChildren is not implemented! Please overwrite in derived class!")}get apiPath(){return"v1.0/myorg/pipelines"}get stages(){return this.definition.stages}get displayName(){return this.name}};var lb=Q(require("vscode"));var ic=class extends Er{constructor(e,t,n){super(e.order.toString(),"PIPELINESTAGE",t,n,lb.TreeItemCollapsibleState.None),super.label=this.getLabel(e),super.id=e.order.toString()+"/"+e.workspaceId,this.definition=e,super.tooltip=this._tooltip,super.description=null}get definition(){return super.definition}set definition(e){super.definition=e}getLabel(e){let t="";switch(e.order){case 0:t="Development";break;case 1:t="Development";break;case 2:t="Development";break;default:t="NO_NAME_DEFINED"}return t+": "+e.workspaceName}};var oc=class extends Er{constructor(t,n){super("Stages","PIPELINESTAGES",t,n);this._pipelineId=t,super.id=t+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}async getChildren(t){if(!N.isInitialized)return Promise.resolve([]);if(t!=null&&t!=null)return t.getChildren();{let n=[],i=await N.getPipelineStages(this._pipelineId);for(let o of i){let a=new ic(o,this._pipelineId,this);n.push(a),q.pushQuickPickItem(a)}return n}}};var ac=class extends Er{constructor(e){super(e.displayName,"PIPELINE",e.id,void 0,pb.TreeItemCollapsibleState.Collapsed),this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async getChildren(e){q.pushQuickPickItem(this);let t=[];return t.push(new oc(this.uid,this)),t}async delete(){}};var zU=Q(require("vscode"));var sc=class{constructor(){this.dropMimeTypes=["application/vnd.code.tree.powerbiPipelines","text/uri-list"];this.dragMimeTypes=["application/vnd.code.tree.powerbiPipelines"]}async handleDrag(e,t,n){}async handleDrop(e,t,n){C.log("Dropped item on "+e.itemType+" ..."),C.log(await t.get("text/uri-list").asString()),"handleDrop"in e?e.handleDrop(t):C.log("No action defined when dropping an item on a "+e.itemType+" node!")}};var cc=class{constructor(e){this._onDidChangeTreeData=new eo.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;let t=eo.window.createTreeView("PowerBIPipelines",{treeDataProvider:this,showCollapseAll:!0,canSelectMany:!0,dragAndDropController:new sc});e.subscriptions.push(t),C.TreeViewPipelines=this}refresh(e=!1){e&&eo.window.showInformationMessage("Refreshing Pipelines ..."),this._onDidChangeTreeData.fire(null)}getTreeItem(e){return e}getParent(e){return e}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getPipelines();for(let i of n){let o=new ac(i);t.push(o)}return t}}add(){}};var to=Q(require("vscode"));var vb=Q(require("vscode")),yb=Q(require("path"));var uc=Q(require("vscode"));var de=class extends Ut{constructor(t,n,i,o,a,s=uc.TreeItemCollapsibleState.Collapsed){super(o,t,i,a,s);this._groupId=n,super.definition={name:t,group:n,itemType:i,id:o}}get parent(){return this._parent}async getChildren(t){await uc.window.showErrorMessage("getChildren is not implemented! Please overwrite in derived class!")}get group(){return this._groupId}};var fb=Q(require("vscode"));var db=Q(require("vscode"));var lc=class extends de{constructor(e,t,n){super(e.name,t,"PARAMETER",e.name,n,db.TreeItemCollapsibleState.None),this.definition=e,super.description=e.currentValue,super.id=this.dataset.uid+"/"+this.itemType.toString()}get definition(){return super.definition}set definition(e){super.definition=e}get dataset(){return this.parent.dataset}async update(){let e=this.dataset.apiPath+"Default.UpdateParameters",t=null;if(this.definition.suggestedValues?t=await q.showQuickPick(this.definition.suggestedValues.map(i=>new Xe(i)),this.definition.description):t=await q.showInputBox(this.definition.currentValue,this.definition.description),!t)return;let n={updateDetails:[{name:this.definition.name,newValue:t}]};C.setStatusBar("Updating parameter ...",!0),await N.post(e,n),C.setStatusBar("Parameter updated!"),await C.TreeViewWorkspaces.refresh(!1,this.parent)}};var pc=class extends de{constructor(e,t){super("Parameters",e,"PARAMETERS",t.uid,t),super.id=e+"/"+this.parent.uid+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}get dataset(){return this.parent}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getItemList(this.apiPath);for(let i of n){let o=new lc(i,this.group,this);t.push(o),q.pushQuickPickItem(o)}return t}}};var dc=class extends de{constructor(e,t,n){super(e.name,t,"DATASET",e.id,n,fb.TreeItemCollapsibleState.Collapsed),this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}get canDoChangse(){return this.definition.configuredBy==""}async getChildren(e){q.pushQuickPickItem(this);let t=[];return t.push(new pc(this.group,this)),t}async handleDrop(e){let t=e.get("application/vnd.code.tree.powerbiworkspaces");if(!t){C.log("Item dropped on PowerBI Workspace Tree-View - but MimeType 'application/vnd.code.tree.powerbiworkspaces' was not found!");return}let i=t.value[0];switch(i.itemType){case"REPORT":switch(await q.showQuickPick([new Xe("rebind"),new Xe("clone")],"Action")){case"rebind":i.rebind({datasetId:this.id});break;case"clone":await i.clone({name:i.name,targetModelId:this.id,targetWorkspaceId:this.group}),C.TreeViewWorkspaces.refresh(!1,this.parent.parent);break;default:C.setStatusBar("Drag&Drop aborted!"),C.log("Invalid or no action selected!")}break;default:C.log("No action defined when dropping a "+i.itemType+" on "+this.itemType+"!")}}async delete(){C.setStatusBar("Deleting dataset ...",!0),await q.execute(this.apiPath,"DELETE",[]),C.setStatusBar("Dataset deleted!"),C.TreeViewWorkspaces.refresh(!1,this.parent)}async refresh(){C.setStatusBar("Triggering dataset-refresh ...",!0),N.post(this.apiPath+"/refreshes",null),C.setStatusBar("Dataset-refresh triggered!")}async takeOver(){C.setStatusBar("Taking over dataset ...",!0),N.post(this.apiPath+"/Default.TakeOver",null),C.setStatusBar("Dataset taken over!"),C.TreeViewWorkspaces.refresh(!1,this.parent)}async updateAllParameters(){}};var Yn=class extends de{constructor(e,t){super("Datasets",e,"DATASETS",e,t),super.id=e+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getItemList(this.apiPath);for(let i of n){let o=new dc(i,this.group,this);t.push(o),q.pushQuickPickItem(o)}return t}}};var hb=Q(require("vscode"));var fc=class extends de{constructor(e,t,n){super(e.name,t,"REPORT",e.id,n,hb.TreeItemCollapsibleState.None),this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async handleDrop(e){let t=e.get("application/vnd.code.tree.powerbiworkspaces");if(!t){C.log("Item dropped on PowerBI Workspace Tree-View - but MimeType 'application/vnd.code.tree.powerbiworkspaces' was not found!");return}let i=t.value[0];switch(i.itemType){case"REPORT":switch(await q.showQuickPick([new Xe("update content")],"Action")){case"update content":this.updateContent({sourceReport:{sourceReportId:i.id,sourceWorkspaceId:i.group},sourceType:"ExistingReport"});break;default:C.setStatusBar("Drag&Drop aborted!"),C.log("Invalid or no action selected!")}break;default:C.log("No action defined when dropping a "+i.itemType+" on "+this.itemType+"!")}}async delete(){C.setStatusBar("Deleting report ...",!0),await q.execute(this.apiPath,"DELETE",[]),C.setStatusBar("Report deleted!"),C.TreeViewWorkspaces.refresh(!1,this.parent)}async clone(e=void 0){let t=this.apiPath+"/Clone";e==null?q.execute(t,"POST",[new Dt("Name of new report","FREE_TEXT","name",!1,"The new report name"),new Dt("Target Dataset","DATASET_SELECTOR","targetModelId",!0,"Optional. Parameter for specifying the target associated dataset ID. If not provided, the new report will be associated with the same dataset as the source report."),new Dt("Target Workspace","WORKSPACE_SELECTOR","targetWorkspaceId",!0,"Optional. Parameter for specifying the target workspace ID. An empty GUID (00000000-0000-0000-0000-000000000000) indicates My workspace. If this parameter isn't provided, the new report will be cloned within the same workspace as the source report.")]):N.post(t,e),C.TreeViewWorkspaces.refresh(!1,this.parent)}async rebind(e=void 0){let t=this.apiPath+"/Rebind";e==null?q.execute(t,"POST",[new Dt("Target Dataset","DATASET_SELECTOR","datasetId",!1,"The new dataset for the rebound report. If the dataset resides in a different workspace than the report, a shared dataset will be created in the report's workspace.")]):N.post(t,e),C.TreeViewWorkspaces.refresh(!1,this.parent)}async updateContent(e=void 0){let t=this.apiPath+"/UpdateReportContent";e==null?q.execute(t,"POST",[new Dt("Source Report","REPORT_SELECTOR","sourceReport.sourceReportId",!1,"An source report."),new Dt("Source Report Workspace","WORKSPACE_SELECTOR","sourceReport.sourceWorkspaceId",!1,"The source workspace."),new Dt("Source Report Workspace","ExistingReport","sourceType",!1,"Use an existing report as the source of the content used to update a target report.")]):N.post(t,e),C.TreeViewWorkspaces.refresh(!1,this.parent)}};var Wn=class extends de{constructor(e,t){super("Reports",e,"REPORTS",e,t),super.id=e+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getItemList(this.apiPath);for(let i of n){let o=new fc(i,this.group,this);t.push(o),q.pushQuickPickItem(o)}return t}}};var mb=Q(require("vscode"));var hc=class extends de{constructor(e,t,n){super(e.displayName,t,"DASHBOARD",e.id,n,mb.TreeItemCollapsibleState.None),this.name=e.displayName,this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async delete(){await q.execute(this.apiPath,"DELETE",[]),C.TreeViewWorkspaces.refresh(!1,this.parent)}};var Jn=class extends de{constructor(e,t){super("Dashboards",e,"DASHBOARDS",e,t),super.id=e+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getItemList(this.apiPath,{},"displayName");for(let i of n){let o=new hc(i,this.group,this);t.push(o),q.pushQuickPickItem(o)}return t}}};var gb=Q(require("vscode"));var mc=class extends de{constructor(e,t,n){super(e.name,t,"DATAFLOW",e.objectId,n,gb.TreeItemCollapsibleState.None),this.id=e.objectId,this.definition=e,super.tooltip=this._tooltip}get definition(){return super.definition}set definition(e){super.definition=e}async delete(){C.setStatusBar("Deleting dataflow ...",!0),await q.execute(this.apiPath,"DELETE",[]),C.setStatusBar("Dataflow deleted!"),C.TreeViewWorkspaces.refresh(!1,this.parent)}async refresh(){C.setStatusBar("Triggering dataflow-refresh ...",!0),N.post(this.apiPath+"/refreshes",null),C.setStatusBar("Dataflow-refresh triggered")}};var gc=class extends de{constructor(e,t){super("Dataflows",e,"DATAFLOWS",e,t),super.id=e+"/"+this.itemType.toString()}get _tooltip(){}get _description(){}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getItemList(this.apiPath,{},"displayName");for(let i of n){let o=new mc(i,this.group,this);t.push(o),q.pushQuickPickItem(o)}return t}}};var Eb=require("url"),Xr=class extends de{constructor(e){super(e.name,e.id,"GROUP",e.id,void 0),this.definition=e,super.tooltip=this._tooltip,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}get definition(){return super.definition}set definition(e){super.definition=e}get isPremiumCapacity(){return this.definition.isOnDedicatedCapacity}getIconPath(e){let t="";return this.isPremiumCapacity&&(t="_premium"),yb.join(C.rootPath,"resources",e,this.itemType.toLowerCase()+t+".png")}get apiUrlPart(){return"groups/"+this.uid}static get MyWorkspace(){return{id:"myorg",name:"My Workspace",item_type:"GROUP",isOnDedicatedCapacity:!1,isReadOnly:!1}}async getChildren(e){q.pushQuickPickItem(this);let t=[];return t.push(new Yn(this.uid,this)),t.push(new Wn(this.uid,this)),t.push(new Jn(this.uid,this)),t.push(new gc(this.uid,this)),t}async handleDrop(e){let t=e.get("application/vnd.code.tree.powerbiworkspaces"),n=e.get("text/uri-list");if(!t&&!n){C.log("Item dropped on PowerBI Workspace Tree-View - but MimeType 'application/vnd.code.tree.powerbiworkspaces' was not found!");return}if(n){let i=new Eb.URL(await n.asString()),o=i.pathname.split("/").pop().split(".")[0],a=this.apiPath+"/imports?datasetDisplayName="+o;(await N.postFile(a,i)).then(function(c){C.log("success! ",c)}).catch(function(c){C.log("error",c)})}if(t){let o=t.value[0];switch(o.itemType){case"REPORT":switch(await q.showQuickPick([new Xe("clone")],"Action")){case"clone":await o.clone({name:o.name+" - Clone",targetWorkspaceId:this.id}),C.TreeViewWorkspaces.refresh(!1,this);break;default:C.setStatusBar("Drag&Drop aborted!"),C.log("Invalid or no action selected!")}break;default:C.log("No action defined when dropping a "+o.itemType+" on "+this.itemType+"!")}}}async delete(){vb.window.showWarningMessage("For safety-reasons workspaces cannot be deleted using this extension!")}};var Cb=Q(require("vscode"));var Sd=class extends Cb.DataTransferItem{constructor(t){super(t);this._nodes=t}asObject(){return this._nodes}asString(){return this.value[0].toString()}},vc=class{constructor(){this.dropMimeTypes=["application/vnd.code.tree.powerbiworkspaces","text/uri-list"];this.dragMimeTypes=["application/vnd.code.tree.powerbiworkspaces"]}async handleDrag(e,t,n){t.set("application/vnd.code.tree.powerbiworkspaces",new Sd(e))}async handleDrop(e,t,n){C.log("Dropped item on "+e.itemType+" ...");let i=await t.get("text/uri-list");i!=null&&C.log(await i.asString()),"handleDrop"in e?e.handleDrop(t):C.log("No action defined when dropping an item on a "+e.itemType+" node!")}};var Tb=Q(require("vscode")),bb=Q(require("path"));var yc=class extends Xr{constructor(){super(Xr.MyWorkspace),super.description=null,super.iconPath={light:this.getIconPath("light"),dark:this.getIconPath("dark")}}getIconPath(e){return bb.join(C.rootPath,"resources",e,this.itemType.toLowerCase()+".png")}get apiUrlPart(){return null}async getChildren(e){q.pushQuickPickItem(this);let t=[];return t.push(new Yn(null,this)),t.push(new Wn(null,this)),t.push(new Jn(null,this)),t}async delete(){Tb.window.showErrorMessage("'"+this.name+"' cannot be deleted!")}};var Ec=class{constructor(e){this._onDidChangeTreeData=new to.EventEmitter;this.onDidChangeTreeData=this._onDidChangeTreeData.event;let t=to.window.createTreeView("PowerBIWorkspaces",{treeDataProvider:this,showCollapseAll:!0,canSelectMany:!0,dragAndDropController:new vc});e.subscriptions.push(t),t.onDidChangeSelection(n=>this._onDidChangeSelection(n.selection)),C.TreeViewWorkspaces=this}async _onDidChangeSelection(e){}refresh(e=!1,t=null){e&&to.window.showInformationMessage("Refreshing Workspaces ..."),this._onDidChangeTreeData.fire(t)}getTreeItem(e){return e}getParent(e){return e.parent}async getChildren(e){if(!N.isInitialized)return Promise.resolve([]);if(e!=null&&e!=null)return e.getChildren();{let t=[],n=await N.getGroups();t.push(new yc);for(let i of n){let o=new Xr(i);t.push(o),q.pushQuickPickItem(o)}return t}}add(){}};async function HU(r){await C.initialize(r)||(C.log("Issue initializing extension - Please update PowerBI settings and restart VSCode!"),fe.window.showErrorMessage("Issue initializing extension - Please update PowerBI settings and restart VSCode!")),C.StatusBar=fe.window.createStatusBarItem("powerbi-vscode",fe.StatusBarAlignment.Right),C.StatusBar.show(),C.setStatusBar("Initialized!"),fe.commands.registerCommand("PowerBI.updateQuickPickList",a=>q.pushQuickPickItem(a));let t=new Ec(r);fe.commands.registerCommand("PowerBIWorkspaces.refresh",(a=!0)=>t.refresh(a)),fe.commands.registerCommand("PowerBIWorkspace.delete",a=>a.delete()),fe.commands.registerCommand("PowerBIDataset.delete",a=>a.delete()),fe.commands.registerCommand("PowerBIDataset.refresh",a=>a.refresh()),fe.commands.registerCommand("PowerBIDataset.takeOver",a=>a.takeOver()),fe.commands.registerCommand("PowerBIDataset.updateAllParameters",a=>a.updateAllParameters()),fe.commands.registerCommand("PowerBIDatasetParameter.update",a=>a.update()),fe.commands.registerCommand("PowerBIReport.delete",a=>a.delete()),fe.commands.registerCommand("PowerBIReport.clone",a=>a.clone()),fe.commands.registerCommand("PowerBIReport.rebind",a=>a.rebind()),fe.commands.registerCommand("PowerBIReport.updateContent",a=>a.updateContent()),fe.commands.registerCommand("PowerBIDataflow.delete",a=>a.delete()),fe.commands.registerCommand("PowerBIDataflow.refresh",a=>a.refresh()),fe.commands.registerCommand("PowerBIDasjbpard.delete",a=>a.delete());let n=new Qs(r);fe.commands.registerCommand("PowerBICapacities.refresh",(a=!0)=>n.refresh(a));let i=new rc(r);fe.commands.registerCommand("PowerBIGateways.refresh",(a=!0)=>i.refresh(a));let o=new cc(r);fe.commands.registerCommand("PowerBIPipelines.refresh",(a=!0)=>o.refresh(a))}function GU(){C.cleanUp()}0&&(module.exports={activate,deactivate});
/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */
/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! @azure/msal-common v4.5.1 2021-08-02 */
/*! @azure/msal-common v6.3.0 2022-05-02 */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
